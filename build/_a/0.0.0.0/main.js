/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetadataApiPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/meta.ts
var import_obsidian2 = require("obsidian");

// src/current.ts
var CurrentMetadata = class {
  constructor(metaApi) {
    this._api = metaApi;
  }
  get Data() {
    return this._api.get();
  }
  get data() {
    return this.Data;
  }
  get Note() {
    const specialCache = this._api.cache("_zpec:a|");
    if (typeof specialCache["CurrentPath"] === "string") {
      const current2 = this._api.vault(ScopedCurrentPath);
      if (!current2) {
        throw "No Current File";
      }
      return current2;
    }
    const current = app.workspace.getActiveFile();
    if (!current) {
      throw "No Current File";
    }
    return current;
  }
  get note() {
    return this.Note;
  }
  get Path() {
    const note = this.Note;
    let path = note.path;
    if (note.extension) {
      path = path.slice(0, 0 - (note.extension.length + 1));
    }
    return path;
  }
  get path() {
    return this.Path;
  }
  get PathEx() {
    return this.note.path;
  }
  get pathex() {
    return this.PathEx;
  }
  get Matter() {
    return this._api.frontmatter();
  }
  get matter() {
    return this.Matter;
  }
  get Cache() {
    return this._api.cache();
  }
  get cache() {
    return this.Cache;
  }
  get Sections() {
    return this._api.sections();
  }
  get sections() {
    return this.Sections;
  }
  patch(frontmatterData, propertyName = null, options = { toValuesFile: false, prototype: false }) {
    return this._api.patch(this.path, frontmatterData, propertyName, options);
  }
  set(frontmatterData, options = { toValuesFile: false, prototype: false }) {
    return this._api.set(this.path, frontmatterData, options);
  }
  clear(frontmatterProperties = null, options = { toValuesFile: false, prototype: false }) {
    return this._api.clear(this.path, frontmatterProperties, options);
  }
};

// src/api.ts
var SplayKebabCasePropertiesOption = /* @__PURE__ */ ((SplayKebabCasePropertiesOption2) => {
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["Disabled"] = 0] = "Disabled";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["Lowercase"] = 1] = "Lowercase";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["CamelCase"] = 2] = "CamelCase";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["LowerAndCamelCase"] = 3] = "LowerAndCamelCase";
  return SplayKebabCasePropertiesOption2;
})(SplayKebabCasePropertiesOption || {});
var PluginContainer = class {
  static get MetaeditApi() {
    return app.plugins.plugins.metaedit.api;
  }
  static get DataviewApi() {
    return app.plugins.plugins.dataview.api;
  }
};

// src/sections.ts
var import_obsidian = require("obsidian");
var SectionHeader = class {
  get text() {
    return this._text;
  }
  get Text() {
    return this._text;
  }
  get index() {
    return this._index;
  }
  get Index() {
    return this._index;
  }
  get Level() {
    return this._level;
  }
  get level() {
    return this._level;
  }
  get md() {
    return this.Md;
  }
  get Md() {
    return `${"#".repeat(this.level)} ${this.text}`;
  }
  constructor(text, level, index) {
    this._text = text;
    this._level = level;
    this._index = index;
  }
};
var NoteSection = class {
  constructor(note, index, heading) {
    this._html = null;
    this._md = null;
    this._keys = [];
    this._count = 0;
    this._parentTitle = null;
    this._sections = {};
    this._subtitles = [];
    this._unique = {};
    this._text = null;
    this._id = null;
    this._root = note;
    this._heading = new SectionHeader(heading.heading, heading.level, index);
    this._keys = NoteSection.SplayKeys(this._heading.text);
  }
  get keys() {
    return this._keys;
  }
  get Keys() {
    return this._keys;
  }
  get count() {
    return this._count;
  }
  get Count() {
    return this._count;
  }
  get Container() {
    return this._parentTitle;
  }
  get container() {
    return this._parentTitle;
  }
  get Sections() {
    return this._sections;
  }
  get sections() {
    return this._sections;
  }
  get Root() {
    return this._root;
  }
  get root() {
    return this._root;
  }
  get subtitles() {
    return this._subtitles;
  }
  get Subtitles() {
    return this._subtitles;
  }
  get Header() {
    return this._heading;
  }
  get header() {
    return this._heading;
  }
  get Md() {
    return this.md;
  }
  get md() {
    return (async () => {
      if (this._md === null) {
        this._md = await this._find();
      }
      return this._md;
    })();
  }
  get Html() {
    return this.html;
  }
  get html() {
    return (async () => {
      if (this._html === null) {
        const md = await this.md;
        this._html = document.createElement("div");
        const renderLeaf = app.workspace.createLeafInTabGroup();
        const view = new import_obsidian.MarkdownView(renderLeaf);
        let localMd = this._md;
        if (this.root.getMatter()) {
          localMd = "---" + this.root.getMatter() + "---\n\n" + localMd;
        }
        view.data = localMd;
        try {
          await import_obsidian.MarkdownRenderer.renderMarkdown(md, this._html, this.root.path, null);
        } finally {
          renderLeaf.detach();
        }
      }
      return this._html;
    })();
  }
  get Txt() {
    return this.txt;
  }
  get txt() {
    return (async () => {
      if (this._text === null) {
        const html = await this.html;
        this._text = html.textContent || "";
      }
      return this._text;
    })();
  }
  get path() {
    return this._root.path + "#" + this.header.text;
  }
  get Path() {
    return this.path;
  }
  get unique() {
    return Object.values(this._unique);
  }
  get Unique() {
    return this.unique;
  }
  get Id() {
    var _a;
    return (_a = this._id) != null ? _a : this._id = this.header.index + ":|:" + this.path + ":|:" + this.header.level;
  }
  get id() {
    return this.Id;
  }
  async _find() {
    const fullNoteContents = await this.root.loadText() || "";
    const headerMd = this.header.Md;
    const headerRegEx = new RegExp(`((?:^${headerMd})|(?:\\n${headerMd}))`, "gm");
    const matches = fullNoteContents.matchAll(headerRegEx);
    if (!matches) {
      throw `Section Header: "${headerMd}", not found in file: ${this.root.path}.`;
    }
    const results = [...matches];
    if (!results || !results.length) {
      throw `Section Header: "${headerMd}", not found in file: ${this.root.path}.`;
    }
    const result = results.at(this.header.index);
    if (!result || !result.index && result.index !== 0) {
      throw `Section Header: "${headerMd}", with index: ${this._index}, not found in file: ${this.root.path}.`;
    }
    const start = fullNoteContents.indexOf("\n", result.index + headerMd.length);
    if (start === -1) {
      return "";
    }
    const match = fullNoteContents.substring(start).match(new RegExp(`(\\n#{1,${this.header.level}})`, "m"));
    if (match && (match.index || match.index === 0)) {
      return fullNoteContents.substring(start + 1, start + match.index);
    }
    return fullNoteContents.substring(start + 1);
  }
  addChild(child) {
    this._subtitles.push(child.header);
    let parent = this;
    while (parent) {
      parent._unique[child.id] = child;
      parent = parent.container;
    }
    for (const key of child.keys) {
      if (!this.hasOwnProperty(key)) {
        this[key] = child;
      }
      if (this._sections[key]) {
        this._sections[key].push(child);
      } else {
        this._sections[key] = [child];
      }
      child._parentTitle = this;
    }
    this._count += 1;
  }
  static SplayKeys(text) {
    const keys = [text];
    let cleaned = text;
    if (cleaned.contains("[")) {
      cleaned = cleaned.replace(new RegExp("\\[\\[(?:(?:([^\\]]*)\\|([^\\]]*))|([^\\]]*))\\]\\]", "g"), "$2$3");
    }
    if (cleaned.contains("::")) {
      cleaned = cleaned.replace(new RegExp("\\[(?:(?:([^\\[:\\|]*)::([^\\]]*)))\\]|\\((?:(?:([^\\[:\\|]*)::([^\\]]*)))\\)", "g"), function(a, b, c, d, e, f) {
        return b ? `${b} ${c}` : e;
      });
    }
    cleaned = cleaned.replace(new RegExp("(?:(^[\\d ][^{a-zA-Z_\\-}]*)|([^{a-zA-Z0-9_\\-\\$ }]))", "g"), "");
    keys.push(cleaned);
    if (PluginContainer.Instance.settings.splayFrontmatterWithoutDataview) {
      const camel = cleaned.replace(/ /g, "");
      if (!camel) {
        return keys.unique();
      }
      const lower = camel.toLowerCase();
      const lowerCamel = camel[0].toLowerCase() + camel.substring(1);
      keys.push(lower, camel, lowerCamel);
      if (PluginContainer.Instance.settings.splayKebabCaseProperties && cleaned.contains("-")) {
        if (PluginContainer.Instance.settings.splayKebabCaseProperties === 3 /* LowerAndCamelCase */) {
          keys.push(lower.replace(/-/g, ""));
          keys.push(lowerCamel.split("-").map((part, i) => i !== 0 && part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join(""));
          keys.push(camel.split("-").map((part) => part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join(""));
        } else if (PluginContainer.Instance.settings.splayKebabCaseProperties === 1 /* Lowercase */) {
          keys.push(lower.replace(/-/g, ""));
        } else if (PluginContainer.Instance.settings.splayKebabCaseProperties === 2 /* CamelCase */) {
          keys.push(lowerCamel.split("-").map((part, i) => i !== 0 && part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join(""));
          keys.push(camel.split("-").map((part) => part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join(""));
        }
      }
    }
    return keys.unique();
  }
};
var NoteSections = class extends Object {
  constructor(notePath, headings) {
    super();
    this._all = {};
    this._root = {};
    this._unique = {};
    this._path = "";
    this._count = 0;
    this._md = null;
    this._fm = "";
    this._html = null;
    if (notePath !== void 0 && headings !== void 0) {
      this._path = notePath;
      let parent = null;
      let previous = null;
      for (const heading of headings) {
        const current = new NoteSection(this, this._all[heading.heading] ? this._all[heading.heading].length : 0, heading);
        if (previous && previous.header.level < current.header.level) {
          parent = previous;
        }
        while (parent && current.header.level <= parent.header.level) {
          parent = parent.Container;
        }
        if (!parent) {
          parent = current;
          if (!this._root[heading.heading]) {
            this._root[heading.heading] = [current];
          } else {
            this._root[heading.heading].push(current);
          }
          for (const key of parent.keys) {
            if (!this.hasOwnProperty(key)) {
              this[key] = parent;
            }
          }
        } else {
          parent == null ? void 0 : parent.addChild(current);
        }
        this._unique[current.id] = current;
        for (const key of current.keys) {
          if (!this._all[key]) {
            this._all[key] = [current];
          } else {
            this._all[key].push(current);
          }
        }
        this._count += 1;
        previous = current;
      }
    }
  }
  get path() {
    return this._path;
  }
  get Path() {
    return this._path;
  }
  get count() {
    return this._count;
  }
  get Count() {
    return this._count;
  }
  get all() {
    return this._all;
  }
  get All() {
    return this._all;
  }
  get Root() {
    return this._root;
  }
  get root() {
    return this._root;
  }
  get headers() {
    return Object.values(this._unique).map((u) => u.header);
  }
  get Headers() {
    return this.headers;
  }
  get unique() {
    return Object.values(this._unique);
  }
  get Unique() {
    return this.unique;
  }
  named(name) {
    return NoteSection.SplayKeys(name).map((k) => this._all[k]).filter((s) => s).flat();
  }
  async loadText() {
    if (this._md !== null) {
      return Promise.resolve(this._md);
    } else {
      const file = PluginContainer.Instance.api.vault(this.path);
      this._md = await app.vault.cachedRead(file);
      const frontMarker = "---";
      if (this._md.startsWith(frontMarker)) {
        var startPosition = this._md.search(frontMarker) + frontMarker.length;
        var endPosition = this._md.slice(startPosition).search(frontMarker) + startPosition;
        this._fm = this._md.slice(startPosition, endPosition);
      }
      return Promise.resolve(this._md);
    }
  }
  async loadHtml() {
    if (this._html !== null) {
      return Promise.resolve(this._html);
    } else {
      return this.loadText().then((v) => {
        this._html = document.createElement("div");
        import_obsidian.MarkdownRenderer.renderMarkdown(this._md, this._html, this.root.path, null);
        return this._html;
      });
    }
  }
  getMatter() {
    return this._fm;
  }
};

// src/meta.ts
var _Metadata = class {
  constructor(plugin) {
    this._plugin = plugin;
    this._initializeKebabPropSplayer();
    this._initializePropLowercaseSplayer();
  }
  _initializeKebabPropSplayer() {
    this._kebabPropSplayer = (() => {
      switch (this.plugin.settings.splayKebabCaseProperties) {
        case 1 /* Lowercase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowercase, topLevelPropertiesToIgnore);
        case 2 /* CamelCase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowerCamelcase, topLevelPropertiesToIgnore);
        case 3 /* LowerAndCamelCase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowerAndLowerCamelcase, topLevelPropertiesToIgnore);
        case 0 /* Disabled */:
        default:
          return (base) => base;
      }
    })();
  }
  _initializePropLowercaseSplayer() {
    this._lowerCaseSplayer = this.plugin.settings.splayFrontmatterWithoutDataview ? (base) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayToLowerCase) : (base) => base;
  }
  static _recurseOnAllObjectProperties(value, fn, topLevelPropertiesToIgnore = null) {
    if (value && typeof value === "object") {
      if (Array.isArray(value)) {
        return value.map((i) => this._recurseOnAllObjectProperties(i, fn));
      } else {
        const data = {};
        for (const key of Object.keys(value)) {
          if (topLevelPropertiesToIgnore && topLevelPropertiesToIgnore.contains(key)) {
            data[key] = value[key];
          } else {
            fn(key, this._recurseOnAllObjectProperties(value[key], fn), data);
          }
        }
        return data;
      }
    } else {
      return value;
    }
  }
  static _splayKebabToLowercase(key, value, data) {
    if (key.includes("-")) {
      data[key.replace(/-/g, "").toLowerCase()] = value;
    }
    data[key] = value;
  }
  static _splayKebabToLowerCamelcase(key, value, data) {
    if (key.includes("-")) {
      data[key.toLowerCase().split("-").map((part, i) => i !== 0 && part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join("")] = value;
    }
    data[key] = value;
  }
  static _splayKebabToLowerAndLowerCamelcase(key, value, data) {
    if (key.includes("-")) {
      const lowerKey = key.toLowerCase();
      data[lowerKey.replace(/-/g, "")] = value;
      data[lowerKey.split("-").map((part, i) => i !== 0 && part ? part.charAt(0).toUpperCase() + part.substring(1) : part).join("")] = value;
    }
    data[key] = value;
  }
  static _splayToLowerCase(key, value, data) {
    data[key] = value;
    data[key.toLowerCase()] = value;
  }
  static get Api() {
    return PluginContainer.Instance.api;
  }
  static get DataviewApi() {
    return app.plugins.plugins.dataview.api;
  }
  static get MetaeditApi() {
    return app.plugins.plugins.metaedit.api;
  }
  static get DefaultSources() {
    return {
      FileInfo: true,
      Frontmatter: true,
      DataviewInline: true,
      Cache: true,
      Sections: true
    };
  }
  get Plugin() {
    var _a;
    return (_a = this._plugin) != null ? _a : this._plugin = app.plugins.plugins["metadata-api"];
  }
  get plugin() {
    var _a;
    return (_a = this._plugin) != null ? _a : this._plugin = app.plugins.plugins["metadata-api"];
  }
  get Current() {
    return this.current;
  }
  get current() {
    return new CurrentMetadata(this);
  }
  get Data() {
    return this.Current.Data;
  }
  get data() {
    return this.Current.Data;
  }
  vault(file = null) {
    var _a;
    if (file instanceof import_obsidian2.TAbstractFile) {
      return file;
    }
    const path = _Metadata.ParseFilePathFromSource(file) || this.Current.Path;
    return (_a = app.vault.getAbstractFileByPath(path)) != null ? _a : app.vault.getAbstractFileByPath(path + ".md");
  }
  omfc(file = null) {
    const fileObject = this.vault(file);
    if (!(fileObject instanceof import_obsidian2.TFile)) {
      if (fileObject instanceof import_obsidian2.TFolder) {
        return fileObject.children.map((sub) => this.omfc(sub)).flat();
      } else {
        throw `Note or Folder Not Found: ${fileObject == null ? void 0 : fileObject.path}`;
      }
    }
    const result = app.metadataCache.getFileCache(fileObject) || null;
    if (result !== null) {
      result.path = fileObject.path;
    }
    return result;
  }
  frontmatter(file = null) {
    const fileCache = this.omfc(file);
    if (Array.isArray(fileCache)) {
      return fileCache.map((f) => this.frontmatter(f.path));
    } else {
      return fileCache && fileCache.frontmatter ? this._lowerCaseSplayer(this._kebabPropSplayer(fileCache == null ? void 0 : fileCache.frontmatter, null)) : null;
    }
  }
  sections(file = null) {
    const fileCache = this.omfc(file);
    if (Array.isArray(fileCache)) {
      return fileCache.map((f) => this.sections(f.path));
    } else if (!fileCache) {
      return null;
    } else {
      return new NoteSections(fileCache == null ? void 0 : fileCache.path, fileCache == null ? void 0 : fileCache.headings);
    }
  }
  dv(file = null) {
    const paths = _Metadata.DataviewApi.pagePaths(file ? _Metadata.ParseFilePathFromSource(file) : this.Current.Path);
    if (paths.length > 1) {
      return paths.map((p) => this.dv(p));
    } else if (!paths.length) {
      return null;
    } else {
      const result = _Metadata.DataviewApi.page(paths[0]);
      return this._kebabPropSplayer(result, ["file"]);
    }
  }
  cache(file = null) {
    const fileObject = this.vault(file);
    if (fileObject === null) {
      const key = _Metadata.ParseFilePathFromSource(file);
      if (key !== null && key !== void 0) {
        _Metadata._caches[key] = _Metadata._caches[key] || {};
        return _Metadata._caches[key];
      }
      throw "Invalid Key for File";
    } else if (fileObject instanceof import_obsidian2.TFolder) {
      return fileObject.children.map((f) => this.cache(f)).flat();
    } else {
      _Metadata._caches[fileObject.path] = _Metadata._caches[fileObject.path] || {};
      return _Metadata._caches[fileObject.path];
    }
  }
  prototypes(prototypePath) {
    return this.frontmatter(_Metadata.BuildPrototypeFileFullPath(prototypePath));
  }
  values(dataPath) {
    return this.frontmatter(_Metadata.BuildDataFileFullPath(dataPath));
  }
  get(file = null, sources = _Metadata.DefaultSources) {
    var _a;
    if (file instanceof import_obsidian2.TFolder) {
      return file.children.map((c) => this.get(c, sources)).flat();
    }
    const fileName = file ? (_a = _Metadata.ParseFilePathFromSource(file)) != null ? _a : this.current.path : this.Current.Path;
    if (fileName == null ? void 0 : fileName.endsWith("/")) {
      const folderName = fileName.substring(0, -1);
      const fileObject = this.vault(folderName);
      if (fileObject instanceof import_obsidian2.TFolder) {
        return fileObject.children.map((c) => this.get(c, sources)).flat();
      } else {
        throw "Expected folder because of trailing slash(/): '" + fileName + "'.";
      }
    } else {
      const fileObject = this.vault(fileName);
      if (fileObject instanceof import_obsidian2.TFolder) {
        return fileObject.children.map((c) => this.get(c, sources)).flat();
      }
    }
    let values = {};
    if (sources === true) {
      values = this._kebabPropSplayer(_Metadata.DataviewApi.page(fileName), ["file"]) || {};
    } else {
      if (sources === false) {
        return {};
      }
      if (sources.DataviewInline || sources.FileInfo) {
        values = this._kebabPropSplayer(_Metadata.DataviewApi.page(fileName), ["file"]) || {};
        if (!sources.FileInfo) {
          delete values.file;
        } else {
          values["File"] = values.file;
        }
        let frontmatter = null;
        if (!sources.DataviewInline) {
          frontmatter = this.frontmatter(fileName);
          Object.keys(values).forEach((prop) => {
            if (!frontmatter.hasOwnProperty(prop) && prop != "file") {
              delete values[prop];
            }
          });
        }
        if (!sources.Frontmatter) {
          frontmatter = frontmatter || this.frontmatter(fileName);
          Object.keys(frontmatter).forEach((prop) => {
            delete values[prop];
          });
        }
      } else if (sources.Frontmatter) {
        values = this.frontmatter(fileName);
      }
    }
    if (sources === true || sources.Cache) {
      values["cache"] = this.cache(fileName);
      values["Cache"] = this.cache(fileName);
    }
    if (sources === true || sources.Sections) {
      if (sources === true || sources.FileInfo) {
        values.file.sections = this.sections(fileName);
        values.file.Sections = this.sections(fileName);
      } else {
        values.file = {};
        values.file.sections = this.sections(fileName);
        values.file.Sections = this.sections(fileName);
      }
    }
    return values;
  }
  patch(file, frontmatterData, propertyName = null, options = { toValuesFile: false, prototype: false }) {
    var _a, _b;
    if (options.prototype && options.toValuesFile) {
      this.patch(file, frontmatterData, propertyName, { ...options, prototype: false });
      this.patch(file, frontmatterData, propertyName, { ...options, toValuesFile: false });
      return;
    }
    const { update } = _Metadata.MetaeditApi;
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype((_a = options.toValuesFile) != null ? _a : false, file, (_b = options.prototype) != null ? _b : false);
    if (propertyName != null) {
      update(propertyName, frontmatterData, fileName);
    } else {
      Object.keys(frontmatterData).forEach((propertyName2) => update(propertyName2, frontmatterData[propertyName2], fileName));
    }
  }
  set(file, frontmatterData, options = { toValuesFile: false, prototype: false }) {
    var _a, _b;
    if (options.prototype && options.toValuesFile) {
      this.set(file, frontmatterData, { ...options, prototype: false });
      this.set(file, frontmatterData, { ...options, toValuesFile: false });
      return;
    }
    const { update } = _Metadata.MetaeditApi;
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype((_a = options.toValuesFile) != null ? _a : false, file, (_b = options.prototype) != null ? _b : false);
    this.clear(fileName);
    Object.keys(frontmatterData).forEach((propertyName) => update(propertyName, frontmatterData[propertyName], fileName));
  }
  clear(file = null, frontmatterProperties = null, options = { toValuesFile: false, prototype: false }) {
    var _a, _b;
    if (options.prototype && options.toValuesFile) {
      this.set(file, frontmatterProperties, { ...options, prototype: false });
      this.set(file, frontmatterProperties, { ...options, toValuesFile: false });
      return;
    }
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype((_a = options.toValuesFile) != null ? _a : false, file, (_b = options.prototype) != null ? _b : false);
    let propsToClear = [];
    if (typeof frontmatterProperties === "string") {
      propsToClear.push(frontmatterProperties);
    } else if (typeof frontmatterProperties === "object") {
      if (frontmatterProperties === null) {
        propsToClear = Object.keys(this.frontmatter(fileName));
      } else if (Array.isArray(frontmatterProperties)) {
        propsToClear = frontmatterProperties;
      } else {
        propsToClear = Object.keys(frontmatterProperties);
      }
    }
    throw "not implemented";
  }
  static ContainsDeepProperty(propertyPath, onObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = onObject;
    for (const currentKey of keys) {
      if (typeof parent !== "object") {
        return false;
      }
      if (!parent.hasOwnProperty(currentKey)) {
        return false;
      }
      parent = parent[currentKey];
    }
    return true;
  }
  static TryToGetDeepProperty(propertyPath, thenDo, fromObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = fromObject;
    for (const currentKey of keys) {
      if (typeof parent !== "object" || !parent.hasOwnProperty(currentKey)) {
        if (thenDo && thenDo.onFalse) {
          thenDo.onFalse();
        }
        return false;
      }
      parent = parent[currentKey];
    }
    if (thenDo) {
      const then = thenDo.onTrue || thenDo;
      if (then) {
        return then(parent);
      }
    }
    return true;
  }
  static GetDeepProperty(propertyPath, fromObject) {
    return (typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath).reduce((t, p) => t == null ? void 0 : t[p], fromObject);
  }
  static SetDeepProperty(propertyPath, value, onObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = onObject;
    let currentKey;
    for (currentKey of keys) {
      if (typeof parent !== "object") {
        throw `Property: ${currentKey}, in Path: ${propertyPath}, is not an object. Child property values cannot be set!`;
      }
      if (!parent.hasOwnProperty(currentKey)) {
        parent[currentKey] = {};
      }
      if (currentKey != keys[keys.length - 1]) {
        parent = parent[currentKey];
      }
    }
    if (!currentKey) {
      throw "No Final Key Provided!?";
    }
    if (typeof value === "function") {
      parent[currentKey] = value(parent[currentKey]);
    } else {
      parent[currentKey] = value;
    }
  }
  path(relativePath = null, extension = "", rootFolder = null) {
    return _Metadata._addExtension(_Metadata._findPath(relativePath, extension, rootFolder), extension);
  }
  static Path(relativePath = null, extension = "", rootFolder = null) {
    return _Metadata.Api.path(relativePath, extension, rootFolder);
  }
  static ParseFilePathFromSource(file) {
    let fileName = file || null;
    if (typeof file === "object" && file !== null) {
      fileName = file.path;
    }
    return fileName;
  }
  static BuildDataFileFullPath(dataPath) {
    return app.plugins.plugins["metadata-api"].settings.dataFilesPath + dataPath;
  }
  static BuildPrototypeFileFullPath(prototypePath) {
    return app.plugins.plugins["metadata-api"].settings.prototypesPath + prototypePath;
  }
  static _parseFileNameFromDataFileFileOrPrototype(toValuesFile, file, prototype) {
    return toValuesFile ? file ? _Metadata.BuildDataFileFullPath(_Metadata.ParseFilePathFromSource(file)) : typeof toValuesFile === "string" ? _Metadata.BuildDataFileFullPath(toValuesFile) : _Metadata.BuildDataFileFullPath(_Metadata.Api.Current.Path) : prototype ? file ? _Metadata.BuildPrototypeFileFullPath(_Metadata.ParseFilePathFromSource(file)) : typeof prototype === "string" ? _Metadata.BuildPrototypeFileFullPath(prototype) : _Metadata.BuildPrototypeFileFullPath(_Metadata.Api.Current.Path) : _Metadata.ParseFilePathFromSource(file) || _Metadata.Api.Current.Path;
  }
  static _findPath(relativePath = null, extension = "", rootFolder = null) {
    if (!relativePath) {
      return _Metadata.Api.current.path;
    }
    let currentFolder = rootFolder ? app.vault.getAbstractFileByPath(rootFolder) : _Metadata.Api.Current.Note.parent;
    if (!currentFolder) {
      throw `Root Folder Not Found: ${currentFolder}.`;
    }
    if (relativePath.startsWith("?")) {
      const foundFile = app.metadataCache.getFirstLinkpathDest(_Metadata._addExtension(relativePath.substring(1), extension), currentFolder.path);
      if (foundFile) {
        return foundFile.path.substring(0, foundFile.path.length - foundFile.extension.length - 1);
      }
    }
    const [fileName, ...folders] = relativePath.split("/").reverse();
    let absolutePath = fileName;
    if (folders && folders.length) {
      for (var folder of folders.reverse()) {
        if (folder === "..") {
          currentFolder = currentFolder.parent;
        } else if (folder === ".") {
          continue;
        } else {
          absolutePath = folder + (absolutePath ? "/" + absolutePath : "");
        }
      }
    } else {
      const foundFile = app.metadataCache.getFirstLinkpathDest(_Metadata._addExtension(relativePath, extension), currentFolder.path);
      if (foundFile) {
        return foundFile.path.substring(0, foundFile.path.length - foundFile.extension.length - 1);
      }
    }
    if (currentFolder.path !== "/") {
      return currentFolder.path + (absolutePath ? "/" + absolutePath : "");
    } else {
      return absolutePath;
    }
  }
  static _addExtension(path, extension) {
    if (extension) {
      if (typeof extension !== "string") {
        return path + ".md";
      } else {
        return path + "." + extension;
      }
    } else {
      return path;
    }
  }
};
var Metadata = _Metadata;
Metadata._caches = {};

// src/settings.ts
var import_obsidian3 = require("obsidian");
var DefaultSettings = {
  globalCacheName: "cache",
  globalMetadataApiName: "meta",
  globalPathName: "path",
  defineObjectPropertyHelperFunctions: true,
  defineArrayHelperFunctions: true,
  splayKebabCaseProperties: 3 /* LowerAndCamelCase */,
  splayFrontmatterWithoutDataview: true,
  prototypesPath: "_/_assets/_data/_prototypes",
  valuesPath: "_/_assets/_data/_values"
};
var MetadataApiSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Medatata Api Settings" });
    new import_obsidian3.Setting(containerEl).setName("Metadata Api Variable Name").setDesc("The variable name to use for the Metadata Api global scope variable registered by this plugin").addText((text) => text.setPlaceholder("meta").setValue(this.plugin.settings.globalMetadataApiName).onChange(async (value) => {
      this.plugin.settings.globalMetadataApiName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Global Cache Variable Name").setDesc("The variable name to use for the cache global scope variable registered by this plugin").addText((text) => text.setPlaceholder("cache").setValue(this.plugin.settings.globalCacheName).onChange(async (value) => {
      this.plugin.settings.globalCacheName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Global Path Variable Name").setDesc("The name to use for the path global helper function registered by this plugin").addText((text) => text.setPlaceholder("path").setValue(this.plugin.settings.globalPathName).onChange(async (value) => {
      this.plugin.settings.globalPathName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Add Array Helper Functions.").setDesc("Adds the functions aggregateby, indexBy, etc to all arrays for data management.").addToggle((toggle) => toggle.setValue(this.plugin.settings.defineArrayHelperFunctions).onChange(async (value) => {
      this.plugin.settings.defineArrayHelperFunctions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Add Object Property Helper Functions.").setDesc("Adds the function hasProp, getProp, and setProp to all objects for deep property access.").addToggle((toggle) => toggle.setValue(this.plugin.settings.defineObjectPropertyHelperFunctions).onChange(async (value) => {
      this.plugin.settings.defineObjectPropertyHelperFunctions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Splay Kebab-Case Properties.").setDesc("This option adds copies of any kebab-case properties with the desired naming schemes. This is similar to how a lowercase version of values with uppercase letters are provided in dataview.").addDropdown((toggle) => toggle.setValue(this.plugin.settings.splayKebabCaseProperties.toString()).addOptions(Object.fromEntries(Object.entries(SplayKebabCasePropertiesOption).map(([key, value]) => [key.toString(), value.toString()]))).onChange(async (value) => {
      this.plugin.settings.splayKebabCaseProperties = SplayKebabCasePropertiesOption[parseInt(value)];
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Splay Frontmatter Properties to Lower Case even without Dataview.").setDesc("Dataview splays property keys with uppercase values to lowercase, creating two keys. If this is true, Metadata Api will add this functionality to the base Frontmatter calls, even without Dataview sources included.").addToggle((toggle) => toggle.setValue(this.plugin.settings.splayFrontmatterWithoutDataview).onChange(async (value) => {
      this.plugin.settings.splayFrontmatterWithoutDataview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Prototypes File Path").setDesc("The path to prototype data storage").addText((text) => text.setPlaceholder("_/_assets/_data/_prototypes").setValue(this.plugin.settings.prototypesPath).onChange(async (value) => {
      this.plugin.settings.prototypesPath = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Data Storage Values Path").setDesc("The path to the value data storage").addText((text) => text.setPlaceholder("_/_assets/_data/_values").setValue(this.plugin.settings.valuesPath).onChange(async (value) => {
      this.plugin.settings.valuesPath = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/components/sections.tsx
var ReactSectionComponents;
((ReactSectionComponents2) => {
  let SectionRenderMode;
  ((SectionRenderMode2) => {
    SectionRenderMode2["md"] = "md";
    SectionRenderMode2["html"] = "html";
    SectionRenderMode2["txt"] = "txt";
  })(SectionRenderMode = ReactSectionComponents2.SectionRenderMode || (ReactSectionComponents2.SectionRenderMode = {}));
  ReactSectionComponents2.SectionRenderModes = [
    "md" /* md */,
    "txt" /* txt */,
    "html" /* html */
  ];
  ReactSectionComponents2.Section = ({
    data,
    mode = "md" /* md */,
    renderer = void 0,
    enabled = true
  }) => {
    const { React, Markdown } = app.plugins.plugins["obsidian-react-components"];
    const { useState, useEffect } = React;
    const section = data;
    if (!section) {
      throw "'data' prop of type Section is required.";
    }
    if (!ReactSectionComponents2.SectionRenderModes.includes(mode)) {
      throw `Unrecognized mode: ${mode}. Valid modes: ${ReactSectionComponents2.SectionRenderModes.join(", ")}`;
    }
    const [renderedContent, setRenderedContent] = useState(null);
    useEffect(async () => {
      const value = await section[mode];
      setRenderedContent(value);
    }, []);
    if (renderedContent !== null) {
      if (typeof enabled === "function" && enabled(section, renderedContent) || enabled) {
        if (renderer) {
          return renderer(section, renderedContent);
        } else {
          if (mode.toLowerCase() == "md" /* md */) {
            return /* @__PURE__ */ React.createElement("span", {
              className: `Section-${section.header.text.replace(" ", "-")} Section-Index-${section.header.index} Section-Level-${section.header.level}`
            }, /* @__PURE__ */ React.createElement(Markdown, {
              src: renderedContent
            }));
          } else if (mode.toLowerCase() == "html" /* html */) {
            return /* @__PURE__ */ React.createElement("span", {
              className: `Section-${section.header.text.replace(" ", "-")} Section-Index-${section.header.index} Section-Level-${section.header.level}`,
              dangerouslySetInnerHTML: {
                __html: renderedContent ? renderedContent.innerHTML : ""
              }
            });
          } else {
            return /* @__PURE__ */ React.createElement("div", {
              className: `Section-${section.header.text.replace(" ", "-")} Section-Index-${section.header.index} Section-Level-${section.header.level}`
            }, renderedContent);
          }
        }
      }
    }
    return /* @__PURE__ */ React.createElement("i", null, "...Loading");
  };
  ReactSectionComponents2.Sections = ({
    data,
    mode = "md" /* md */,
    renderer = void 0,
    filter = true
  }) => {
    const { React } = app.plugins.plugins["obsidian-react-components"];
    const { useState, useEffect } = React;
    if (!data) {
      throw "'data' prop of type Section[] is required.";
    }
    if (!ReactSectionComponents2.SectionRenderModes.includes(mode)) {
      throw `Unrecognized mode: ${mode}. Valid modes: ${ReactSectionComponents2.SectionRenderModes.join(", ")}`;
    }
    const [renderedSections, setRenderedSections] = useState(null);
    useEffect(async () => {
      const renderedItems = {};
      for (const section of data) {
        renderedItems[section.id] = await section[mode];
      }
      setRenderedSections(renderedItems);
    }, []);
    const sections = data.indexBy("id");
    if (renderedSections !== null) {
      const childProps = {
        mode
      };
      if (renderer) {
        childProps.renderer = (s, r) => renderer(s, r, sections, renderedSections);
      }
      if (filter) {
        childProps.enabled = typeof filter === "function" ? (s, r) => filter(s, r, sections, renderedSections) : filter;
      }
      return /* @__PURE__ */ React.createElement(React.Fragment, null, data && data.map((section) => /* @__PURE__ */ React.createElement(ReactSectionComponents2.Section, {
        data: section,
        ...childProps
      })));
    }
    return /* @__PURE__ */ React.createElement("i", null, "...Loading");
  };
  ReactSectionComponents2.Components = {
    Section: ReactSectionComponents2.Section,
    Sections: ReactSectionComponents2.Sections
  };
})(ReactSectionComponents || (ReactSectionComponents = {}));

// src/components/markdown.tsx
var ReactMarkdownComponents;
((ReactMarkdownComponents2) => {
  ReactMarkdownComponents2.InlineMd = ({ src, maxDepth = 10 }) => {
    const plugin = app.plugins.plugins["obsidian-react-components"];
    const { Markdown, React } = plugin;
    const { useRef, useEffect, useState } = React;
    const containerRef = useRef(null);
    const [initialized, setInitialized] = useState(false);
    useEffect(() => {
      var _a, _b, _c;
      if (!initialized) {
        if (containerRef.current) {
          const currentItemContents = (_c = (_b = (_a = containerRef.current.children[0]) == null ? void 0 : _a.children[0]) == null ? void 0 : _b.innerHTML) != null ? _c : "";
          containerRef.current.children[0].innerHTML = currentItemContents;
          setInitialized(true);
        }
      }
    }, []);
    return /* @__PURE__ */ React.createElement("span", {
      ref: containerRef
    }, /* @__PURE__ */ React.createElement(Markdown, {
      src,
      maxDepth
    }));
  };
  ReactMarkdownComponents2.Components = {
    InlineMd: ReactMarkdownComponents2.InlineMd
  };
})(ReactMarkdownComponents || (ReactMarkdownComponents = {}));

// src/main.ts
var MetadataApiPlugin = class extends import_obsidian4.Plugin {
  static get Instance() {
    return MetadataApiPlugin._instance;
  }
  get api() {
    return MetadataApiPlugin._instance;
  }
  async onload() {
    super.onload();
    await this.loadSettings();
    this.addSettingTab(new MetadataApiSettingTab(this.app, this));
    this._initApi();
  }
  onunload() {
    this._deinitApi();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DefaultSettings, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this._deinitApi();
    this._initApi();
  }
  _initApi() {
    this._verifyDependencies();
    MetadataApiPlugin._instance = new Metadata(this);
    PluginContainer.Instance = this;
    this._initGlobalMetadata();
    this._initGlobalCache();
    this._initGlobalPath();
    if (this.settings.defineObjectPropertyHelperFunctions) {
      this._initObjectPropertyHelperMethods();
    }
    if (this.settings.defineArrayHelperFunctions) {
      this._initArrayHelperMethods();
    }
  }
  _verifyDependencies() {
    if (!app.plugins.plugins.dataview || !app.plugins.plugins.metaedit) {
      const error = `Cannot initialize plugin: Metadata-Api. Dependency plugin is missing: ${!app.plugins.plugins.dataview ? "Dataview" : "Metaedit"}. (The metadata-api plugin has been automatically disabled.)`;
      app.plugins.disablePlugin("metadata-api");
      alert(error);
      throw error;
    }
  }
  _initObjectPropertyHelperMethods() {
    Object.defineProperty(Object.prototype, "hasProp", {
      value: function(path, thenDo) {
        if (thenDo) {
          return Metadata.TryToGetDeepProperty(path, thenDo, this);
        } else {
          return Metadata.ContainsDeepProperty(path, this);
        }
      },
      enumerable: false
    });
    Object.defineProperty(Object.prototype, "getProp", {
      value: function(path, defaultValue) {
        const value = Metadata.GetDeepProperty(path, this);
        if (defaultValue !== void 0 && value === void 0) {
          if (typeof defaultValue === "function") {
            return defaultValue();
          } else {
            return defaultValue;
          }
        }
        return value;
      },
      enumerable: false
    });
    Object.defineProperty(Object.prototype, "setProp", {
      value: function(propertyPath, value) {
        return Metadata.SetDeepProperty(propertyPath, value, this);
      },
      enumerable: false
    });
  }
  _initArrayHelperMethods() {
    Object.defineProperty(Array.prototype, "indexBy", {
      value: function(uniqueKeyPropertyPath) {
        const result = {};
        for (const i of this) {
          const key = i.getProp(uniqueKeyPropertyPath, void 0);
          if (key === void 0) {
            throw `Aggregation Key not found at path: ${uniqueKeyPropertyPath}.`;
          }
          if (result[key]) {
            throw `Key already exists in aggregate object, can't index another object by it: ${uniqueKeyPropertyPath}.`;
          } else {
            result[key] = i;
          }
        }
        return result;
      },
      enumerable: false
    });
    Object.defineProperty(Array.prototype, "aggregateBy", {
      value: function(key) {
        const result = {};
        for (const i of this) {
          const k = i ? i.getProp(key, "") : "";
          if (result[k]) {
            result[k].push(i);
          } else {
            result[k] = [i];
          }
        }
        return result;
      },
      enumerable: false
    });
  }
  _initGlobalMetadata() {
    const apiAndPlugin = {
      Api: this.api,
      Plugin: MetadataApiPlugin.Instance.plugin
    };
    const staticApi = app.plugins.plugins["obsidian-react-components"] ? {
      ...ReactSectionComponents,
      ...ReactMarkdownComponents,
      Components: {
        ...ReactSectionComponents.Components,
        ...ReactMarkdownComponents.Components
      },
      SectionComponents: ReactSectionComponents.Components,
      MarkdownComponents: ReactMarkdownComponents.Components,
      ...apiAndPlugin
    } : apiAndPlugin;
    try {
      Object.defineProperty(global, "Metadata", {
        get() {
          return staticApi;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, "Metadata", {
        get() {
          return staticApi;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(global, this.settings.globalMetadataApiName, {
        get() {
          return Metadata.Api;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, this.settings.globalMetadataApiName, {
        get() {
          return Metadata.Api;
        }
      });
    } catch (e) {
    }
  }
  _initGlobalCache() {
    try {
      Object.defineProperty(global, this.settings.globalCacheName, {
        get() {
          return Metadata.Api.Current.Cache;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, this.settings.globalCacheName, {
        get() {
          return Metadata.Api.Current.Cache;
        }
      });
    } catch (e) {
    }
  }
  _initGlobalPath() {
    try {
      Object.defineProperty(global, this.settings.globalPathName, {
        value: Metadata.Api.path
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, this.settings.globalPathName, {
        value: Metadata.Api.path
      });
    } catch (e) {
    }
  }
  _deinitApi() {
    this._deinitGlobalMetadata();
    this._deinitGlobalCache();
    this._deinitGlobalPath();
    this._deinitObjectPropertyHelpers();
    this._deinitArrayHelpers();
    MetadataApiPlugin._instance = void 0;
  }
  _deinitGlobalCache() {
    try {
      delete global[this.settings.globalCacheName];
    } catch (e) {
    }
    try {
      delete window[this.settings.globalCacheName];
    } catch (e) {
    }
  }
  _deinitGlobalPath() {
    try {
      delete global[this.settings.globalPathName];
    } catch (e) {
    }
    try {
      delete window[this.settings.globalPathName];
    } catch (e) {
    }
  }
  _deinitGlobalMetadata() {
    try {
      delete global["Metadata"];
    } catch (e) {
    }
    try {
      delete window["Metadata"];
    } catch (e) {
    }
    try {
      delete global[this.settings.globalMetadataApiName];
    } catch (e) {
    }
    try {
      delete window[this.settings.globalMetadataApiName];
    } catch (e) {
    }
  }
  _deinitObjectPropertyHelpers() {
    try {
      delete Object.prototype["hasProp"];
    } catch (e) {
    }
    try {
      delete Object.prototype["getProp"];
    } catch (e) {
    }
    try {
      delete Object.prototype["setProp"];
    } catch (e) {
    }
  }
  _deinitArrayHelpers() {
    try {
      delete Array.prototype["aggregateBy"];
    } catch (e) {
    }
    try {
      delete Array.prototype["indexBy"];
    } catch (e) {
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL21haW4udHMiLCAiLi4vc3JjL21ldGEudHMiLCAiLi4vc3JjL2N1cnJlbnQudHMiLCAiLi4vc3JjL2FwaS50cyIsICIuLi9zcmMvc2VjdGlvbnMudHMiLCAiLi4vc3JjL3NldHRpbmdzLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlY3Rpb25zLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9tYXJrZG93bi50c3giXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTWV0YWRhdGEgfSBmcm9tICcuL21ldGEnO1xyXG5pbXBvcnQgeyBEZWZhdWx0U2V0dGluZ3MsIE1ldGFkYXRhQXBpU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBQbHVnaW5Db250YWluZXIsIE1ldGFkYXRhQXBpLCBNZXRhZGF0YUFwaVNldHRpbmdzLCBNZXRhZGF0YVBsdWdpbiwgU3RhdGljTWV0YUFwaSB9IGZyb20gXCIuL2FwaVwiO1xyXG5pbXBvcnQgeyBSZWFjdFNlY3Rpb25Db21wb25lbnRzIH0gZnJvbSBcIi4vY29tcG9uZW50cy9zZWN0aW9uc1wiO1xyXG5pbXBvcnQgeyBSZWFjdE1hcmtkb3duQ29tcG9uZW50cyB9IGZyb20gJy4vY29tcG9uZW50cy9tYXJrZG93bic7XHJcblxyXG4vKipcclxuICogTWV0YWRhdGEgYXBpIG9ic2lkaWFuLm1kIHBsdWdpblxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWV0YWRhdGFBcGlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4gaW1wbGVtZW50cyBNZXRhZGF0YVBsdWdpbiB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBNZXRhZGF0YUFwaTtcclxuICBzZXR0aW5nczogTWV0YWRhdGFBcGlTZXR0aW5ncztcclxuICBcclxuICAvLyNyZWdpb24gQXBpIEFjY2Vzc1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgbWV0YWRhdGEgYXBpXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBJbnN0YW5jZSgpIDogTWV0YWRhdGFBcGkge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhQXBpUGx1Z2luLl9pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIGdldCBhcGkoKTogTWV0YWRhdGFBcGkge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhQXBpUGx1Z2luLl9pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gSW5pdGlhbGl6YXRpb25cclxuXHJcbiAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgc3VwZXIub25sb2FkKCk7XHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNZXRhZGF0YUFwaVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9pbml0QXBpKCk7XHJcbiAgfVxyXG5cclxuICBvbnVubG9hZCgpIHtcclxuICAgIHRoaXMuX2RlaW5pdEFwaSgpO1xyXG4gIH1cclxuICBcclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgRGVmYXVsdFNldHRpbmdzLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gIH1cclxuICBcclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgLy8gcmVzZXQgdGhlIGFwaSB3aGVuIHNldHRpbmdzIGFyZSB1cGRhdGVkLlxyXG4gICAgdGhpcy5fZGVpbml0QXBpKCk7XHJcbiAgICB0aGlzLl9pbml0QXBpKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgX2luaXRBcGkoKSB7XHJcbiAgICB0aGlzLl92ZXJpZnlEZXBlbmRlbmNpZXMoKTtcclxuICAgIE1ldGFkYXRhQXBpUGx1Z2luLl9pbnN0YW5jZSA9IG5ldyBNZXRhZGF0YSh0aGlzKTtcclxuICAgIFBsdWdpbkNvbnRhaW5lci5JbnN0YW5jZSA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5faW5pdEdsb2JhbE1ldGFkYXRhKCk7XHJcbiAgICB0aGlzLl9pbml0R2xvYmFsQ2FjaGUoKTtcclxuICAgIHRoaXMuX2luaXRHbG9iYWxQYXRoKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVmaW5lT2JqZWN0UHJvcGVydHlIZWxwZXJGdW5jdGlvbnMpIHtcclxuICAgICAgdGhpcy5faW5pdE9iamVjdFByb3BlcnR5SGVscGVyTWV0aG9kcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlZmluZUFycmF5SGVscGVyRnVuY3Rpb25zKSB7XHJcbiAgICAgIHRoaXMuX2luaXRBcnJheUhlbHBlck1ldGhvZHMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBcclxuICAgKiBpZiBvbmUgb2YgdGhlIGRlcGVuZGVuaWVzIGlzIG1pc3NpbmcsIGRpc2FibGUgdGhlIHBsdWdpbiBhbmQgd2FybiB0aGUgdXNlci5cclxuICAgKi9cclxuICBwcml2YXRlIF92ZXJpZnlEZXBlbmRlbmNpZXMoKSB7XHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhcHAucGx1Z2luIGlzIG5vdCBtYXBwZWQuXHJcbiAgICBpZiAoIWFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcgfHwgIWFwcC5wbHVnaW5zLnBsdWdpbnMubWV0YWVkaXQpIHtcclxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYXBwLnBsdWdpbiBpcyBub3QgbWFwcGVkLlxyXG4gICAgICBjb25zdCBlcnJvciA9IGBDYW5ub3QgaW5pdGlhbGl6ZSBwbHVnaW46IE1ldGFkYXRhLUFwaS4gRGVwZW5kZW5jeSBwbHVnaW4gaXMgbWlzc2luZzogJHshYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldyA/IFwiRGF0YXZpZXdcIiA6IFwiTWV0YWVkaXRcIn0uIChUaGUgbWV0YWRhdGEtYXBpIHBsdWdpbiBoYXMgYmVlbiBhdXRvbWF0aWNhbGx5IGRpc2FibGVkLilgO1xyXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhcHAucGx1Z2luIGlzIG5vdCBtYXBwZWQuXHJcbiAgICAgIGFwcC5wbHVnaW5zLmRpc2FibGVQbHVnaW4oXCJtZXRhZGF0YS1hcGlcIik7XHJcbiAgICAgIGFsZXJ0KGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyNyZWdpb24gT2JqZWN0IHByb3BlcnR5IGFuZCBHbG9iYWwgZGVmZW5pdGlvbnMuXHJcblxyXG4gIHByaXZhdGUgX2luaXRPYmplY3RQcm9wZXJ0eUhlbHBlck1ldGhvZHMoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEZpbmQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdCwgcmV0dXJuaW5nIHRydWUgb24gc3VjY2Vzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAgICogQHBhcmFtIHt7b25UcnVlOmZ1bmN0aW9uKG9iamVjdCksIG9uRmFsc2U6ZnVuY3Rpb24oKX18ZnVuY3Rpb24ob2JqZWN0KXxbZnVuY3Rpb24ob2JqZWN0KSwgZnVuY3Rpb24oKV19IHRoZW5EbyAoT3B0aW9uYWwpIEEoc2V0IG9mKSBjYWxsYmFjayhzKSB0aGF0IHRha2VzIHRoZSBmb3VuZCB2YWx1ZSBhcyBhIHBhcmFtZXRlci4gRGVmYXVsdHMgdG8ganVzdCB0aGUgb25UcnVlIG1ldGhvZCBpZiBhIHNpbmdsZSBmdW5jdGlvbiBpcyBwYXNzZWQgaW4gb24gaXQncyBvd24uXHJcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMsIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsICdoYXNQcm9wJywge1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKHBhdGg6IHN0cmluZ3xBcnJheTxzdHJpbmc+LCB0aGVuRG86IGFueSkge1xyXG4gICAgICAgIGlmICh0aGVuRG8pIHtcclxuICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5UcnlUb0dldERlZXBQcm9wZXJ0eShwYXRoLCB0aGVuRG8sIHRoaXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQ29udGFpbnNEZWVwUHJvcGVydHkocGF0aCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBkZWVwIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0LCBvciByZXR1cm4gbnVsbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSBmb3VuZCBkZWVwIHByb3BlcnR5LCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgJ2dldFByb3AnLCB7XHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAocGF0aDogc3RyaW5nfEFycmF5PHN0cmluZz4sIGRlZmF1bHRWYWx1ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBNZXRhZGF0YS5HZXREZWVwUHJvcGVydHkocGF0aCwgdGhpcyk7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdCwgZXZlbiBpZiBpdCBkb2Vzbid0IGV4aXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9uKG9iamVjdCl9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQsIG9yIGEgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm4gaXQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGZvdW5kIGRlZXAgcHJvcGVydHksIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQuXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCAnc2V0UHJvcCcsIHtcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wZXJ0eVBhdGg6IHN0cmluZ3xBcnJheTxzdHJpbmc+LCB2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhLlNldERlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGgsIHZhbHVlLCB0aGlzKTtcclxuICAgICAgfSxcclxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfaW5pdEFycmF5SGVscGVyTWV0aG9kcygpIHtcclxuICAgIC8qKlxyXG4gICAgICogaW5kZXggYW4gYXJyYXkgb2Ygb2JqZWN0cyBieSBhIHNoYXJlZCBwcm9wZXJ0eSB3aXRoIHVuaXF1ZSB2YWx1ZXMgYW1vbmcgdGhlXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bmlxdWVLZXlQcm9wZXJ0eVBhdGggVGhlIHBhdGggdG8gdGhlIHVuaXF1ZSBrZXkgb24gZWFjaCBvYmplY3QgdG8gdXNlIGFzIHRoZSBpbmRleCBvZiB0aGUgb2JqZWN0IGluIHRoZSByZXR1cm5lZCByZWNvcmQuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIEFuIGFnZ3JlZ2F0ZSBvYmplY3Qgd2l0aCB0aGUgb3JpZ2luYWwgb2JqZWN0cyBmcm9tIHRoZSBpbnB1dCBsaXN0IGluZGV4ZWQgYnkgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSBhdCB0aGUgcHJvdmlkZWQga2V5IHBhdGguXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdpbmRleEJ5Jywge1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKHVuaXF1ZUtleVByb3BlcnR5UGF0aDogc3RyaW5nKTogUmVjb3JkPGFueSwgYW55PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBSZWNvcmQ8YW55LCBhbnk+ID0ge307XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgaSBvZiB0aGlzKSB7XHJcbiAgICAgICAgICBjb25zdCBrZXkgPSBpLmdldFByb3AodW5pcXVlS2V5UHJvcGVydHlQYXRoLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IGBBZ2dyZWdhdGlvbiBLZXkgbm90IGZvdW5kIGF0IHBhdGg6ICR7dW5pcXVlS2V5UHJvcGVydHlQYXRofS5gO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAocmVzdWx0W2tleV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgYEtleSBhbHJlYWR5IGV4aXN0cyBpbiBhZ2dyZWdhdGUgb2JqZWN0LCBjYW4ndCBpbmRleCBhbm90aGVyIG9iamVjdCBieSBpdDogJHt1bmlxdWVLZXlQcm9wZXJ0eVBhdGh9LmA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZ2dyZWdhdGUgYW4gYXJyYXkgb2Ygb2JqZWN0cyBieSBhIHZhbHVlXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSB0byBhZ2dlZ2F0ZSBieS4gVGhpcyB1c2VzIGdldFByb3Agc28geW91IGNhbiBwYXNzIGluIGEgY29tcG91bmQga2V5XHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCB3aXRoIGFycmF5cyBpbmRleGVkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgYXQgdGhlIGtleSB3aXRoaW4gdGhlIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2FnZ3JlZ2F0ZUJ5Jywge1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGtleTogc3RyaW5nKTogUmVjb3JkPGFueSwgYW55W10+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxhbnksIGFueVtdPiA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcykge1xyXG4gICAgICAgICAgY29uc3QgayA9IGlcclxuICAgICAgICAgICAgPyBpLmdldFByb3Aoa2V5LCBcIlwiKVxyXG4gICAgICAgICAgICA6IFwiXCI7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChyZXN1bHRba10pIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tdLnB1c2goaSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRba10gPSBbaV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9pbml0R2xvYmFsTWV0YWRhdGEoKSB7XHJcbiAgICBjb25zdCBhcGlBbmRQbHVnaW4gPSB7XHJcbiAgICAgIEFwaTogdGhpcy5hcGksXHJcbiAgICAgIFBsdWdpbjogTWV0YWRhdGFBcGlQbHVnaW4uSW5zdGFuY2UucGx1Z2luXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc3RhdGljQXBpOiBTdGF0aWNNZXRhQXBpXHJcbiAgICAgIC8vIGlmIHdlIGhhdmUgcmVhY3QsIHdlIHdhbnQgdG8gYWRkIHRoZSBjb21wb25lbnRzIHRvIHRoZSBhcGkuXHJcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFwcC5wbHVnaW4gaXMgbm90IG1hcHBlZC5cclxuICAgICAgPSBhcHAucGx1Z2lucy5wbHVnaW5zW1wib2JzaWRpYW4tcmVhY3QtY29tcG9uZW50c1wiXVxyXG4gICAgICAgID8ge1xyXG4gICAgICAgICAgLi4uUmVhY3RTZWN0aW9uQ29tcG9uZW50cyxcclxuICAgICAgICAgIC4uLlJlYWN0TWFya2Rvd25Db21wb25lbnRzLFxyXG4gICAgICAgICAgQ29tcG9uZW50czoge1xyXG4gICAgICAgICAgICAuLi5SZWFjdFNlY3Rpb25Db21wb25lbnRzLkNvbXBvbmVudHMsXHJcbiAgICAgICAgICAgIC4uLlJlYWN0TWFya2Rvd25Db21wb25lbnRzLkNvbXBvbmVudHNcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBTZWN0aW9uQ29tcG9uZW50czogUmVhY3RTZWN0aW9uQ29tcG9uZW50cy5Db21wb25lbnRzLFxyXG4gICAgICAgICAgTWFya2Rvd25Db21wb25lbnRzOiBSZWFjdE1hcmtkb3duQ29tcG9uZW50cy5Db21wb25lbnRzLFxyXG4gICAgICAgICAgLi4uYXBpQW5kUGx1Z2luXHJcbiAgICAgICAgfSA6IGFwaUFuZFBsdWdpbjtcclxuICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHbG9iYWwgYWNjZXNzIHRvIHRoZSBtZXRhZGF0YSBvbiBkZXNrdG9wLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsIFwiTWV0YWRhdGFcIiwge1xyXG4gICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGljQXBpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIHsgfVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIG1ldGFkYXRhIG9uIG1vYmlsZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBcIk1ldGFkYXRhXCIsIHtcclxuICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRpY0FwaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCB7IH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIG1ldGFkYXRhIG9uIGRlc2t0b3AuXHJcbiAgICAgICAqL1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCB0aGlzLnNldHRpbmdzLmdsb2JhbE1ldGFkYXRhQXBpTmFtZSwge1xyXG4gICAgICAgIGdldCgpIHtcclxuICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5BcGk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2xvYmFsIGFjY2VzcyB0byB0aGUgbWV0YWRhdGEgb24gbW9iaWxlLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgdGhpcy5zZXR0aW5ncy5nbG9iYWxNZXRhZGF0YUFwaU5hbWUsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQXBpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfaW5pdEdsb2JhbENhY2hlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIGNhY2hlIG9uIGRlc2t0b3AuXHJcbiAgICAgICAqL1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCB0aGlzLnNldHRpbmdzLmdsb2JhbENhY2hlTmFtZSwge1xyXG4gICAgICAgIGdldCgpIHtcclxuICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5BcGkuQ3VycmVudC5DYWNoZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2xvYmFsIGFjY2VzcyB0byB0aGUgY2FjaGUgb24gbW9iaWxlLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgdGhpcy5zZXR0aW5ncy5nbG9iYWxDYWNoZU5hbWUsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQXBpLkN1cnJlbnQuQ2FjaGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9pbml0R2xvYmFsUGF0aCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHbG9iYWwgYWNjZXNzIHRvIHRoZSBjYWNoZSBvbiBkZXNrdG9wLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgdGhpcy5zZXR0aW5ncy5nbG9iYWxQYXRoTmFtZSwge1xyXG4gICAgICAgIHZhbHVlOiBNZXRhZGF0YS5BcGkucGF0aFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIGNhY2hlIG9uIG1vYmlsZS5cclxuICAgICAgICovXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIHRoaXMuc2V0dGluZ3MuZ2xvYmFsUGF0aE5hbWUsIHtcclxuICAgICAgICB2YWx1ZTogTWV0YWRhdGEuQXBpLnBhdGhcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gRGUtSW5pdGlhbGl6YXRpb25cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0QXBpKCkge1xyXG4gICAgdGhpcy5fZGVpbml0R2xvYmFsTWV0YWRhdGEoKTtcclxuICAgIHRoaXMuX2RlaW5pdEdsb2JhbENhY2hlKCk7XHJcbiAgICB0aGlzLl9kZWluaXRHbG9iYWxQYXRoKCk7XHJcbiAgICB0aGlzLl9kZWluaXRPYmplY3RQcm9wZXJ0eUhlbHBlcnMoKTtcclxuICAgIHRoaXMuX2RlaW5pdEFycmF5SGVscGVycygpO1xyXG4gICAgXHJcbiAgICBNZXRhZGF0YUFwaVBsdWdpbi5faW5zdGFuY2UgPSB1bmRlZmluZWQhO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0R2xvYmFsQ2FjaGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIGdsb2JhbFt0aGlzLnNldHRpbmdzLmdsb2JhbENhY2hlTmFtZV07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQHRzLWlnbm9yZTogR2xvYmFsIFNjb3BlXHJcbiAgICAgIGRlbGV0ZSB3aW5kb3dbdGhpcy5zZXR0aW5ncy5nbG9iYWxDYWNoZU5hbWVdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2RlaW5pdEdsb2JhbFBhdGgoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIGdsb2JhbFt0aGlzLnNldHRpbmdzLmdsb2JhbFBhdGhOYW1lXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIHdpbmRvd1t0aGlzLnNldHRpbmdzLmdsb2JhbFBhdGhOYW1lXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0R2xvYmFsTWV0YWRhdGEoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIGdsb2JhbFtcIk1ldGFkYXRhXCJdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IEdsb2JhbCBTY29wZVxyXG4gICAgICBkZWxldGUgd2luZG93W1wiTWV0YWRhdGFcIl07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQHRzLWlnbm9yZTogR2xvYmFsIFNjb3BlXHJcbiAgICAgIGRlbGV0ZSBnbG9iYWxbdGhpcy5zZXR0aW5ncy5nbG9iYWxNZXRhZGF0YUFwaU5hbWVdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IEdsb2JhbCBTY29wZVxyXG4gICAgICBkZWxldGUgd2luZG93W3RoaXMuc2V0dGluZ3MuZ2xvYmFsTWV0YWRhdGFBcGlOYW1lXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kZWluaXRPYmplY3RQcm9wZXJ0eUhlbHBlcnMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIE9iamVjdC5wcm90b3R5cGVbXCJoYXNQcm9wXCJdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IEdsb2JhbCBTY29wZVxyXG4gICAgICBkZWxldGUgT2JqZWN0LnByb3RvdHlwZVtcImdldFByb3BcIl07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQHRzLWlnbm9yZTogR2xvYmFsIFNjb3BlXHJcbiAgICAgIGRlbGV0ZSBPYmplY3QucHJvdG90eXBlW1wic2V0UHJvcFwiXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kZWluaXRBcnJheUhlbHBlcnMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBAdHMtaWdub3JlOiBHbG9iYWwgU2NvcGVcclxuICAgICAgZGVsZXRlIEFycmF5LnByb3RvdHlwZVtcImFnZ3JlZ2F0ZUJ5XCJdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IEdsb2JhbCBTY29wZVxyXG4gICAgICBkZWxldGUgQXJyYXkucHJvdG90eXBlW1wiaW5kZXhCeVwiXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQ3VycmVudE1ldGFkYXRhIH0gZnJvbSBcIi4vY3VycmVudFwiO1xyXG5pbXBvcnQgeyBOb3RlU2VjdGlvbnMgfSBmcm9tICcuL3NlY3Rpb25zJztcclxuaW1wb3J0IHsgUGx1Z2luQ29udGFpbmVyLCBDYWNoZWRGaWxlTWV0YWRhdGEsIEN1cnJlbnRBcGksIER2RGF0YSwgRmlsZVNvdXJjZSwgRnJvbnRtYXR0ZXIsIE1ldGFEYXRhLCBNZXRhZGF0YUFwaSwgTWV0YWRhdGFQbHVnaW4sIE1ldGFkYXRhU291cmNlcywgU2VjdGlvbnMsIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbiwgRmlsZUl0ZW0sIFVwZGF0ZU9wdGlvbnMgfSBmcm9tICcuL2FwaSc7XHJcbi8vVE9ETzogdGVzdDogaW1wb3J0IGR2ID0gcmVxdWlyZShcIi4uLy4uL2RhdGF2aWV3L21haW4uanNcIik7XHJcblxyXG4vKipcclxuICogQWNjZXNzIGFuZCBlZGl0IG1ldGFkYXRhIGFib3V0IGEgZmlsZSBmcm9tIG11bHRpcGxlIHNvdXJjZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWV0YWRhdGEgaW1wbGVtZW50cyBNZXRhZGF0YUFwaSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgX2NhY2hlczogYW55ID0ge307XHJcbiAgcHJpdmF0ZSBfcGx1Z2luOiBNZXRhZGF0YVBsdWdpbjtcclxuICBwcml2YXRlIF9rZWJhYlByb3BTcGxheWVyOiAoYmFzZTogYW55LCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZTogQXJyYXk8c3RyaW5nPiB8IG51bGwpID0+IG9iamVjdDtcclxuICBwcml2YXRlIF9sb3dlckNhc2VTcGxheWVyOiAoYmFzZTogYW55KSA9PiBvYmplY3Q7XHJcblxyXG4gIC8vI3JlZ2lvbiBJbml0YWxpemF0aW9uXHJcbiAgXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBNZXRhZGF0YVBsdWdpbikge1xyXG4gICAgdGhpcy5fcGx1Z2luID0gcGx1Z2luO1xyXG4gICAgdGhpcy5faW5pdGlhbGl6ZUtlYmFiUHJvcFNwbGF5ZXIoKTtcclxuICAgIHRoaXMuX2luaXRpYWxpemVQcm9wTG93ZXJjYXNlU3BsYXllcigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUtlYmFiUHJvcFNwbGF5ZXIoKSB7XHJcbiAgICB0aGlzLl9rZWJhYlByb3BTcGxheWVyID0gKCgpID0+IHtcclxuICAgICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGxheUtlYmFiQ2FzZVByb3BlcnRpZXMpIHtcclxuICAgICAgICBjYXNlIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5Mb3dlcmNhc2U6XHJcbiAgICAgICAgICByZXR1cm4gKGJhc2UsIHRvcExldmVsUHJvcGVydGllc1RvSWdub3JlKSA9PiBNZXRhZGF0YS5fcmVjdXJzZU9uQWxsT2JqZWN0UHJvcGVydGllcyhiYXNlLCBNZXRhZGF0YS5fc3BsYXlLZWJhYlRvTG93ZXJjYXNlLCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZSk7XHJcbiAgICAgICAgY2FzZSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uQ2FtZWxDYXNlOlxyXG4gICAgICAgICAgcmV0dXJuIChiYXNlLCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZSkgPT4gTWV0YWRhdGEuX3JlY3Vyc2VPbkFsbE9iamVjdFByb3BlcnRpZXMoYmFzZSwgTWV0YWRhdGEuX3NwbGF5S2ViYWJUb0xvd2VyQ2FtZWxjYXNlLCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZSk7XHJcbiAgICAgICAgY2FzZSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uTG93ZXJBbmRDYW1lbENhc2U6XHJcbiAgICAgICAgICByZXR1cm4gKGJhc2UsIHRvcExldmVsUHJvcGVydGllc1RvSWdub3JlKSA9PiBNZXRhZGF0YS5fcmVjdXJzZU9uQWxsT2JqZWN0UHJvcGVydGllcyhiYXNlLCBNZXRhZGF0YS5fc3BsYXlLZWJhYlRvTG93ZXJBbmRMb3dlckNhbWVsY2FzZSwgdG9wTGV2ZWxQcm9wZXJ0aWVzVG9JZ25vcmUpO1xyXG4gICAgICAgIGNhc2UgU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uLkRpc2FibGVkOlxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICByZXR1cm4gYmFzZSA9PiBiYXNlO1xyXG4gICAgICB9XHJcbiAgICB9KSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZVByb3BMb3dlcmNhc2VTcGxheWVyKCkge1xyXG4gICAgdGhpcy5fbG93ZXJDYXNlU3BsYXllciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXdcclxuICAgICAgPyBiYXNlID0+IE1ldGFkYXRhLl9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKGJhc2UsIE1ldGFkYXRhLl9zcGxheVRvTG93ZXJDYXNlKVxyXG4gICAgICA6IGJhc2UgPT4gYmFzZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIF9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKHZhbHVlOiBhbnksIGZuOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGRhdGE6IGFueSB8IG9iamVjdCkgPT4gYW55IHwgb2JqZWN0LCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZTogQXJyYXk8c3RyaW5nPiB8IG51bGwgPSBudWxsKTogYW55IHtcclxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChpID0+IHRoaXMuX3JlY3Vyc2VPbkFsbE9iamVjdFByb3BlcnRpZXMoaSwgZm4pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBkYXRhOiBhbnkgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWx1ZSkpIHtcclxuICAgICAgICAgIGlmICh0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZSAmJiB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZS5jb250YWlucyhrZXkpKSB7XHJcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IHZhbHVlW2tleV07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmbihrZXksIHRoaXMuX3JlY3Vyc2VPbkFsbE9iamVjdFByb3BlcnRpZXModmFsdWVba2V5XSwgZm4pLCBkYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBfc3BsYXlLZWJhYlRvTG93ZXJjYXNlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBkYXRhOiBhbnkgfCBvYmplY3QpOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgaWYgKGtleS5pbmNsdWRlcyhcIi1cIikpIHtcclxuICAgICAgZGF0YVtrZXkucmVwbGFjZSgvLS9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGFba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgX3NwbGF5S2ViYWJUb0xvd2VyQ2FtZWxjYXNlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBkYXRhOiBhbnkgfCBvYmplY3QpOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgaWYgKGtleS5pbmNsdWRlcyhcIi1cIikpIHtcclxuICAgICAgZGF0YVtrZXlcclxuICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgLm1hcCgocGFydCwgaSkgPT4gKGkgIT09IDAgJiYgcGFydCkgPyBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiBwYXJ0KVxyXG4gICAgICAgIC5qb2luKCcnKV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIF9zcGxheUtlYmFiVG9Mb3dlckFuZExvd2VyQ2FtZWxjYXNlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBkYXRhOiBhbnkgfCBvYmplY3QpOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgaWYgKGtleS5pbmNsdWRlcyhcIi1cIikpIHtcclxuICAgICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgZGF0YVtsb3dlcktleS5yZXBsYWNlKC8tL2csIFwiXCIpXSA9IHZhbHVlO1xyXG4gICAgICBkYXRhW2xvd2VyS2V5XHJcbiAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAubWFwKChwYXJ0LCBpKSA9PiAoaSAhPT0gMCAmJiBwYXJ0KSA/IHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnN1YnN0cmluZygxKSA6IHBhcnQpXHJcbiAgICAgICAgLmpvaW4oJycpXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGFba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgX3NwbGF5VG9Mb3dlckNhc2Uoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGRhdGE6IGFueSB8IG9iamVjdCk6IGFueSB8IG9iamVjdCB7XHJcbiAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuICAgIGRhdGFba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuICBcclxuICAvLyNyZWdpb24gU3RhdGljIEFwaSBBY2Nlc3NcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGluc3RhbmNlIG9mIHRoZSBNZXRhZGF0YSBjbGFzc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgQXBpKCk6IE1ldGFkYXRhQXBpIHtcclxuICAgIHJldHVybiBQbHVnaW5Db250YWluZXIuSW5zdGFuY2UuYXBpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWNjZXNzIHRvIHRoZSBEYXRhdmlldyBBcGlcclxuICAgKiAoUmVhZCBhY2Nlc3MgYW5kIERhdGEgZGlzcGxheSlcclxuICAgKiAvLyBUT0RPOiBjYW4gd2Ugc2V0IHRoZXNlIHRvIHRoZWlyIHNwZWNpZmljIHR5cGVzP1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgRGF0YXZpZXdBcGkoKTogYW55IHtcclxuICAgIHJldHVybiAoYXBwIGFzIGFueSlcclxuICAgICAgLnBsdWdpbnNcclxuICAgICAgLnBsdWdpbnNcclxuICAgICAgLmRhdGF2aWV3XHJcbiAgICAgIC5hcGk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBY2Nlc3MgdG8gdGhlIE1ldGFlZGl0IEFwaVxyXG4gICAqIChXcml0ZSBhY2Nlc3MpXHJcbiAgICogLy8gVE9ETzogY2FuIHdlIHNldCB0aGVzZSB0byB0aGVpciBzcGVjaWZpYyB0eXBlcz9cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IE1ldGFlZGl0QXBpKCk6IGFueSB7XHJcbiAgICByZXR1cm4gKGFwcCBhcyBhbnkpXHJcbiAgICAgIC5wbHVnaW5zXHJcbiAgICAgIC5wbHVnaW5zXHJcbiAgICAgIC5tZXRhZWRpdFxyXG4gICAgICAuYXBpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGRlZmF1bHQgc291cmNlcyB0byBwdWxsIE1ldGFkYXRhIHZhbHVlcyBmcm9tIGZvciBhIGZpbGUuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBEZWZhdWx0U291cmNlcygpOiBNZXRhZGF0YVNvdXJjZXMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRoZSAnZmlsZScgZmllbGQgY29udGFpbmluZyBtZXRhZGF0YSBhYm91dCB0aGUgZmlsZSBpdHNlbGZcclxuICAgICAgICovXHJcbiAgICAgIEZpbGVJbmZvOiB0cnVlLFxyXG4gICAgICAvKipcclxuICAgICAgICogVGhlIEZyb250bWF0dGVyIChZQU1MIGF0IHRoZSB0b3Agb2YgYSBub3RlKVxyXG4gICAgICAgKi9cclxuICAgICAgRnJvbnRtYXR0ZXI6IHRydWUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBJbmxpbmUgRGF0YXZpZXcgZGF0YSBmaWVsZHNcclxuICAgICAgICovXHJcbiAgICAgIERhdGF2aWV3SW5saW5lOiB0cnVlLFxyXG4gICAgICAvKipcclxuICAgICAgICogQ2FjaGVkIHZhbHVlcyBmcm9tIHRoZSBNZXRhZGF0YS5DYWNoZSBpbiBhIHNpbmdsZSBmaWVsZCBuYW1lZCAnY2FjaGUnLlxyXG4gICAgICAgKi9cclxuICAgICAgQ2FjaGU6IHRydWUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZWN0aW9ucyBmcm9tIHRoZSBNZXRhZGF0YSBDYWNoZVxyXG4gICAgICAgKi9cclxuICAgICAgU2VjdGlvbnM6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgUGx1Z2luKCk6IE1ldGFkYXRhUGx1Z2luIHtcclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFwcC5wbHVnaW4gaXMgbm90IG1hcHBlZC5cclxuICAgIHJldHVybiB0aGlzLl9wbHVnaW4gPz89IGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1hcGlcIl07XHJcbiAgfVxyXG5cclxuICBnZXQgcGx1Z2luKCk6IE1ldGFkYXRhUGx1Z2luIHtcclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFwcC5wbHVnaW4gaXMgbm90IG1hcHBlZC5cclxuICAgIHJldHVybiB0aGlzLl9wbHVnaW4gPz89IGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1hcGlcIl07XHJcbiAgfVxyXG4gIFxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gQ3VycmVudCBGaWxlIFByb3BlcnRpZXNcclxuXHJcbiAgZ2V0IEN1cnJlbnQoKTogQ3VycmVudEFwaSB7XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGN1cnJlbnQoKTogQ3VycmVudEFwaSB7XHJcbiAgICByZXR1cm4gbmV3IEN1cnJlbnRNZXRhZGF0YSh0aGlzKTtcclxuICB9XHJcblxyXG4gIGdldCBEYXRhKCk6IE1ldGFEYXRhIHtcclxuICAgIHJldHVybiB0aGlzLkN1cnJlbnQuRGF0YTtcclxuICB9XHJcblxyXG4gIGdldCBkYXRhKCk6IE1ldGFEYXRhIHtcclxuICAgIHJldHVybiB0aGlzLkN1cnJlbnQuRGF0YTtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG4gICBcclxuICAvLyNyZWdpb24gTWV0YWRhdGEgRmV0Y2hlcnNcclxuXHJcbiAgdmF1bHQoZmlsZTogRmlsZVNvdXJjZSA9IG51bGwpOiBURmlsZSB8IFRGb2xkZXIgfCBUQWJzdHJhY3RGaWxlIHwgbnVsbCB7XHJcbiAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRBYnN0cmFjdEZpbGUpIHtcclxuICAgICAgcmV0dXJuIGZpbGU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGF0aCA9IChNZXRhZGF0YS5QYXJzZUZpbGVQYXRoRnJvbVNvdXJjZShmaWxlKSB8fCB0aGlzLkN1cnJlbnQuUGF0aCk7XHJcbiAgICByZXR1cm4gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKVxyXG4gICAgICA/PyBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGggKyBcIi5tZFwiKTtcclxuICB9XHJcblxyXG4gIG9tZmMoZmlsZTogRmlsZVNvdXJjZSA9IG51bGwpOiBDYWNoZWRGaWxlTWV0YWRhdGEgfCBDYWNoZWRGaWxlTWV0YWRhdGFbXSB8IG51bGwge1xyXG4gICAgY29uc3QgZmlsZU9iamVjdCA9IHRoaXMudmF1bHQoZmlsZSk7XHJcblxyXG4gICAgaWYgKCEoZmlsZU9iamVjdCBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG4gICAgICBpZiAoZmlsZU9iamVjdCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICByZXR1cm4gKGZpbGVPYmplY3QgYXMgVEZvbGRlcikuY2hpbGRyZW4ubWFwKFxyXG4gICAgICAgICAgc3ViID0+IHRoaXMub21mYyhzdWIpIVxyXG4gICAgICAgICkuZmxhdCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IGBOb3RlIG9yIEZvbGRlciBOb3QgRm91bmQ6ICR7ZmlsZU9iamVjdD8ucGF0aH1gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlT2JqZWN0KSBhcyBDYWNoZWRGaWxlTWV0YWRhdGEpIHx8IG51bGw7XHJcbiAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XHJcbiAgICAgIHJlc3VsdC5wYXRoID0gZmlsZU9iamVjdC5wYXRoO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZnJvbnRtYXR0ZXIoZmlsZTogRmlsZVNvdXJjZSA9IG51bGwpOiBGcm9udG1hdHRlciB8IEZyb250bWF0dGVyW10gfCBudWxsIHtcclxuICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMub21mYyhmaWxlKTtcclxuXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmaWxlQ2FjaGUpKSB7XHJcbiAgICAgIHJldHVybiBmaWxlQ2FjaGUubWFwKGYgPT4gdGhpcy5mcm9udG1hdHRlcihmLnBhdGgpIGFzIEZyb250bWF0dGVyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAoZmlsZUNhY2hlICYmIGZpbGVDYWNoZS5mcm9udG1hdHRlcilcclxuICAgICAgICA/IHRoaXMuX2xvd2VyQ2FzZVNwbGF5ZXIodGhpcy5fa2ViYWJQcm9wU3BsYXllcihmaWxlQ2FjaGU/LmZyb250bWF0dGVyLCBudWxsKSlcclxuICAgICAgICA6IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWN0aW9ucyhmaWxlOiBGaWxlU291cmNlID0gbnVsbCk6IFNlY3Rpb25zIHwgU2VjdGlvbnNbXSB8IG51bGwge1xyXG4gICAgY29uc3QgZmlsZUNhY2hlID0gdGhpcy5vbWZjKGZpbGUpO1xyXG5cclxuICAgIGlmIChBcnJheS5pc0FycmF5KGZpbGVDYWNoZSkpIHtcclxuICAgICAgcmV0dXJuIGZpbGVDYWNoZS5tYXAoZiA9PiB0aGlzLnNlY3Rpb25zKGYucGF0aCkgYXMgU2VjdGlvbnMpO1xyXG4gICAgfSBlbHNlIGlmICghZmlsZUNhY2hlKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBOb3RlU2VjdGlvbnMoZmlsZUNhY2hlPy5wYXRoLCBmaWxlQ2FjaGU/LmhlYWRpbmdzKSBhcyBTZWN0aW9ucztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGR2KGZpbGU6IEZpbGVTb3VyY2UgPSBudWxsKTogRHZEYXRhIHwgRHZEYXRhW10gfCBudWxsIHtcclxuICAgIGNvbnN0IHBhdGhzID0gTWV0YWRhdGFcclxuICAgICAgLkRhdGF2aWV3QXBpXHJcbiAgICAgIC5wYWdlUGF0aHMoZmlsZSA/IE1ldGFkYXRhLlBhcnNlRmlsZVBhdGhGcm9tU291cmNlKGZpbGUpIDogdGhpcy5DdXJyZW50LlBhdGgpO1xyXG5cclxuICAgIGlmIChwYXRocy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHJldHVybiBwYXRocy5tYXAoKHA6IHN0cmluZykgPT4gdGhpcy5kdihwKSk7XHJcbiAgICB9IGVsc2UgaWYgKCFwYXRocy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBNZXRhZGF0YVxyXG4gICAgICAgIC5EYXRhdmlld0FwaVxyXG4gICAgICAgIC5wYWdlKHBhdGhzWzBdKTtcclxuICAgIFxyXG4gICAgICByZXR1cm4gdGhpcy5fa2ViYWJQcm9wU3BsYXllcihyZXN1bHQsIFtcImZpbGVcIl0pIGFzIER2RGF0YTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhY2hlKGZpbGU6IEZpbGVTb3VyY2UgPSBudWxsKTogQ2FjaGUgfCBDYWNoZVtdIHtcclxuICAgIGNvbnN0IGZpbGVPYmplY3QgPSB0aGlzLnZhdWx0KGZpbGUpO1xyXG4gICAgaWYgKGZpbGVPYmplY3QgPT09IG51bGwpIHtcclxuICAgICAgY29uc3Qga2V5ID0gTWV0YWRhdGEuUGFyc2VGaWxlUGF0aEZyb21Tb3VyY2UoZmlsZSk7XHJcbiAgICAgIGlmIChrZXkgIT09IG51bGwgJiYga2V5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBNZXRhZGF0YS5fY2FjaGVzW2tleV0gPSBNZXRhZGF0YS5fY2FjaGVzW2tleV0gfHwge307XHJcblxyXG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5fY2FjaGVzW2tleV07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRocm93IFwiSW52YWxpZCBLZXkgZm9yIEZpbGVcIjtcclxuICAgIH0gZWxzZSBpZiAoZmlsZU9iamVjdCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgcmV0dXJuIGZpbGVPYmplY3QuY2hpbGRyZW4ubWFwKGYgPT4gdGhpcy5jYWNoZShmKSBhcyAoQ2FjaGUgfCBDYWNoZVtdKSkuZmxhdCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgTWV0YWRhdGEuX2NhY2hlc1tmaWxlT2JqZWN0LnBhdGhdID0gTWV0YWRhdGEuX2NhY2hlc1tmaWxlT2JqZWN0LnBhdGhdIHx8IHt9O1xyXG5cclxuICAgICAgcmV0dXJuIE1ldGFkYXRhLl9jYWNoZXNbZmlsZU9iamVjdC5wYXRoXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RvdHlwZXMocHJvdG90eXBlUGF0aDogc3RyaW5nKTogRnJvbnRtYXR0ZXIgfCBGcm9udG1hdHRlcltdIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9udG1hdHRlcihNZXRhZGF0YS5CdWlsZFByb3RvdHlwZUZpbGVGdWxsUGF0aChwcm90b3R5cGVQYXRoKSk7XHJcbiAgfVxyXG5cclxuICB2YWx1ZXMoZGF0YVBhdGg6IHN0cmluZyk6IEZyb250bWF0dGVyIHwgRnJvbnRtYXR0ZXJbXSB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuZnJvbnRtYXR0ZXIoTWV0YWRhdGEuQnVpbGREYXRhRmlsZUZ1bGxQYXRoKGRhdGFQYXRoKSk7XHJcbiAgfVxyXG5cclxuICBnZXQoZmlsZTogRmlsZVNvdXJjZSA9IG51bGwsIHNvdXJjZXM6IE1ldGFkYXRhU291cmNlcyB8IGJvb2xlYW4gPSBNZXRhZGF0YS5EZWZhdWx0U291cmNlcyk6IE1ldGFEYXRhIHwgTWV0YURhdGFbXSB8IG51bGwge1xyXG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgIHJldHVybiBmaWxlLmNoaWxkcmVuLm1hcChjID0+IHRoaXMuZ2V0KGMsIHNvdXJjZXMpKS5mbGF0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlXHJcbiAgICAgID8gKE1ldGFkYXRhLlBhcnNlRmlsZVBhdGhGcm9tU291cmNlKGZpbGUpXHJcbiAgICAgICAgPz8gdGhpcy5jdXJyZW50LnBhdGgpXHJcbiAgICAgIDogdGhpcy5DdXJyZW50LlBhdGg7XHJcblxyXG4gICAgaWYgKGZpbGVOYW1lPy5lbmRzV2l0aChcIi9cIikpIHtcclxuICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZygwLCAtMSk7XHJcbiAgICAgIGNvbnN0IGZpbGVPYmplY3QgPSB0aGlzLnZhdWx0KGZvbGRlck5hbWUpO1xyXG5cclxuICAgICAgaWYgKGZpbGVPYmplY3QgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGVPYmplY3QuY2hpbGRyZW4ubWFwKGMgPT4gdGhpcy5nZXQoYywgc291cmNlcykpLmZsYXQoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBcIkV4cGVjdGVkIGZvbGRlciBiZWNhdXNlIG9mIHRyYWlsaW5nIHNsYXNoKC8pOiAnXCIgKyBmaWxlTmFtZSArIFwiJy5cIjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZmlsZU9iamVjdCA9IHRoaXMudmF1bHQoZmlsZU5hbWUpO1xyXG5cclxuICAgICAgaWYgKGZpbGVPYmplY3QgaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGVPYmplY3QuY2hpbGRyZW4ubWFwKGMgPT4gdGhpcy5nZXQoYywgc291cmNlcykpLmZsYXQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCB2YWx1ZXM6IGFueSA9IHt9O1xyXG5cclxuICAgIGlmIChzb3VyY2VzID09PSB0cnVlKSB7XHJcbiAgICAgIHZhbHVlcyA9IHRoaXMuX2tlYmFiUHJvcFNwbGF5ZXIoTWV0YWRhdGFcclxuICAgICAgICAuRGF0YXZpZXdBcGlcclxuICAgICAgICAucGFnZShmaWxlTmFtZSksIFtcImZpbGVcIl0pIHx8IHt9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHNvdXJjZXMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBpZiB3ZSBuZWVkIGR2IHNvdXJjZXNcclxuICAgICAgaWYgKHNvdXJjZXMuRGF0YXZpZXdJbmxpbmUgfHwgc291cmNlcy5GaWxlSW5mbykge1xyXG4gICAgICAgIHZhbHVlcyA9IHRoaXMuX2tlYmFiUHJvcFNwbGF5ZXIoTWV0YWRhdGFcclxuICAgICAgICAgIC5EYXRhdmlld0FwaVxyXG4gICAgICAgICAgLnBhZ2UoZmlsZU5hbWUpLCBbXCJmaWxlXCJdKSB8fCB7fTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIGZpbGUgbWV0YWRhdGE/XHJcbiAgICAgICAgaWYgKCFzb3VyY2VzLkZpbGVJbmZvKSB7XHJcbiAgICAgICAgICBkZWxldGUgdmFsdWVzLmZpbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHVlc1tcIkZpbGVcIl0gPSB2YWx1ZXMuZmlsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBkdiBpbmxpbmU/XHJcbiAgICAgICAgbGV0IGZyb250bWF0dGVyOiBGcm9udG1hdHRlciA9IG51bGwhO1xyXG4gICAgICAgIGlmICghc291cmNlcy5EYXRhdmlld0lubGluZSkge1xyXG4gICAgICAgICAgZnJvbnRtYXR0ZXIgPSB0aGlzLmZyb250bWF0dGVyKGZpbGVOYW1lKSBhcyBGcm9udG1hdHRlcjtcclxuICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlcykuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgICAgICAgLy8gaWYgaXQncyBub3QgYSBmcm9udG1hdHRlciBwcm9wIG9yIHRoZSAnZmlsZScgbWV0YWRhdGEgcHJvcFxyXG4gICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyLmhhc093blByb3BlcnR5KHByb3ApICYmIHByb3AgIT0gXCJmaWxlXCIpIHtcclxuICAgICAgICAgICAgICBkZWxldGUgdmFsdWVzW3Byb3BdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBmcm9udG1hdHRlcj9cclxuICAgICAgICBpZiAoIXNvdXJjZXMuRnJvbnRtYXR0ZXIpIHtcclxuICAgICAgICAgIGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXIgfHwgdGhpcy5mcm9udG1hdHRlcihmaWxlTmFtZSk7XHJcbiAgICAgICAgICBPYmplY3Qua2V5cyhmcm9udG1hdHRlcikuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHZhbHVlc1twcm9wXTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSAvLyBqdXN0IHRoZSBmcm9udG1hdHRlci9jYWNoZT9cclxuICAgICAgZWxzZSBpZiAoc291cmNlcy5Gcm9udG1hdHRlcikge1xyXG4gICAgICAgIHZhbHVlcyA9IHRoaXMuZnJvbnRtYXR0ZXIoZmlsZU5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWRkIGNhY2hlP1xyXG4gICAgaWYgKHNvdXJjZXMgPT09IHRydWUgfHwgc291cmNlcy5DYWNoZSkge1xyXG4gICAgICB2YWx1ZXNbXCJjYWNoZVwiXSA9IHRoaXMuY2FjaGUoZmlsZU5hbWUpO1xyXG4gICAgICB2YWx1ZXNbXCJDYWNoZVwiXSA9IHRoaXMuY2FjaGUoZmlsZU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGFkZCBzZWN0aW9ucz9cclxuICAgIGlmIChzb3VyY2VzID09PSB0cnVlIHx8IHNvdXJjZXMuU2VjdGlvbnMpIHtcclxuICAgICAgaWYgKHNvdXJjZXMgPT09IHRydWUgfHwgc291cmNlcy5GaWxlSW5mbykge1xyXG4gICAgICAgIHZhbHVlcy5maWxlLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucyhmaWxlTmFtZSk7XHJcbiAgICAgICAgdmFsdWVzLmZpbGUuU2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zKGZpbGVOYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZXMuZmlsZSA9IHt9O1xyXG4gICAgICAgIHZhbHVlcy5maWxlLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucyhmaWxlTmFtZSk7XHJcbiAgICAgICAgdmFsdWVzLmZpbGUuU2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zKGZpbGVOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIE1ldGFkYXRhIE1vZGlmaWVyc1xyXG5cclxuICBwYXRjaChmaWxlOiBGaWxlSXRlbSwgZnJvbnRtYXR0ZXJEYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgYW55LCBwcm9wZXJ0eU5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsLCBvcHRpb25zOiBVcGRhdGVPcHRpb25zID0ge3RvVmFsdWVzRmlsZTogZmFsc2UsIHByb3RvdHlwZTogZmFsc2V9KTogdm9pZCB7XHJcbiAgICBpZiAob3B0aW9ucy5wcm90b3R5cGUgJiYgb3B0aW9ucy50b1ZhbHVlc0ZpbGUpIHtcclxuICAgICAgdGhpcy5wYXRjaChmaWxlLCBmcm9udG1hdHRlckRhdGEsIHByb3BlcnR5TmFtZSwgeyAuLi5vcHRpb25zLCBwcm90b3R5cGU6IGZhbHNlIH0pO1xyXG4gICAgICB0aGlzLnBhdGNoKGZpbGUsIGZyb250bWF0dGVyRGF0YSwgcHJvcGVydHlOYW1lLCB7IC4uLm9wdGlvbnMsIHRvVmFsdWVzRmlsZTogZmFsc2UgfSk7XHJcblxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IHVwZGF0ZSB9ID0gTWV0YWRhdGEuTWV0YWVkaXRBcGk7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IE1ldGFkYXRhLl9wYXJzZUZpbGVOYW1lRnJvbURhdGFGaWxlRmlsZU9yUHJvdG90eXBlKG9wdGlvbnMudG9WYWx1ZXNGaWxlID8/IGZhbHNlLCBmaWxlLCBvcHRpb25zLnByb3RvdHlwZSA/PyBmYWxzZSk7XHJcblxyXG4gICAgaWYgKHByb3BlcnR5TmFtZSAhPSBudWxsKSB7XHJcbiAgICAgIHVwZGF0ZShwcm9wZXJ0eU5hbWUsIGZyb250bWF0dGVyRGF0YSwgZmlsZU5hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXJEYXRhKS5mb3JFYWNoKHByb3BlcnR5TmFtZSA9PiB1cGRhdGUocHJvcGVydHlOYW1lLCBmcm9udG1hdHRlckRhdGFbcHJvcGVydHlOYW1lXSwgZmlsZU5hbWUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldChmaWxlOiBGaWxlSXRlbSwgZnJvbnRtYXR0ZXJEYXRhOiBhbnksIG9wdGlvbnM6IFVwZGF0ZU9wdGlvbnMgPSB7dG9WYWx1ZXNGaWxlOiBmYWxzZSwgcHJvdG90eXBlOiBmYWxzZX0pOiB2b2lkIHtcclxuICAgIGlmIChvcHRpb25zLnByb3RvdHlwZSAmJiBvcHRpb25zLnRvVmFsdWVzRmlsZSkge1xyXG4gICAgICB0aGlzLnNldChmaWxlLCBmcm9udG1hdHRlckRhdGEsIHsgLi4ub3B0aW9ucywgcHJvdG90eXBlOiBmYWxzZSB9KTtcclxuICAgICAgdGhpcy5zZXQoZmlsZSwgZnJvbnRtYXR0ZXJEYXRhLCB7IC4uLm9wdGlvbnMsIHRvVmFsdWVzRmlsZTogZmFsc2UgfSk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyB1cGRhdGUgfSA9IE1ldGFkYXRhLk1ldGFlZGl0QXBpO1xyXG4gICAgY29uc3QgZmlsZU5hbWUgPSBNZXRhZGF0YS5fcGFyc2VGaWxlTmFtZUZyb21EYXRhRmlsZUZpbGVPclByb3RvdHlwZShvcHRpb25zLnRvVmFsdWVzRmlsZSA/PyBmYWxzZSwgZmlsZSwgb3B0aW9ucy5wcm90b3R5cGUgPz8gZmFsc2UpO1xyXG5cclxuICAgIHRoaXMuY2xlYXIoZmlsZU5hbWUpO1xyXG4gICAgT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXJEYXRhKS5mb3JFYWNoKHByb3BlcnR5TmFtZSA9PiB1cGRhdGUocHJvcGVydHlOYW1lLCBmcm9udG1hdHRlckRhdGFbcHJvcGVydHlOYW1lXSwgZmlsZU5hbWUpKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKGZpbGU6IEZpbGVJdGVtID0gbnVsbCwgZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzOiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+IHwgUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgPSBudWxsLCBvcHRpb25zOiBVcGRhdGVPcHRpb25zID0ge3RvVmFsdWVzRmlsZTogZmFsc2UsIHByb3RvdHlwZTogZmFsc2V9KSA6IHZvaWQge1xyXG4gICAgaWYgKG9wdGlvbnMucHJvdG90eXBlICYmIG9wdGlvbnMudG9WYWx1ZXNGaWxlKSB7XHJcbiAgICAgIHRoaXMuc2V0KGZpbGUsIGZyb250bWF0dGVyUHJvcGVydGllcywgeyAuLi5vcHRpb25zLCBwcm90b3R5cGU6IGZhbHNlIH0pO1xyXG4gICAgICB0aGlzLnNldChmaWxlLCBmcm9udG1hdHRlclByb3BlcnRpZXMsIHsgLi4ub3B0aW9ucywgdG9WYWx1ZXNGaWxlOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IE1ldGFkYXRhLl9wYXJzZUZpbGVOYW1lRnJvbURhdGFGaWxlRmlsZU9yUHJvdG90eXBlKG9wdGlvbnMudG9WYWx1ZXNGaWxlID8/IGZhbHNlLCBmaWxlLCBvcHRpb25zLnByb3RvdHlwZSA/PyBmYWxzZSk7XHJcbiAgICBsZXQgcHJvcHNUb0NsZWFyID0gW107XHJcblxyXG4gICAgaWYgKHR5cGVvZiBmcm9udG1hdHRlclByb3BlcnRpZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgcHJvcHNUb0NsZWFyLnB1c2goZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZyb250bWF0dGVyUHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKGZyb250bWF0dGVyUHJvcGVydGllcyA9PT0gbnVsbCkge1xyXG4gICAgICAgIHByb3BzVG9DbGVhciA9IE9iamVjdC5rZXlzKHRoaXMuZnJvbnRtYXR0ZXIoZmlsZU5hbWUpIGFzIEZyb250bWF0dGVyKTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZyb250bWF0dGVyUHJvcGVydGllcykpIHtcclxuICAgICAgICBwcm9wc1RvQ2xlYXIgPSBmcm9udG1hdHRlclByb3BlcnRpZXM7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvcHNUb0NsZWFyID0gT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRocm93IFwibm90IGltcGxlbWVudGVkXCI7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuICBcclxuICAvLyNyZWdpb24gVXRpbGl0aWVzXHJcbiAgXHJcbiAgLy8jcmVnaW9uIE9iamVjdCBEZWVwIFByb3BlcnR5IFV0aWxpdGllc1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEZpbmQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5W3N0cmluZ119IHByb3BlcnR5UGF0aCBBcnJheSBvZiBrZXlzLCBvciBkb3Qgc2VwZXJhdGVkIHByb3Blcnkga2V5LlwiXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG9uT2JqZWN0IFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgZGVzaXJlZCBrZXlcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHByb3BlcnR5IGV4aXN0cywgZmFsc2UgaWYgbm90LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBDb250YWluc0RlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGg6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sIG9uT2JqZWN0OiBhbnkpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGtleXMgPSAodHlwZW9mIChwcm9wZXJ0eVBhdGgpID09IFwic3RyaW5nXCIpXHJcbiAgICAgID8gcHJvcGVydHlQYXRoXHJcbiAgICAgICAgLnNwbGl0KCcuJylcclxuICAgICAgOiBwcm9wZXJ0eVBhdGg7XHJcblxyXG4gICAgbGV0IHBhcmVudCA9IG9uT2JqZWN0O1xyXG4gICAgZm9yIChjb25zdCBjdXJyZW50S2V5IG9mIGtleXMpIHtcclxuICAgICAgaWYgKHR5cGVvZiBwYXJlbnQgIT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcGFyZW50Lmhhc093blByb3BlcnR5KGN1cnJlbnRLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwYXJlbnQgPSBwYXJlbnRbY3VycmVudEtleV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdCwgbnVsbCBpZiBub3QgZm91bmQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAqIEBwYXJhbSB7e29uVHJ1ZTpmdW5jdGlvbihvYmplY3QpLCBvbkZhbHNlOmZ1bmN0aW9uKCl9fGZ1bmN0aW9uKG9iamVjdCl8W2Z1bmN0aW9uKG9iamVjdCksIGZ1bmN0aW9uKCldfSB0aGVuRG8gQShzZXQgb2YpIGNhbGxiYWNrKHMpIHRoYXQgdGFrZXMgdGhlIGZvdW5kIHZhbHVlIGFzIGEgcGFyYW1ldGVyLiBEZWZhdWx0cyB0byBqdXN0IHRoZSBvblRydWUgbWV0aG9kIGlmIGEgc2luZ2xlIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbiBvbiBpdCdzIG93bi5cclxuICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbU9iamVjdCBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRlc2lyZWQga2V5XHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBpZiB0aGUgcHJvcGVydHkgZXhpc3RzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBUcnlUb0dldERlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGg6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sIHRoZW5EbzogYW55LCBmcm9tT2JqZWN0OiBhbnkpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGtleXMgPSAodHlwZW9mIChwcm9wZXJ0eVBhdGgpID09IFwic3RyaW5nXCIpXHJcbiAgICAgID8gcHJvcGVydHlQYXRoXHJcbiAgICAgICAgLnNwbGl0KCcuJylcclxuICAgICAgOiBwcm9wZXJ0eVBhdGg7XHJcblxyXG4gICAgbGV0IHBhcmVudCA9IGZyb21PYmplY3Q7XHJcbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRLZXkgb2Yga2V5cykge1xyXG4gICAgICBpZiAodHlwZW9mIHBhcmVudCAhPT0gXCJvYmplY3RcIiB8fCAhcGFyZW50Lmhhc093blByb3BlcnR5KGN1cnJlbnRLZXkpKSB7XHJcbiAgICAgICAgaWYgKHRoZW5EbyAmJiB0aGVuRG8ub25GYWxzZSkge1xyXG4gICAgICAgICAgdGhlbkRvLm9uRmFsc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwYXJlbnQgPSBwYXJlbnRbY3VycmVudEtleV07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoZW5Ebykge1xyXG4gICAgICBjb25zdCB0aGVuID0gdGhlbkRvLm9uVHJ1ZSB8fCB0aGVuRG87XHJcbiAgICAgIGlmICh0aGVuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoZW4ocGFyZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgZGVlcCBwcm9wZXJ0eSBpbiBhbiBvYmplY3QsIG51bGwgaWYgbm90IGZvdW5kLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXlbc3RyaW5nXX0gcHJvcGVydHlQYXRoIEFycmF5IG9mIGtleXMsIG9yIGRvdCBzZXBlcmF0ZWQgcHJvcGVyeSBrZXkuXCJcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbU9iamVjdCBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRlc2lyZWQga2V5XHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgZm91bmQgZGVlcCBwcm9wZXJ0eSwgb3IgbnVsbCBpZiBub3QgZm91bmQuXHJcbiAgICovXHJcbiAgc3RhdGljIEdldERlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGg6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sIGZyb21PYmplY3Q6IGFueSk6IGFueSB8IG51bGwge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgKHByb3BlcnR5UGF0aCkgPT0gXCJzdHJpbmdcIlxyXG4gICAgICA/IHByb3BlcnR5UGF0aFxyXG4gICAgICAgIC5zcGxpdCgnLicpXHJcbiAgICAgIDogcHJvcGVydHlQYXRoKVxyXG4gICAgICAucmVkdWNlKCh0LCBwKSA9PiB0Py5bcF0sIGZyb21PYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGEgZGVlcCBwcm9wZXJ0eSBpbiBhbiBvYmplY3QsIGV2ZW4gaWYgaXQgZG9lc24ndCBleGlzdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfFtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cclxuICAgKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbihvYmplY3QpfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LCBvciBhIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgY3VycmVudCB2YWx1ZSBhbmQgcmV0dXJuIGl0LlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBmcm9tT2JqZWN0IFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgZGVzaXJlZCBrZXlcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBmb3VuZCBkZWVwIHByb3BlcnR5LCBvciBudWxsIGlmIG5vdCBmb3VuZC5cclxuICAgKi9cclxuICBzdGF0aWMgU2V0RGVlcFByb3BlcnR5KHByb3BlcnR5UGF0aDogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPiwgdmFsdWU6IGFueSwgb25PYmplY3Q6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc3Qga2V5cyA9ICh0eXBlb2YgKHByb3BlcnR5UGF0aCkgPT0gXCJzdHJpbmdcIilcclxuICAgICAgPyBwcm9wZXJ0eVBhdGhcclxuICAgICAgICAuc3BsaXQoJy4nKVxyXG4gICAgICA6IHByb3BlcnR5UGF0aDtcclxuXHJcbiAgICBsZXQgcGFyZW50ID0gb25PYmplY3Q7XHJcbiAgICBsZXQgY3VycmVudEtleTtcclxuICAgIGZvciAoY3VycmVudEtleSBvZiBrZXlzKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgcGFyZW50ICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgdGhyb3cgYFByb3BlcnR5OiAke2N1cnJlbnRLZXl9LCBpbiBQYXRoOiAke3Byb3BlcnR5UGF0aH0sIGlzIG5vdCBhbiBvYmplY3QuIENoaWxkIHByb3BlcnR5IHZhbHVlcyBjYW5ub3QgYmUgc2V0IWA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHRoaXMgcGFyZW50IGRvZXNuJ3QgaGF2ZSB0aGUgcHJvcGVydHkgd2Ugd2FudCwgYWRkIGl0IGFzIGFuIGVtcHR5IG9iamVjdCBmb3Igbm93LlxyXG4gICAgICBpZiAoIXBhcmVudC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50S2V5KSkge1xyXG4gICAgICAgIHBhcmVudFtjdXJyZW50S2V5XSA9IHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBpZiB0aGlzIGlzbid0IHRoZSBsYXN0IG9uZSwgc2V0IGl0IGFzIHBhcmVudC5cclxuICAgICAgaWYgKGN1cnJlbnRLZXkgIT0ga2V5c1trZXlzLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50W2N1cnJlbnRLZXldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjdXJyZW50S2V5KSB7XHJcbiAgICAgIHRocm93IFwiTm8gRmluYWwgS2V5IFByb3ZpZGVkIT9cIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgcGFyZW50W2N1cnJlbnRLZXldID0gdmFsdWUocGFyZW50W2N1cnJlbnRLZXldKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBhcmVudFtjdXJyZW50S2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiBGaWxlbmFtZSBVdGlsaXRpZXNcclxuXHJcbiAgcGF0aChyZWxhdGl2ZVBhdGg6IHN0cmluZyB8IG51bGwgPSBudWxsLCBleHRlbnNpb246IHN0cmluZyB8IGJvb2xlYW4gPSBcIlwiLCByb290Rm9sZGVyOiBzdHJpbmcgfCBudWxsID0gbnVsbCkgOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhLl9hZGRFeHRlbnNpb24oTWV0YWRhdGEuX2ZpbmRQYXRoKHJlbGF0aXZlUGF0aCwgZXh0ZW5zaW9uLCByb290Rm9sZGVyKSwgZXh0ZW5zaW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFR1cm4gYSByZWxhdGl2ZSBwYXRoIGludG8gYSBmdWxsIHBhdGhcclxuICAgKlxyXG4gICAqIEBwYXJhbSByZWxhdGl2ZVBhdGggVGhlIHJlbGF0aXZlIHBhdGggdG8gbWFwIHRvLiBXaWxsIHByZWZvcm0gaW1tZWRpYXRlIHNlYXJjaCBpZiBpdCBzdGFydHMgd2l0aCA/LlxyXG4gICAqIEBwYXJhbSBleHRlbnNpb24gVGhlIGV4dGVuc2lvbiB0byBhZGQuIERlZmF1bHRzIHRvIG5vIGV4dGVuc2lvbiAoZmFsc2UvZW1wdHkpLiBJZiB0cnVlIGlzIHBhc3NlZCBpbiAubWQgd2lsbCBiZSBhZGRlZC5cclxuICAgKiBAcGFyYW0gcm9vdEZvbGRlciAoT3B0aW9uYWwpIFRoZSByb290IGZvbGRlciBwYXRoIHRoZSByZWxhdGl2ZSBwYXRoIGlzIHJlbGF0aXZlIHRvby4gRGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgbm90ZSdzIGZvbGRlclxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGZ1bGwgZmlsZSBwYXRoLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBQYXRoKHJlbGF0aXZlUGF0aDogc3RyaW5nIHwgbnVsbCA9IG51bGwsIGV4dGVuc2lvbjogc3RyaW5nIHwgYm9vbGVhbiA9IFwiXCIsIHJvb3RGb2xkZXI6IHN0cmluZyB8IG51bGwgPSBudWxsKTogc3RyaW5nIHtcclxuICAgIHJldHVybiAoTWV0YWRhdGEuQXBpLnBhdGgocmVsYXRpdmVQYXRoLCBleHRlbnNpb24sIHJvb3RGb2xkZXIpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGZpbGUgcGF0aCBzdHJpbmcgYmFzZWQgb24gYSBmaWxlIHBhdGggc3RyaW5nIG9yIGZpbGUgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGaWxlU291cmNlfSBmaWxlIFRoZSBmaWxlIG9iamVjdCAod2l0aCBhIHBhdGggcHJvcGVydHkpIG9yIGZpbGUgbmFtZVxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGZpbGUgcGF0aFxyXG4gICAqL1xyXG4gIHN0YXRpYyBQYXJzZUZpbGVQYXRoRnJvbVNvdXJjZShmaWxlOiBGaWxlU291cmNlKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSBmaWxlIHx8IG51bGw7XHJcbiAgICBpZiAodHlwZW9mIGZpbGUgPT09IFwib2JqZWN0XCIgJiYgZmlsZSAhPT0gbnVsbCkge1xyXG4gICAgICBmaWxlTmFtZSA9IGZpbGUucGF0aDtcclxuICAgIH1cclxuXHJcbiAgICAvL0B0cy1leHBlY3QtZXJyb3I6IEFjY291bnRlZCBGb3IuXHJcbiAgICByZXR1cm4gZmlsZU5hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGZ1bGwgcGF0aCBvZiBhIGRhdGEgZmlsZSBmcm9tIGl0J3MgZGF0YSBwYXRoLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGRhdGFQYXRoIFRoZSBwYXRoIGFmdGVyIHRoZSB2YWx1ZSBzZXQgaW4gc2V0dGluZ3MgZm9yIHRoZSBwYXRoIHRvIGRhdGEgdmFsdWUgZmlsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB0aGUgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3Qgb2YgdGhlIHZhdWx0LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBCdWlsZERhdGFGaWxlRnVsbFBhdGgoZGF0YVBhdGg6IHN0cmluZykge1xyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYXBwLnBsdWdpbiBpcyBub3QgbWFwcGVkLlxyXG4gICAgcmV0dXJuIGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1hcGlcIl0uc2V0dGluZ3MuZGF0YUZpbGVzUGF0aCArIGRhdGFQYXRoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBmdWxsIHBhdGggb2YgYSBwcm90b3R5cGUgZmlsZSBmcm9tIGl0J3MgZGF0YSBwYXRoLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHByb3RvdHlwZVBhdGggVGhlIHBhdGggYWZ0ZXIgdGhlIHZhbHVlIHNldCBpbiBzZXR0aW5ncyBmb3IgdGhlIHBhdGggdG8gZGF0YSBwcm90b3R5cGVzIGZpbGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgdGhlIGZ1bGwgcGF0aCBmcm9tIHRoZSByb290IG9mIHRoZSB2YXVsdC5cclxuICAgKi9cclxuICBzdGF0aWMgQnVpbGRQcm90b3R5cGVGaWxlRnVsbFBhdGgocHJvdG90eXBlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhcHAucGx1Z2luIGlzIG5vdCBtYXBwZWQuXHJcbiAgICByZXR1cm4gYXBwLnBsdWdpbnMucGx1Z2luc1tcIm1ldGFkYXRhLWFwaVwiXS5zZXR0aW5ncy5wcm90b3R5cGVzUGF0aCArIHByb3RvdHlwZVBhdGg7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBfcGFyc2VGaWxlTmFtZUZyb21EYXRhRmlsZUZpbGVPclByb3RvdHlwZSh0b1ZhbHVlc0ZpbGU6IHN0cmluZyB8IGJvb2xlYW4sIGZpbGU6IEZpbGVTb3VyY2UsIHByb3RvdHlwZTogc3RyaW5nIHwgYm9vbGVhbikge1xyXG4gICAgcmV0dXJuIHRvVmFsdWVzRmlsZVxyXG4gICAgICA/IGZpbGVcclxuICAgICAgICA/IE1ldGFkYXRhLkJ1aWxkRGF0YUZpbGVGdWxsUGF0aChNZXRhZGF0YS5QYXJzZUZpbGVQYXRoRnJvbVNvdXJjZShmaWxlKSEpXHJcbiAgICAgICAgOiAodHlwZW9mIHRvVmFsdWVzRmlsZSA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgPyBNZXRhZGF0YS5CdWlsZERhdGFGaWxlRnVsbFBhdGgodG9WYWx1ZXNGaWxlKVxyXG4gICAgICAgICAgOiBNZXRhZGF0YS5CdWlsZERhdGFGaWxlRnVsbFBhdGgoTWV0YWRhdGEuQXBpLkN1cnJlbnQuUGF0aCkpXHJcbiAgICAgIDogcHJvdG90eXBlXHJcbiAgICAgICAgPyBmaWxlXHJcbiAgICAgICAgICA/IE1ldGFkYXRhLkJ1aWxkUHJvdG90eXBlRmlsZUZ1bGxQYXRoKE1ldGFkYXRhLlBhcnNlRmlsZVBhdGhGcm9tU291cmNlKGZpbGUpISlcclxuICAgICAgICAgIDogKHR5cGVvZiBwcm90b3R5cGUgPT09IFwic3RyaW5nXCJcclxuICAgICAgICAgICAgPyBNZXRhZGF0YS5CdWlsZFByb3RvdHlwZUZpbGVGdWxsUGF0aChwcm90b3R5cGUpXHJcbiAgICAgICAgICAgIDogTWV0YWRhdGEuQnVpbGRQcm90b3R5cGVGaWxlRnVsbFBhdGgoTWV0YWRhdGEuQXBpLkN1cnJlbnQuUGF0aCkpXHJcbiAgICAgICAgOiBNZXRhZGF0YS5QYXJzZUZpbGVQYXRoRnJvbVNvdXJjZShmaWxlKSB8fCBNZXRhZGF0YS5BcGkuQ3VycmVudC5QYXRoO1xyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHN0YXRpYyBfZmluZFBhdGgocmVsYXRpdmVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbCwgZXh0ZW5zaW9uOiBzdHJpbmcgfCBib29sZWFuID0gXCJcIiwgcm9vdEZvbGRlcjogc3RyaW5nIHwgbnVsbCA9IG51bGwpIDogc3RyaW5nIHtcclxuICAgIGlmICghcmVsYXRpdmVQYXRoKSB7XHJcbiAgICAgIHJldHVybiBNZXRhZGF0YS5BcGkuY3VycmVudC5wYXRoXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGxldCBjdXJyZW50Rm9sZGVyOiBURm9sZGVyID0gcm9vdEZvbGRlclxyXG4gICAgICA/IChhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJvb3RGb2xkZXIpIGFzIFRGb2xkZXIpXHJcbiAgICAgIDogTWV0YWRhdGEuQXBpLkN1cnJlbnQuTm90ZS5wYXJlbnQ7XHJcbiAgICBcclxuICAgIGlmICghY3VycmVudEZvbGRlcikge1xyXG4gICAgICB0aHJvdyBgUm9vdCBGb2xkZXIgTm90IEZvdW5kOiAke2N1cnJlbnRGb2xkZXJ9LmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKFwiP1wiKSkge1xyXG4gICAgICBjb25zdCBmb3VuZEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChNZXRhZGF0YS5fYWRkRXh0ZW5zaW9uKHJlbGF0aXZlUGF0aC5zdWJzdHJpbmcoMSksIGV4dGVuc2lvbiksIGN1cnJlbnRGb2xkZXIucGF0aCk7XHJcbiAgICAgIGlmIChmb3VuZEZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZm91bmRGaWxlLnBhdGguc3Vic3RyaW5nKDAsIGZvdW5kRmlsZS5wYXRoLmxlbmd0aCAtIGZvdW5kRmlsZS5leHRlbnNpb24ubGVuZ3RoIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbZmlsZU5hbWUsIC4uLmZvbGRlcnNdID0gcmVsYXRpdmVQYXRoLnNwbGl0KFwiL1wiKS5yZXZlcnNlKCk7XHJcbiAgICBsZXQgYWJzb2x1dGVQYXRoID0gZmlsZU5hbWU7XHJcblxyXG4gICAgaWYgKGZvbGRlcnMgJiYgZm9sZGVycy5sZW5ndGgpIHtcclxuICAgICAgZm9yICh2YXIgZm9sZGVyIG9mIGZvbGRlcnMucmV2ZXJzZSgpKSB7XHJcbiAgICAgICAgaWYgKGZvbGRlciA9PT0gXCIuLlwiKSB7XHJcbiAgICAgICAgICBjdXJyZW50Rm9sZGVyID0gY3VycmVudEZvbGRlci5wYXJlbnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmb2xkZXIgPT09IFwiLlwiKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYWJzb2x1dGVQYXRoID0gZm9sZGVyICsgKGFic29sdXRlUGF0aCA/IFwiL1wiICsgYWJzb2x1dGVQYXRoIDogXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBmb3VuZEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChNZXRhZGF0YS5fYWRkRXh0ZW5zaW9uKHJlbGF0aXZlUGF0aCwgZXh0ZW5zaW9uKSwgY3VycmVudEZvbGRlci5wYXRoKTtcclxuICAgICAgaWYgKGZvdW5kRmlsZSkge1xyXG4gICAgICAgIHJldHVybiBmb3VuZEZpbGUucGF0aC5zdWJzdHJpbmcoMCwgZm91bmRGaWxlLnBhdGgubGVuZ3RoIC0gZm91bmRGaWxlLmV4dGVuc2lvbi5sZW5ndGggLSAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50Rm9sZGVyLnBhdGggIT09IFwiL1wiKSB7XHJcbiAgICAgIHJldHVybiBjdXJyZW50Rm9sZGVyLnBhdGggKyAoYWJzb2x1dGVQYXRoID8gXCIvXCIgKyBhYnNvbHV0ZVBhdGggOiBcIlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBhYnNvbHV0ZVBhdGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBfYWRkRXh0ZW5zaW9uKHBhdGg6IHN0cmluZywgZXh0ZW5zaW9uOiBzdHJpbmcgfCBib29sZWFuKTogc3RyaW5nIHtcclxuICAgIGlmIChleHRlbnNpb24pIHtcclxuICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb24gIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICByZXR1cm4gcGF0aCArIFwiLm1kXCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGggKyBcIi5cIiArIGV4dGVuc2lvbjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IENhY2hlLCBDdXJyZW50QXBpLCBGcm9udG1hdHRlciwgTWV0YURhdGEsIE1ldGFkYXRhQXBpLCBTZWN0aW9ucywgVXBkYXRlT3B0aW9ucyB9IGZyb20gJy4vYXBpJztcclxuXHJcbi8qKlxyXG4gKiBBY2Nlc3MgdG8gY3VycmVudCBtZXRhZGF0YVxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDdXJyZW50TWV0YWRhdGEgaW1wbGVtZW50cyBDdXJyZW50QXBpIHtcclxuICBwcml2YXRlIF9hcGk6IE1ldGFkYXRhQXBpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihtZXRhQXBpOiBNZXRhZGF0YUFwaSkge1xyXG4gICAgdGhpcy5fYXBpID0gbWV0YUFwaTtcclxuICB9XHJcblxyXG4gIGdldCBEYXRhKCk6IE1ldGFEYXRhICB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLmdldCgpIGFzIE1ldGFEYXRhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGEoKTogTWV0YURhdGEge1xyXG4gICAgcmV0dXJuIHRoaXMuRGF0YTtcclxuICB9XHJcblxyXG4gIGdldCBOb3RlKCk6IFRGaWxlIHtcclxuICAgIGNvbnN0IHNwZWNpYWxDYWNoZSA9IHRoaXMuX2FwaS5jYWNoZShcIl96cGVjOmF8XCIpIGFzIENhY2hlO1xyXG4gICAgaWYgKHR5cGVvZiBzcGVjaWFsQ2FjaGVbXCJDdXJyZW50UGF0aFwiXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5fYXBpLnZhdWx0KFxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IFNwZWNpYWwgdmFyIHZhcmlhYmxlIGZvciBleHRyYSBzY29wZS5cclxuICAgICAgICBTY29wZWRDdXJyZW50UGF0aFxyXG4gICAgICApIGFzIFRGaWxlO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFjdXJyZW50KSB7XHJcbiAgICAgICAgdGhyb3cgXCJObyBDdXJyZW50IEZpbGVcIjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY3VycmVudCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cclxuICAgIGlmICghY3VycmVudCkge1xyXG4gICAgICB0aHJvdyBcIk5vIEN1cnJlbnQgRmlsZVwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gY3VycmVudDtcclxuICB9XHJcblxyXG4gIGdldCBub3RlKCk6IFRGaWxlIHtcclxuICAgIHJldHVybiB0aGlzLk5vdGU7XHJcbiAgfVxyXG5cclxuICBnZXQgUGF0aCgpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgbm90ZTogVEZpbGUgPSB0aGlzLk5vdGU7XHJcbiAgICBsZXQgcGF0aCA9IG5vdGUucGF0aDtcclxuICAgIGlmIChub3RlLmV4dGVuc2lvbikge1xyXG4gICAgICBwYXRoID0gcGF0aC5zbGljZSgwLCAwIC0gKG5vdGUuZXh0ZW5zaW9uLmxlbmd0aCArIDEpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9XHJcblxyXG4gIGdldCBwYXRoKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5QYXRoO1xyXG4gIH1cclxuXHJcbiAgZ2V0IFBhdGhFeCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMubm90ZS5wYXRoO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBhdGhleCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuUGF0aEV4O1xyXG4gIH1cclxuXHJcbiAgZ2V0IE1hdHRlcigpOiBGcm9udG1hdHRlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLmZyb250bWF0dGVyKCkgYXMgRnJvbnRtYXR0ZXI7XHJcbiAgfVxyXG5cclxuICBnZXQgbWF0dGVyKCk6IEZyb250bWF0dGVyIHtcclxuICAgIHJldHVybiB0aGlzLk1hdHRlcjtcclxuICB9XHJcblxyXG4gIGdldCBDYWNoZSgpOiBDYWNoZSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLmNhY2hlKCkgYXMgQ2FjaGU7XHJcbiAgfVxyXG5cclxuICBnZXQgY2FjaGUoKTogQ2FjaGUge1xyXG4gICAgcmV0dXJuIHRoaXMuQ2FjaGU7XHJcbiAgfVxyXG5cclxuICBnZXQgU2VjdGlvbnMoKTogU2VjdGlvbnMge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaS5zZWN0aW9ucygpIGFzIFNlY3Rpb25zO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHNlY3Rpb25zKCk6IFNlY3Rpb25zIHtcclxuICAgIHJldHVybiB0aGlzLlNlY3Rpb25zO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2goZnJvbnRtYXR0ZXJEYXRhOiBhbnksIHByb3BlcnR5TmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGwsIG9wdGlvbnM6IFVwZGF0ZU9wdGlvbnMgPSB7dG9WYWx1ZXNGaWxlOiBmYWxzZSwgcHJvdG90eXBlOiBmYWxzZX0pOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaS5wYXRjaCh0aGlzLnBhdGgsIGZyb250bWF0dGVyRGF0YSwgcHJvcGVydHlOYW1lLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHNldChmcm9udG1hdHRlckRhdGE6IGFueSwgb3B0aW9uczogVXBkYXRlT3B0aW9ucyA9IHt0b1ZhbHVlc0ZpbGU6IGZhbHNlLCBwcm90b3R5cGU6IGZhbHNlfSk6IGFueSB8IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLnNldCh0aGlzLnBhdGgsIGZyb250bWF0dGVyRGF0YSwgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBjbGVhcihmcm9udG1hdHRlclByb3BlcnRpZXM6IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBvYmplY3QgfCBudWxsID0gbnVsbCwgb3B0aW9uczogVXBkYXRlT3B0aW9ucyA9IHt0b1ZhbHVlc0ZpbGU6IGZhbHNlLCBwcm90b3R5cGU6IGZhbHNlfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaS5jbGVhcih0aGlzLnBhdGgsIGZyb250bWF0dGVyUHJvcGVydGllcywgb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBDYWNoZWRNZXRhZGF0YSwgUGx1Z2luLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuLy8jcmVnaW9uIFBsdWdpblxyXG5cclxuLyoqXHJcbiAqIEVudW0gZm9yIHRoZSBrZWJhYiBzcGxheSBzZXR0aW5ncyBvcHRpb25zXHJcbiAqL1xyXG5leHBvcnQgZW51bSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24ge1xyXG4gIERpc2FibGVkID0gMCxcclxuICBMb3dlcmNhc2UgPSAxLFxyXG4gIENhbWVsQ2FzZSA9IDIsXHJcbiAgTG93ZXJBbmRDYW1lbENhc2UgPSAzXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGF0aWMgY29udGFpbmVyIGZvciB0aGUgY3VycmVudCBtZXRhZGF0YSBwbHVnaW4gaW5zdGFuY2UuIFxyXG4gKiBJbnRlcm5hbCB1c2Ugb25seS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQbHVnaW5Db250YWluZXIge1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgbWV0YWRhdGEgYXBpIHBsdWdpbi5cclxuICAgKi9cclxuICBzdGF0aWMgSW5zdGFuY2U6IE1ldGFkYXRhUGx1Z2luO1xyXG5cclxuICAvKipcclxuICAgKiBBY2Nlc3MgdG8gdGhlIE1ldGFlZGl0IEFwaVxyXG4gICAqIChXcml0ZSBhY2Nlc3MpXHJcbiAgICogLy8gVE9ETzogY2FuIHdlIHNldCB0aGVzZSB0byB0aGVpciBzcGVjaWZpYyB0eXBlcz9cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IE1ldGFlZGl0QXBpKCkgOiBhbnkge1xyXG4gICAgcmV0dXJuIChhcHAgYXMgYW55KVxyXG4gICAgLnBsdWdpbnNcclxuICAgIC5wbHVnaW5zXHJcbiAgICAubWV0YWVkaXRcclxuICAgIC5hcGk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEFjY2VzcyB0byB0aGUgRGF0YXZpZXcgQXBpXHJcbiAgICogKFJlYWQgYWNjZXNzIGFuZCBEYXRhIGRpc3BsYXkpXHJcbiAgICogLy8gVE9ETzogY2FuIHdlIHNldCB0aGVzZSB0byB0aGVpciBzcGVjaWZpYyB0eXBlcz9cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IERhdGF2aWV3QXBpKCkgOiBhbnkge1xyXG4gICAgcmV0dXJuIChhcHAgYXMgYW55KVxyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAuZGF0YXZpZXdcclxuICAgICAgLmFwaTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIHRoZSBwbHVnaW4gaXRzZWxmXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBNZXRhZGF0YVBsdWdpbiA9IHtcclxuICAvKipcclxuICAgKiBHZXQgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgdGhlIE1ldGFkYXRhIEFwaSBvYmplY3QvaW50ZXJmYWNlXHJcbiAgICovXHJcbiAgZ2V0IGFwaSgpOiBNZXRhZGF0YUFwaTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHNldHRpbmdzIGZvciB0aGUgYXBpLlxyXG4gICAqIENhbGwgc2F2ZVNldHRpbmdzIGlmIHlvdSB1cGRhdGUgdGhlbS5cclxuICAgKi9cclxuICBzZXR0aW5nczogTWV0YWRhdGFBcGlTZXR0aW5ncztcclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbCBhZnRlciB1cGRhdGluZyB0aGUgc2V0dGluZ3Mgb2JqZWN0IHRvIHJlLWxvYWQgdGhlIGFwaVxyXG4gICAqL1xyXG4gIHNhdmVTZXR0aW5ncygpOiB2b2lkO1xyXG59ICYgUGx1Z2luO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3IgdGhlIHBsdWdpbiBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXRhZGF0YUFwaVNldHRpbmdzIHtcclxuICAvKipcclxuICAgKiBUaGUgZ2xvYmFsIHByb3BlcnR5IGtleSBmb3IgdGhlICdjYWNoZScgdmFyaWFibGUgXHJcbiAgICovXHJcbiAgZ2xvYmFsQ2FjaGVOYW1lOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBnbG9iYWwgcHJvcGVydHkga2V5IGZvciB0aGUgJ21ldGEnIHZhcmlhYmxlIFxyXG4gICAqL1xyXG4gIGdsb2JhbE1ldGFkYXRhQXBpTmFtZTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgZ2xvYmFsIHByb3BlcnR5IGtleSBmb3IgdGhlICdwYXRoJyBmdW5jdGlvbiBcclxuICAgKi9cclxuICBnbG9iYWxQYXRoTmFtZTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBpZiBoYXNwcm9wLCBnZXRwcm9wLCBhbmQgc2V0cHJvcCBzaG91bGQgYmUgYWRkZWQgdG8gYWxsIG9iamVjdHNcclxuICAgKi9cclxuICBkZWZpbmVPYmplY3RQcm9wZXJ0eUhlbHBlckZ1bmN0aW9uczogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogaWYgYXJyYXkgaGVscGVyIGZ1bmN0aW9ucyBsaWtlIGFnZ2VnYXRlQnkgc2hvdWxkIGJlIGFkZGVkIHRvIGFsbCBhcnJheXNcclxuICAgKi9cclxuICBkZWZpbmVBcnJheUhlbHBlckZ1bmN0aW9uczogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogaWYga2ViYWItY2FzZSBwcm9wZXJ0aWVzIHNob3VsZCBiZSBzcGxheWVkLCBhbmQgaG93LlxyXG4gICAqL1xyXG4gIHNwbGF5S2ViYWJDYXNlUHJvcGVydGllczogU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uO1xyXG5cclxuICAvKipcclxuICAgKiBJZiBmcm9udG1hdHRlciBzaG91bGQgYmUgc3BsYXllZCBldmVuIGlmIERWIGlzbid0IHVzZWQgdG8gZmV0Y2guXHJcbiAgICovXHJcbiAgc3BsYXlGcm9udG1hdHRlcldpdGhvdXREYXRhdmlldzogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogUGF0aCBmb3IgcHJvdG90eXBlIGRhdGEgZmlsZXNcclxuICAgKi9cclxuICBwcm90b3R5cGVzUGF0aDogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBQYXRoIGZvciB2YWx1ZSBkYXRhIGZpbGVzXHJcbiAgICovXHJcbiAgdmFsdWVzUGF0aDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyNlbmRyZWdpb25cclxuXHJcbi8vI3JlZ2lvbiBNZXRhIERhdGFzXHJcblxyXG4vKipcclxuICogRXh0ZW5zaW9uIG9mIGNhY2hlZGZpbGVtZXRhZGF0YSB0aGF0IGp1c3QgYWRkcyB0aGUgcGF0aCBmb3IgaW50ZXJuYWwgdXNlLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgQ2FjaGVkRmlsZU1ldGFkYXRhID0gQ2FjaGVkTWV0YWRhdGEgJiB7XHJcbiAgLyoqXHJcbiAgICogRnVsbCBwYXRoIG9mIHRoZSBmaWxlIHRoZSBtZXRhZGF0YSBpcyBmb3IuXHJcbiAgICovXHJcbiAgcGF0aDogc3RyaW5nO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgZnVsbCBtZXRhZGF0YSBzZXQgcmV0dXJuZWQgZnJvbSBtZXRhLmdldC5cclxuICovXHJcbmV4cG9ydCB0eXBlIE1ldGFEYXRhID0ge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBEViBmaWxlIG9iamVjdFxyXG4gICAqL1xyXG4gIGZpbGU/OiBGaWxlRGF0YTtcclxuICAvKipcclxuICAgKiBUaGUgRFYgZmlsZSBvYmplY3RcclxuICAgKi9cclxuICBGaWxlPzogRmlsZURhdGE7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1ldGFkYXRhIGFwaSBjYWNoZVxyXG4gICAqL1xyXG4gIGNhY2hlPzogQ2FjaGU7XHJcbiAgLyoqXHJcbiAgICogVGhlIG1ldGFkYXRhIGFwaSBjYWNoZVxyXG4gICAqL1xyXG4gIENhY2hlPzogQ2FjaGU7XHJcbn0gJiBGcm9udG1hdHRlcjtcclxuXHJcbi8qKlxyXG4gKiBBbiBpbnRlcm5hbCBjYWNoZSBmb3IgYSBub3RlLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgQ2FjaGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBjYWNoZWQgYnkgYSBrZXlcclxuICAgKi9cclxuICBbcHJwZXJ0eUtleTogc3RyaW5nXTogYW55O1xyXG59ICYgT2JqZWN0O1xyXG5cclxuLyoqXHJcbiAqIFRoZSBmcm9udG1hdHRlciBvZiBhIG5vdGUuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IHtcclxuICAvKipcclxuICAgKiBBIGZyb250bWF0dGVyIHByb3BlcnR5IGFuZCB2YWx1ZVxyXG4gICAqL1xyXG4gIFtwcnBlcnR5S2V5OiBzdHJpbmddOiBhbnk7XHJcbn0gJiBPYmplY3Q7XHJcblxyXG4vKipcclxuICogVGhlIGRhdGEgaW4gdGhlICdmaWxlJyBvYmplY3QgcHJvdmlkZWQgYnkgZGF0YXZpZXcuXHJcbiAqIFNlY3Rpb25zIGlzIGFkZGVkIGJ5IHRoZSBjdXJyZW50IE1ldGFkYXRhIEFwaS5cclxuICovXHJcbmV4cG9ydCB0eXBlIEZpbGVEYXRhID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBmb2xkZXI6IHN0cmluZztcclxuICBwYXRoOiBzdHJpbmc7XHJcbiAgZXh0OiBzdHJpbmc7XHJcbiAgbGluazogRGF0YUxpbms7XHJcbiAgc2l6ZTogbnVtYmVyO1xyXG4gIGN0aW1lOiBEYXRlO1xyXG4gIGNkYXk6IERhdGU7XHJcbiAgbXRpbWU6IERhdGU7XHJcbiAgbWRheTogRGF0ZTtcclxuICB0YWdzOiBzdHJpbmdbXTtcclxuICBldGFnczogc3RyaW5nW107XHJcbiAgaW5saW5rczogRGF0YUxpbmtbXTtcclxuICBvdXRsaW5rczogRGF0YUxpbmtbXTtcclxuICBhbGlhc2VzOiBzdHJpbmdbXTtcclxuICB0YXNrczogRGF0YVRhc2tbXTtcclxuICBsaXN0czogRGF0YVRhc2tbXTtcclxuICBmcm9udG1hdHRlcj86IEZyb250bWF0dGVyO1xyXG4gIHNlY3Rpb25zPzogU2VjdGlvbnM7XHJcbiAgU2VjdGlvbnM/OiBTZWN0aW9ucztcclxuICBzdGFycmVkPzogYm9vbGVhbjtcclxuICBkYXk/OiBEYXRlO1xyXG59XHJcblxyXG4vKipcclxuICogQW4gb2JzaWRpYW4gbGluay5cclxuICogQ29ubXBpbGVkIGJ5IGRhdGF2aWV3XHJcbiAqL1xyXG5pbnRlcmZhY2UgRGF0YUxpbmsge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIHRoZSBsaW5rIHBvaW50cyB0b1xyXG4gICAqL1xyXG4gIHBhdGg6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgbWQgdGFzayBvciBsaXN0IGl0ZW0uIFxyXG4gKiBDb25tcGlsZWQgYnkgZGF0YXZpZXcuXHJcbiAqL1xyXG5pbnRlcmZhY2UgRGF0YVRhc2sge1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEEgZnVsbCBtZXRhZGF0YSBzZXQgcmV0dXJuZWQgZnJvbSBtZXRhLmdldC5cclxuICovXHJcbmV4cG9ydCB0eXBlIER2RGF0YSA9IHtcclxuICAvKipcclxuICAgKiBUaGUgZHYgZmlsZSBvYmplY3RcclxuICAgKi9cclxuICBmaWxlOiBGaWxlRGF0YTtcclxufSAmIEZyb250bWF0dGVyO1xyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyNyZWdpb24gQXBpc1xyXG5cclxuLyoqXHJcbiAqIFRoZSBzb3VyY2VzIHRvIHB1bGwgTWV0YWRhdGEgdmFsdWVzIGZyb20gZm9yIGEgZmlsZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWV0YWRhdGFTb3VyY2VzIHtcclxuICAvKipcclxuICAgKiBUaGUgJ2ZpbGUnIGZpZWxkIGNvbnRhaW5pbmcgbWV0YWRhdGEgYWJvdXQgdGhlIGZpbGUgaXRzZWxmXHJcbiAgICovXHJcbiAgRmlsZUluZm86IGJvb2xlYW47XHJcbiAgIFxyXG4gIC8qKlxyXG4gICAqIFRoZSBGcm9udG1hdHRlciAoWUFNTCBhdCB0aGUgdG9wIG9mIGEgbm90ZSlcclxuICAgKi9cclxuICBGcm9udG1hdHRlcjogYm9vbGVhbjtcclxuICAgXHJcbiAgLyoqXHJcbiAgICogSW5saW5lIERhdGF2aWV3IGRhdGEgZmllbGRzXHJcbiAgICovXHJcbiAgRGF0YXZpZXdJbmxpbmU6IGJvb2xlYW47XHJcbiAgIFxyXG4gIC8qKlxyXG4gICAqIENhY2hlZCB2YWx1ZXMgZnJvbSB0aGUgTWV0YWRhdGEuQ2FjaGUuXHJcbiAgICovXHJcbiAgQ2FjaGU6IGJvb2xlYW47XHJcbiAgIFxyXG4gIC8qKlxyXG4gICAqIFNlY3Rpb25zIGZyb20gdGhlIG5vdGUgaXRzZWxmXHJcbiAgICovXHJcbiAgU2VjdGlvbnM6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTb21ldGhpbmcgd2UgY2FuIGdldCBhIGZpbGUgb3IgZm9sZGVyJ3MgcGF0aCBmcm9tLlxyXG4gKiBcclxuICogRWl0aGVyIGEgJ2ZpbGUvZm9sZGVyJyBvYmplY3Qgd2l0aCBhICcucGF0aCcgcHJvcGVydHksIG9yIHRoZSBwYXRoIGl0c2VsZiBhcyBhIHN0cmluZy5cclxuICovXHJcbmV4cG9ydCB0eXBlIEZpbGVTb3VyY2UgPSBzdHJpbmcgfCBURmlsZSB8IFRGb2xkZXIgfCBUQWJzdHJhY3RGaWxlIHwgRmlsZURhdGEgfCBEYXRhTGluayB8IG51bGxcclxuXHJcbi8qKlxyXG4gKiBTb21ldGhpbmcgd2UgY2FuIGdldCBhIHNwZWNpZmljIGZpbGUncyBwYXRoIGZyb20uXHJcbiAqIFxyXG4gKiBFaXRoZXIgYSAnZmlsZScgb2JqZWN0IHdpdGggYSAnLnBhdGgnIHByb3BlcnR5LCBvciB0aGUgcGF0aCBpdHNlbGYgYXMgYSBzdHJpbmcuXHJcbiAqL1xyXG4gZXhwb3J0IHR5cGUgRmlsZUl0ZW0gPSBzdHJpbmcgfCBURmlsZSB8IEZpbGVEYXRhIHwgRGF0YUxpbmsgfCBudWxsXHJcblxyXG4vKipcclxuICogUGFzc2VkIGludG8gYW55IHVwZGF0ZSBmdW5jdGlvbnMgdG8gbW9kaWZ5IHdoYXQgdGhleSBkby5cclxuICovXHJcbmV4cG9ydCB0eXBlIFVwZGF0ZU9wdGlvbnMgPSB7XHJcbiAgdG9WYWx1ZXNGaWxlPzogYm9vbGVhbiB8IHN0cmluZztcclxuICBwcm90b3R5cGU/OiBzdHJpbmcgfCBib29sZWFuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3IgdGhlIEFwaS5cclxuICogQWNjZXNzIGFuZCBlZGl0IG1ldGFkYXRhIGFib3V0IGEgZmlsZSBmcm9tIG11bHRpcGxlIHNvdXJjZXMuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFkYXRhQXBpIHtcclxuICAvKipcclxuICAgKiBHZXQgdGhlIHBsdWdpbiB0aGF0IHJ1bnMgdGhpcyBhcGlcclxuICAgKi9cclxuICBnZXQgUGx1Z2luKCk6IE1ldGFkYXRhUGx1Z2luO1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIHBsdWdpbiB0aGF0IHJ1bnMgdGhpcyBhcGlcclxuICAgKi9cclxuICBnZXQgcGx1Z2luKCk6IE1ldGFkYXRhUGx1Z2luO1xyXG5cclxuICAvKipcclxuICAgKiBVc2VkIHRvIGZldGNoIHZhcmlvdXMgbWV0YWRhdGEgZm9yIHRoZSBjdXJyZW50IGZpbGUuXHJcbiAgICovXHJcbiAgZ2V0IEN1cnJlbnQoKTogQ3VycmVudEFwaTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXNlZCB0byBmZXRjaCB2YXJpb3VzIG1ldGFkYXRhIGZvciB0aGUgY3VycmVudCBmaWxlLlxyXG4gICAqL1xyXG4gIGdldCBjdXJyZW50KCk6IEN1cnJlbnRBcGk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgTWV0YWRhdGEgZnJvbSB0aGUgZGVmYXVsdCBzb3VyY2VzIGZvciB0aGUgY3VycmVudCBmaWxlLlxyXG4gICAqL1xyXG4gIGdldCBEYXRhKCk6IE1ldGFEYXRhO1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIE1ldGFkYXRhIGZyb20gdGhlIGRlZmF1bHQgc291cmNlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKi9cclxuICBnZXQgZGF0YSgpOiBNZXRhRGF0YTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgZmlsZSBvciBmb2xkZXIgZnJvbSB0aGUgdmF1bHRcclxuICAgKiBcclxuICAgKiBAcGFyYW0ge0ZpbGVTb3VyY2V9IHNvdXJjZSBUaGUgZmlsZS9mb2xkZXIgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBwYXRoIHN0cmluZ1xyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIHRoZSBmb3VuZCBURmlsZSBvciBURm9sZGVyXHJcbiAgICovXHJcbiAgdmF1bHQoc291cmNlOiBGaWxlU291cmNlKTogVEZpbGUgfCBURm9sZGVyIHwgVEFic3RyYWN0RmlsZSB8IG51bGw7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVXNlZCB0byBmZXRjaCB0aGUgXCJPYnNpZGlhbiBNZXRhZGF0YSBGaWxlIENhY2hlXCIgb2JqZWN0IGZyb20gdGhlIG9ic2lkaWFuIGFwaS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge0ZpbGVTb3VyY2V9IHNvdXJjZSBUaGUgZmlsZS9mb2xkZXIgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBwYXRoIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGNhY2hlZCBmaWxlIG1ldGFkYXRhIG9iamVjdCBpZiBpdCBleGlzdHMsIG9yIGFuIGFycmF5IG9mIG9iamVjdHMgaWYgYSBmb2xkZXIgd2FzIHByb3ZpZGVkLlxyXG4gICAqL1xyXG4gIG9tZmMoc291cmNlPzogRmlsZVNvdXJjZSk6IENhY2hlZEZpbGVNZXRhZGF0YSB8IENhY2hlZEZpbGVNZXRhZGF0YVtdIHwgbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgZ2l2ZW4gZmlsZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RmlsZVNvdXJjZX0gc291cmNlIFRoZSBmaWxlL2ZvbGRlciBvYmplY3Qod2l0aCBhIHBhdGggcHJvcGVydHkpIG9yIHRoZSBmdWxsIHBhdGggc3RyaW5nXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBKdXN0IHRoZSBmcm9udG1hdHRlciBmb3IgdGhlIGZpbGUuXHJcbiAgICovXHJcbiAgZnJvbnRtYXR0ZXIoc291cmNlPzogRmlsZVNvdXJjZSk6IEZyb250bWF0dGVyIHwgRnJvbnRtYXR0ZXJbXSB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqdXN0IHRoZSBzZWN0aW9ucyBmb3IgdGhlIGdpdmVuIGZpbGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0ZpbGVTb3VyY2V9IHNvdXJjZSBUaGUgZmlsZS9mb2xkZXIgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBwYXRoIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHJldHVybnMgSnVzdCB0aGUgc2VjdGlvbnMgdW5kZXIgdGhlaXIgaGVhZGluZ3MgZm9yIHRoZSBmaWxlLlxyXG4gICAqL1xyXG4gIHNlY3Rpb25zKHNvdXJjZT86IEZpbGVTb3VyY2UpOiBTZWN0aW9ucyB8IFNlY3Rpb25zW10gfCBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGRhdGF2aWV3IGFwaSB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBmaWxlOyBJbmxpbmUsIGZyb250bWF0dGVyLCBhbmQgdGhlIGZpbGUgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0ZpbGVTb3VyY2V9IHNvdXJjZSBUaGUgZmlsZS9mb2xkZXIgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBwYXRoIHN0cmluZywgb3IgYSBkdiBxdWVyeSBzb3VyY2UuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBKdXN0IHRoZSBkYXRhdmlldygrZnJvbnRtYXR0ZXIpIHZhbHVlcyBmb3IgdGhlIGZpbGUuXHJcbiAgICovXHJcbiAgZHYoc291cmNlPzogRmlsZVNvdXJjZSk6IER2RGF0YSB8IER2RGF0YVtdIHwgbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIChtZXRhZGF0YS1hcGkpIGNhY2hlIGRhdGEgZm9yIGEgZmlsZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RmlsZVNvdXJjZX0gc291cmNlIFRoZSBmaWxlL2ZvbGRlciBvYmplY3Qod2l0aCBhIHBhdGggcHJvcGVydHkpIG9yIHRoZSBmdWxsIHBhdGggc3RyaW5nLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGNhY2hlIGRhdGEgb25seSBmb3IgdGhlIHJlcXVlc3RlZCBmaWxlXHJcbiAgICovXHJcbiAgY2FjaGUoc291cmNlPzogRmlsZVNvdXJjZSk6IENhY2hlIHwgQ2FjaGVbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBkZXNpcmVkIHByb3RvdHlwZXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm90b3R5cGVQYXRoIFRoZSBwYXRoIHRvIHRoZSBwcm90b3R5cGUgZmlsZSBkZXNpcmVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHByb3RvdHlwZXMgaW4gdGhlIGdpdm5lIGZpbGVcclxuICAgKi9cclxuICBwcm90b3R5cGVzKHByb3RvdHlwZVBhdGg6IHN0cmluZyk6IEZyb250bWF0dGVyIHwgRnJvbnRtYXR0ZXJbXSB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgZGVzaXJlZCB2YWx1ZXMgZnJvbSBkYXRhIHN0b3JhZ2VcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhUGF0aCBUaGUgcGF0aCB0byB0aGUgZGF0YSBmaWxlIGRlc2lyZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgeWFtbCBkYXRhIHN0b3JlZCBpbiB0aGUgZ2l2bmUgZmlsZVxyXG4gICAqL1xyXG4gIHZhbHVlcyhkYXRhUGF0aDogc3RyaW5nKTogRnJvbnRtYXR0ZXIgfCBGcm9udG1hdHRlcltdIHwgbnVsbDsgIFxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIE1ldGFkYXRhIGZvciBhIGdpdmVuIGZpbGUgdXNpbmcgdGhlIHN1cHBsaWVkIHNvdXJjZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0ZpbGVTb3VyY2V9IHNvdXJjZSBUaGUgZmlsZS9mb2xkZXIgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBwYXRoIHN0cmluZy5cclxuICAgKiBAcGFyYW0ge2Jvb2x8TWV0YWRhdGFTb3VyY2VzfSBzb3VyY2VzIFRoZSBzb3VyY2VzIHRvIGdldCBtZXRhZGF0YSBmcm9tLiBEZWZhdWx0cyB0byBhbGwuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgcmVxdWVzdGVkIG1ldGFkYXRhXHJcbiAgICovXHJcbiAgZ2V0KHNvdXJjZT86IEZpbGVTb3VyY2UsIHNvdXJjZXM/OiBNZXRhZGF0YVNvdXJjZXMgfCBib29sZWFuKTogTWV0YURhdGEgfCBNZXRhRGF0YVtdIHwgbnVsbDtcclxuICBcclxuICAvKipcclxuICAgKiBQYXRjaCBpbmRpdmlkdWFsIHByb3BlcnRpZXMgb2YgdGhlIGZyb250bWF0dGVyIG1ldGFkYXRhLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZSBUaGUgbmFtZSBvZiB0aGUgZmlsZSBvciB0aGUgZmlsZSBvYmplY3Qgd2l0aCBhIHBhdGhcclxuICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIGFueT58YW55fSBmcm9udG1hdHRlckRhdGEgVGhlIHByb3BlcnRpZXMgdG8gcGF0Y2guIFRoaXMgY2FuIHBhdGNoIHByb3BlcnRpZXMgbXVsdGlwbGUga2V5cyBkZWVwIGFzIHdlbGwuIElmIGEgcHJvcGVydHlOYW1lIGlzIHByb3ZpZGVkIHRoZW4gdGhpcyBlbnRpcmUgb2JqZWN0L3ZhbHVlIGlzIHNldCB0byB0aGF0IHNpbmdsZSBwcm9wZXJ0eSBuYW1lIGluc3RlYWRcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBwcm9wZXJ0eU5hbWUgKE9wdGlvbmFsKSBJZiB5b3Ugd2FudCB0byBzZXQgdGhlIGVudGlyZSBmcm9udG1hdHRlckRhdGEgcGFyYW1ldGVyIHZhbHVlIHRvIGEgc2luZ2xlIHByb3BlcnR5LCBzcGVjaWZ5IHRoZSBuYW1lIG9mIHRoYXQgcHJvcGVydHkgaGVyZS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB0b1ZhbHVlc0ZpbGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSB2YWx1ZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHBhdGNoIHNhaWQgZGF0YSB2YWx1ZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyB0aGUgcGF0aCBpbiBoZXJlIGluc3RlYWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gcHJvdG90eXBlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgcHJvdG90eXBlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gcGF0Y2ggc2FpZCBkYXRhIHByb3RvdHlwZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyBpbiB0aGUgcGF0aCBoZXJlIGluc3RlYWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YS5cclxuICAgKi9cclxuICBwYXRjaChmaWxlOiBGaWxlSXRlbSwgZnJvbnRtYXR0ZXJEYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgYW55LCBwcm9wZXJ0eU5hbWU/OiBzdHJpbmcgfCBudWxsLCBvcHRpb25zPzogVXBkYXRlT3B0aW9ucyk6IHZvaWQ7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZSB0aGUgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgb2YgYSBmaWxlIHdpdGggZW50aXJlbHkgbmV3IGRhdGEsIGNsZWFyaW5nIG91dCBhbGwgb2xkIGRhdGEgaW4gdGhlIHByb2Nlc3MuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBmaWxlIFRoZSBuYW1lIG9mIHRoZSBmaWxlIG9yIHRoZSBmaWxlIG9iamVjdCB3aXRoIGEgcGF0aFxyXG4gICAqIEBwYXJhbSB7RnJvbnRtYXR0ZXJ9IGZyb250bWF0dGVyRGF0YSBUaGUgZW50aXJlIGZyb250bWF0dGVyIGhlYWRlciB0byBzZXQgZm9yIHRoZSBmaWxlLiBUaGlzIGNsZWFycyBhbmQgcmVwbGFjZXMgYWxsIGV4aXN0aW5nIGRhdGEhXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gdG9WYWx1ZXNGaWxlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgdmFsdWUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBzZXQgdG8gc2FpZCBkYXRhIHZhbHVlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIHRoZSBwYXRoIGluIGhlcmUgaW5zdGVhZC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBwcm90b3R5cGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSBwcm90b3R5cGUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBzZXQgdG8gc2FpZCBkYXRhIHByb3RvdHlwZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyBpbiB0aGUgcGF0aCBoZXJlIGluc3RlYWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YVxyXG4gICAqL1xyXG4gIHNldChmaWxlOiBGaWxlSXRlbSwgZnJvbnRtYXR0ZXJEYXRhOiBhbnksIG9wdGlvbnM/OiB7dG9WYWx1ZXNGaWxlPzogYm9vbGVhbiB8IHN0cmluZywgcHJvdG90eXBlPzogc3RyaW5nIHwgYm9vbGVhbn0pOiB2b2lkO1xyXG5cclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNsZWFyIHZhbHVlcyBmcm9tIG1ldGFkYXRhLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZSBUaGUgZmlsZSB0byBjbGVhciBwcm9wZXJ0aWVzIGZvci4gZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fFJlY29yZDxzdHJpbmcsIGFueT58bnVsbH0gZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzIChvcHRpb25hbClUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHksIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLCBvciBhbiBvYmplY3Qgd2l0aCB0aGUgbmFtZWQga2V5cyB5b3Ugd2FudCBjbGVhcmVkLiBJZiBsZWZ0IGJsYW5rLCBhbGwgZnJvbnRtYXR0ZXIgZm9yIHRoZSBmaWxlIGlzIGNsZWFyZWQhXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gdG9WYWx1ZXNGaWxlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgdmFsdWUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBjbGVhciBmcm9tIHNhaWQgZGF0YSB2YWx1ZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyB0aGUgcGF0aCBpbiBoZXJlIGluc3RlYWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gcHJvdG90eXBlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgcHJvdG90eXBlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gY2xlYXIgZnJvbSBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKi9cclxuICBjbGVhcihmaWxlPzogRmlsZUl0ZW0sIGZyb250bWF0dGVyUHJvcGVydGllcz86IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCwgb3B0aW9ucz86IHt0b1ZhbHVlc0ZpbGU/OiBib29sZWFuIHwgc3RyaW5nLCBwcm90b3R5cGU/OiBzdHJpbmcgfCBib29sZWFufSk6IHZvaWQ7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVHVybiBhIHJlbGF0aXZlIHBhdGggaW50byBhIGZ1bGwgcGF0aFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBUaGUgcmVsYXRpdmUgcGF0aCB0byBtYXAgdG8uIFdpbGwgcHJlZm9ybSBpbW1lZGlhdGUgc2VhcmNoIGlmIGl0IHN0YXJ0cyB3aXRoID8uXHJcbiAgICogQHBhcmFtIGV4dGVuc2lvbiBUaGUgZXh0ZW5zaW9uIHRvIGFkZC4gRGVmYXVsdHMgdG8gbm8gZXh0ZW5zaW9uIChmYWxzZS9lbXB0eSkuIElmIHRydWUgaXMgcGFzc2VkIGluIC5tZCB3aWxsIGJlIGFkZGVkLlxyXG4gICAqIEBwYXJhbSByb290Rm9sZGVyIChPcHRpb25hbCkgVGhlIHJvb3QgZm9sZGVyIHBhdGggdGhlIHJlbGF0aXZlIHBhdGggaXMgcmVsYXRpdmUgdG9vLiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBub3RlJ3MgZm9sZGVyXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgZnVsbCBmaWxlIHBhdGguXHJcbiAgICovXHJcbiAgcGF0aChyZWxhdGl2ZVBhdGg/OiBzdHJpbmcgfCBudWxsLCBleHRlbnNpb24/OiBzdHJpbmcgfCBib29sZWFuLCByb290Rm9sZGVyPzogc3RyaW5nIHwgbnVsbCk6IHN0cmluZ1xyXG59XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciB0aGUgY3VycmVudCBub3RlIHdpdGhpbiB0aGUgYXBpXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEN1cnJlbnRBcGkge1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIE1ldGFkYXRhIGZyb20gdGhlIGRlZmF1bHQgc291cmNlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKi9cclxuICBnZXQgRGF0YSgpOiBNZXRhRGF0YTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBNZXRhZGF0YSBmcm9tIHRoZSBkZWZhdWx0IHNvdXJjZXMgZm9yIHRoZSBjdXJyZW50IGZpbGUuXHJcbiAgICovXHJcbiAgZ2V0IGRhdGEoKTogTWV0YURhdGE7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgbm90ZSBmb2N1c2VkIGJ5IHRoZSB3b3Jrc3BhY2UuXHJcbiAgICovXHJcbiAgZ2V0IE5vdGUoKTogVEZpbGU7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgbm90ZSBmb2N1c2VkIGJ5IHRoZSB3b3Jrc3BhY2UuXHJcbiAgICovXHJcbiAgZ2V0IG5vdGUoKTogVEZpbGU7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBjdXJyZW50IHBhdGggb2YgdGhlIGN1cnJlbnQgbm90ZVxyXG4gICAqL1xyXG4gIGdldCBQYXRoKCk6IHN0cmluZztcclxuICBcclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBwYXRoIG9mIHRoZSBjdXJyZW50IG5vdGVcclxuICAgKi9cclxuICBnZXQgcGF0aCgpOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBjdXJyZW50IHBhdGggb2YgdGhlIGN1cnJlbnQgbm90ZSB3aXRoIGl0J3MgZXh0ZW5zaW9uXHJcbiAgICovXHJcbiAgZ2V0IFBhdGhFeCgpOiBzdHJpbmc7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgcGF0aCBvZiB0aGUgY3VycmVudCBub3RlIHdpdGggaXQncyBleHRlbnNpb25cclxuICAgKi9cclxuICBnZXQgcGF0aGV4KCk6IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIGZyb250bWF0dGVyIG9mIHRoZSBjdXJyZW50IGZpbGVcclxuICAgKi9cclxuICBnZXQgTWF0dGVyKCk6IEZyb250bWF0dGVyO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEdldCBqdXN0IHRoZSBmcm9udG1hdHRlciBvZiB0aGUgY3VycmVudCBmaWxlXHJcbiAgICovXHJcbiAgZ2V0IG1hdHRlcigpOiBGcm9udG1hdHRlcjtcclxuXHJcbiAgLyoqXHJcbiAgICogQWNjZXNzIHRoZSBjYWNoZWQgdmFsZXMgZm9yIHRoZSBjdXJyZW50IGZpbGUgb25seS5cclxuICAgKi9cclxuICBnZXQgQ2FjaGUoKTogQ2FjaGU7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjY2VzcyB0aGUgY2FjaGVkIHZhbGVzIGZvciB0aGUgY3VycmVudCBmaWxlIG9ubHkuXHJcbiAgICovXHJcbiAgZ2V0IGNhY2hlKCk6IENhY2hlO1xyXG5cclxuICAvKipcclxuICAgKiBBY2Nlc3MgdGhlIHNlY3Rpb25zIGZvciB0aGUgY3VycmVudCBmaWxlIG9ubHkuXHJcbiAgICovXHJcbiAgZ2V0IFNlY3Rpb25zKCk6IFNlY3Rpb25zO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEFjY2VzcyB0aGUgc2VjdGlvbnMgZm9yIHRoZSBjdXJyZW50IGZpbGUgb25seS5cclxuICAgKi9cclxuICBnZXQgc2VjdGlvbnMoKTogU2VjdGlvbnM7XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhdGNoIGluZGl2aWR1YWwgcHJvcGVydGllcyBvZiB0aGUgY3VycmVudCBmaWxlJ3MgZnJvbnRtYXR0ZXIgbWV0YWRhdGEuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIGFueT58YW55fSBmcm9udG1hdHRlckRhdGEgVGhlIHByb3BlcnRpZXMgdG8gcGF0Y2guIFRoaXMgY2FuIHBhdGNoIHByb3BlcnRpZXMgbXVsdGlwbGUga2V5cyBkZWVwIGFzIHdlbGwuIElmIGEgcHJvcGVydHlOYW1lIGlzIHByb3ZpZGVkIHRoZW4gdGhpcyBlbnRpcmUgb2JqZWN0L3ZhbHVlIGlzIHNldCB0byB0aGF0IHNpbmdsZSBwcm9wZXJ0eSBuYW1lIGluc3RlYWRcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBwcm9wZXJ0eU5hbWUgKE9wdGlvbmFsKSBJZiB5b3Ugd2FudCB0byBzZXQgdGhlIGVudGlyZSBmcm9udG1hdHRlckRhdGEgcGFyYW1ldGVyIHZhbHVlIHRvIGEgc2luZ2xlIHByb3BlcnR5LCBzcGVjaWZ5IHRoZSBuYW1lIG9mIHRoYXQgcHJvcGVydHkgaGVyZS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB0b1ZhbHVlc0ZpbGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSB2YWx1ZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHBhdGNoIHNhaWQgZGF0YSB2YWx1ZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyB0aGUgcGF0aCBpbiBoZXJlIGluc3RlYWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gcHJvdG90eXBlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgcHJvdG90eXBlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gcGF0Y2ggc2FpZCBkYXRhIHByb3RvdHlwZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyBpbiB0aGUgcGF0aCBoZXJlIGluc3RlYWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YS5cclxuICAgKi9cclxuICBwYXRjaChmcm9udG1hdHRlckRhdGE6IGFueSwgcHJvcGVydHlOYW1lPzogc3RyaW5nIHwgbnVsbCwgb3B0aW9ucz86IHt0b1ZhbHVlc0ZpbGU/OiBib29sZWFuIHwgc3RyaW5nLCBwcm90b3R5cGU/OiBzdHJpbmcgfCBib29sZWFufSk6IHZvaWQ7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZSB0aGUgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgdGhlIGN1cnJlbnQgZmlsZSB3aXRoIGVudGlyZWx5IG5ldyBkYXRhLCBjbGVhcmluZyBvdXQgYWxsIG9sZCBkYXRhIGluIHRoZSBwcm9jZXNzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGcm9udG1hdHRlcn0gZnJvbnRtYXR0ZXJEYXRhIFRoZSBlbnRpcmUgZnJvbnRtYXR0ZXIgaGVhZGVyIHRvIHNldCBmb3IgdGhlIGZpbGUuIFRoaXMgY2xlYXJzIGFuZCByZXBsYWNlcyBhbGwgZXhpc3RpbmcgZGF0YSFcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB0b1ZhbHVlc0ZpbGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSB2YWx1ZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHNldCB0byBzYWlkIGRhdGEgdmFsdWUgZmlsZS4gWW91IGNhbiBhbHNvIHBhc3MgdGhlIHBhdGggaW4gaGVyZSBpbnN0ZWFkLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHByb3RvdHlwZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHByb3RvdHlwZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHNldCB0byBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIE1ldGFkYXRhXHJcbiAgICovXHJcbiAgc2V0KGZyb250bWF0dGVyRGF0YTogYW55LCBvcHRpb25zPzoge3RvVmFsdWVzRmlsZT86IGJvb2xlYW4gfCBzdHJpbmcsIHByb3RvdHlwZT86IHN0cmluZyB8IGJvb2xlYW59KTogdm9pZDtcclxuICBcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNsZWFyIHZhbHVlcyBmcm9tIG1ldGFkYXRhLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfSBmaWxlIFRoZSBmaWxlIHRvIGNsZWFyIHByb3BlcnRpZXMgZm9yLiBkZWZhdWx0cyB0byB0aGUgY3VycmVudCBmaWxlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz58UmVjb3JkPHN0cmluZywgYW55PnxudWxsfSBmcm9udG1hdHRlclByb3BlcnRpZXMgKG9wdGlvbmFsKVRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSwgYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMsIG9yIGFuIG9iamVjdCB3aXRoIHRoZSBuYW1lZCBrZXlzIHlvdSB3YW50IGNsZWFyZWQuIElmIGxlZnQgYmxhbmssIGFsbCBmcm9udG1hdHRlciBmb3IgdGhlIGZpbGUgaXMgY2xlYXJlZCFcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB0b1ZhbHVlc0ZpbGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSB2YWx1ZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIGNsZWFyIGZyb20gc2FpZCBkYXRhIHZhbHVlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIHRoZSBwYXRoIGluIGhlcmUgaW5zdGVhZC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBwcm90b3R5cGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSBwcm90b3R5cGUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBjbGVhciBmcm9tIHNhaWQgZGF0YSBwcm90b3R5cGUgZmlsZS4gWW91IGNhbiBhbHNvIHBhc3MgaW4gdGhlIHBhdGggaGVyZSBpbnN0ZWFkLlxyXG4gICAqL1xyXG4gIGNsZWFyKGZyb250bWF0dGVyUHJvcGVydGllcz86IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBvYmplY3QgfCBudWxsLCBvcHRpb25zPzoge3RvVmFsdWVzRmlsZT86IGJvb2xlYW4gfCBzdHJpbmcsIHByb3RvdHlwZT86IHN0cmluZyB8IGJvb2xlYW59KTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YXRpYyBBcGkgYWNjZXNzZWQgdGhyb3VnaCBcIk1ldGFkYXRhXCIgZ2xvYmFsIGNhbGxzXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTdGF0aWNNZXRhQXBpID0ge1xyXG4gIFtrZXk6IHN0cmluZyB8IG51bWJlciB8IHN5bWJvbF06IGFueTtcclxuICBDb21wb25lbnRzPzogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICBTZWN0aW9uQ29tcG9uZW50cz86IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgQXBpOiBNZXRhZGF0YUFwaTtcclxuICBQbHVnaW46IE1ldGFkYXRhUGx1Z2luXHJcbn1cclxuXHJcbi8vI2VuZHJlZ2lvblxyXG5cclxuLy8jcmVnaW9uIFNlY3Rpb25zXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRpbmcge1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgdGV4dCBvZiB0aGUgaGVhZGluZy9zZWN0aW9uIHRpdGxlLiAod2l0aG91dCB0aGUgI3MpXHJcbiAgICovXHJcbiAgZ2V0IFRleHQoKTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgdGV4dCBvZiB0aGUgaGVhZGluZy9zZWN0aW9uIHRpdGxlLiAod2l0aG91dCB0aGUgI3MpXHJcbiAgICovXHJcbiAgZ2V0IHRleHQoKTogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhlYWRpbmcgKGlmIHRoZXJlJ3MgYW5vdGhlciBoZWFkaW5nIHdpdGggdGhlIHNhbWUgbmFtZSB0aGlzIGdldHMgaW5jcmVtZW5ldGVkLilcclxuICAgKi9cclxuICBnZXQgaW5kZXgoKTogbnVtYmVyO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhlYWRpbmcgKGlmIHRoZXJlJ3MgYW5vdGhlciBoZWFkaW5nIHdpdGggdGhlIHNhbWUgbmFtZSB0aGlzIGdldHMgaW5jcmVtZW5ldGVkLilcclxuICAgKi9cclxuICBnZXQgSW5kZXgoKTogbnVtYmVyO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgZGVwdGgvbGV2ZWwgb2YgdGhlIGhlYWRpbmcvVGhlIG51bWJlciBvZiAjcyBpbiB0aGUgaGVhZGVyLlxyXG4gICAqL1xyXG4gIGdldCBMZXZlbCgpOiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZXB0aC9sZXZlbCBvZiB0aGUgaGVhZGluZy9UaGUgbnVtYmVyIG9mICNzIGluIHRoZSBoZWFkZXIuXHJcbiAgICovXHJcbiAgZ2V0IGxldmVsKCk6IG51bWJlcjtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHBsYWluLXRleHQgbWFya2Rvd24gb2YgdGhlIHNlY3Rpb24ncyBoZWFkZXIgUHJlLXByb2Nlc3NlZCwgd2l0aCB0aGUgIyNzXHJcbiAgICovXHJcbiAgZ2V0IG1kKCk6IHN0cmluZztcclxuXHJcbiAgLyoqICBcclxuICAgKiBUaGUgcGxhaW4tdGV4dCBtYXJrZG93biBvZiB0aGUgc2VjdGlvbidzIGhlYWRlciBQcmUtcHJvY2Vzc2VkLCB3aXRoIHRoZSAjI3NcclxuICAgKi9cclxuICBnZXQgTWQoKTogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogSW5mb3JtYXRpb24gYWJvdXQgYSBzZWN0aW9uIG9mIGEgbm90ZVxyXG4gKi9cclxuaW50ZXJmYWNlIFNlY3Rpb25JbmZvIHtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGtleXMgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBhbmQgYWNjZXNzIHRoaXMgc2VjdGlvbi5cclxuICAgKi9cclxuICBnZXQgS2V5cygpOiBzdHJpbmdbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGtleXMgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSBhbmQgYWNjZXNzIHRoaXMgc2VjdGlvbi5cclxuICAgKi9cclxuICBnZXQga2V5cygpOiBzdHJpbmdbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBzdWItc2VjdGlvbnMgZGlyZWN0bHkgd2l0aGluIHRoaXMgc2VjdGlvbi5cclxuICAgKi9cclxuICBnZXQgQ291bnQoKTogbnVtYmVyO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIHN1Yi1zZWN0aW9ucyBkaXJlY3RseSB3aXRoaW4gdGhpcyBzZWN0aW9uLlxyXG4gICAqL1xyXG4gIGdldCBjb3VudCgpOiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBzZWN0aW9uIHRoYXQgY29udGFpbnMgdGhpcyBvbmUsIGlmIHRoZXJlIGlzIG9uZS4gSWYgbm90IHRoaXMgaXMgYSByb290IHNlY3Rpb24uXHJcbiAgICovXHJcbiAgZ2V0IENvbnRhaW5lcigpOiBTZWN0aW9uIHwgbnVsbDtcclxuICBcclxuICAvKipcclxuICAgKiBUaGUgc2VjdGlvbiB0aGF0IGNvbnRhaW5zIHRoaXMgb25lLCBpZiB0aGVyZSBpcyBvbmUuIElmIG5vdCB0aGlzIGlzIGEgcm9vdCBzZWN0aW9uLlxyXG4gICAqL1xyXG4gIGdldCBjb250YWluZXIoKTogU2VjdGlvbiB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBzdWItc2VjdGlvbnMgZGlyZWN0bHkgdW5kZXIgdGhpcyBzZWN0aW9uLlxyXG4gICAqL1xyXG4gIGdldCBTZWN0aW9ucygpOiBSZWNvcmQ8c3RyaW5nLCBTZWN0aW9uW10+O1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgc3ViLXNlY3Rpb25zIGRpcmVjdGx5IHVuZGVyIHRoaXMgc2VjdGlvbi5cclxuICAgKi9cclxuICBnZXQgc2VjdGlvbnMoKTogUmVjb3JkPHN0cmluZywgU2VjdGlvbltdPjtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHVuaXF1ZSBzdWItdGl0bGVzL2hlYWRpbmdzIGRpcmVjdGx5IHVuZGVyIHRoaXMgc2VjdGlvbiBoZWFkaW5nIChub3Qgc3ViLXN1YiBoZWFkaW5ncylcclxuICAgKi9cclxuICBnZXQgc3VidGl0bGVzKCk6IEhlYWRpbmdbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHVuaXF1ZSBzdWItdGl0bGVzL2hlYWRpbmdzIGRpcmVjdGx5IHVuZGVyIHRoaXMgc2VjdGlvbiBoZWFkaW5nIChub3Qgc3ViLXN1YiBoZWFkaW5ncylcclxuICAgKi9cclxuICBnZXQgU3VidGl0bGVzKCk6IEhlYWRpbmdbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCB0aGUgdW5pcXVlIHN1Yi1zZWN0aW9ucyBpbiB0aGlzIHNlY3Rpb24uXHJcbiAgICovXHJcbiAgZ2V0IHVuaXF1ZSgpOiBTZWN0aW9uW107XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgdGhlIHVuaXF1ZSBzdWItc2VjdGlvbnMgaW4gdGhpcyBzZWN0aW9uLlxyXG4gICAqL1xyXG4gIGdldCBVbmlxdWUoKTogU2VjdGlvbltdO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgU2VjdGlvbnMgb2JqZWN0IHVzZWQgdG8gYnVpbGQgdGhlIHNlY3Rpb25zIGluIHRoZSBmaWxlIHRoaXMgc2VjdGlvbiBpcyBmcm9tLlxyXG4gICAqIENvbnRhaW5zIGluZm8gYWJvdXQgdGhlIG5vdGUvZmlsZS5cclxuICAgKi9cclxuICBnZXQgUm9vdCgpOiBTZWN0aW9ucztcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIFNlY3Rpb25zIG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBzZWN0aW9ucyBpbiB0aGUgZmlsZSB0aGlzIHNlY3Rpb24gaXMgZnJvbS5cclxuICAgKiBDb250YWlucyBpbmZvIGFib3V0IHRoZSBub3RlL2ZpbGUuXHJcbiAgICovXHJcbiAgZ2V0IHJvb3QoKTogU2VjdGlvbnM7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkaXJlY3QgY29kZSBvZiB0aGUgaGVhZGVyLCB3aXRoIHRoZSAjc1xyXG4gICAqL1xyXG4gIGdldCBoZWFkZXIoKTogSGVhZGluZztcclxuICBcclxuICAvKipcclxuICAgKiBUaGUgZGlyZWN0IGNvZGUgb2YgdGhlIGhlYWRlciwgd2l0aCB0aGUgI3NcclxuICAgKi9cclxuICBnZXQgSGVhZGVyKCk6IEhlYWRpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIChBc3luYyEpIFxyXG4gICAqIFRoZSBwbGFpbi10ZXh0IG1hcmtkb3duIG9mIHRoZSBzZWN0aW9uJ3MgZW50aXJlIGNvbnRlbnRzLiBQcmUtcHJvY2Vzc2VkLlxyXG4gICAqIFRoaXMgY29udGFpbnMgYWxsIHN1Yi1zZWN0aW9uIHRleHQgYW5kIGhlYWRlcnMgYXMgd2VsbC5cclxuICAgKi9cclxuICBnZXQgbWQoKTogUHJvbWlzZTxzdHJpbmc+O1xyXG5cclxuICAvKipcclxuICAgKiAoQXN5bmMhKSBcclxuICAgKiBUaGUgcGxhaW4tdGV4dCBtYXJrZG93biBvZiB0aGUgc2VjdGlvbidzIGVudGlyZSBjb250ZW50cy4gUHJlLXByb2Nlc3NlZC5cclxuICAgKiBUaGlzIGNvbnRhaW5zIGFsbCBzdWItc2VjdGlvbiB0ZXh0IGFuZCBoZWFkZXJzIGFzIHdlbGwuXHJcbiAgICovXHJcbiAgZ2V0IE1kKCk6IFByb21pc2U8c3RyaW5nPjtcclxuXHJcbiAgLyoqXHJcbiAgICogKEFzeW5jISkgXHJcbiAgICogVGhlIGh0bWwgZWxlbWVudCByZW5kZXJlZCBmcm9tIHRoZSBtYXJrZG93biBiYXNlZCBvbiBhbGwgb2Ygb2JzaWRpYW4ncyByZW5kZXJpbmcgcGFzc2VzLlxyXG4gICAqL1xyXG4gIGdldCBodG1sKCk6IFByb21pc2U8SFRNTEVsZW1lbnQ+O1xyXG5cclxuICAvKipcclxuICAgKiAoQXN5bmMhKSBcclxuICAgKiBUaGUgaHRtbCBlbGVtZW50IHJlbmRlcmVkIGZyb20gdGhlIG1hcmtkb3duIGJhc2VkIG9uIGFsbCBvZiBvYnNpZGlhbidzIHJlbmRlcmluZyBwYXNzZXMuXHJcbiAgICovXHJcbiAgZ2V0IEh0bWwoKTogUHJvbWlzZTxIVE1MRWxlbWVudD47XHJcblxyXG4gIC8qKlxyXG4gICAqIChBc3luYyEpIFxyXG4gICAqIEdldCB0aGUgcGxhaW4gdGV4dCB2ZXJzaW9uIG9mIHRoZSBwcm9jZXNzZWQgbWFya2Rvd24vaHRtbC5cclxuICAgKi9cclxuICBnZXQgVHh0KCk6IFByb21pc2U8c3RyaW5nPjtcclxuXHJcbiAgLyoqXHJcbiAgICogKEFzeW5jISkgXHJcbiAgICogR2V0IHRoZSBwbGFpbiB0ZXh0IHZlcnNpb24gb2YgdGhlIHByb2Nlc3NlZCBtYXJrZG93bi9odG1sLlxyXG4gICAqL1xyXG4gIGdldCB0eHQoKTogUHJvbWlzZTxzdHJpbmc+O1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgcGF0aCBvZiB0aGUgbm90ZSB0aGlzIHNlY3Rpb24gaXMgZnJvbSB3aXRoIHRoZSBoZWFkZXIgYXBwZW5kZWQgYWZ0ZXIgYSAjXHJcbiAgICovXHJcbiAgZ2V0IHBhdGgoKTogc3RyaW5nO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIG9mIHRoZSBub3RlIHRoaXMgc2VjdGlvbiBpcyBmcm9tIHdpdGggdGhlIGhlYWRlciBhcHBlbmRlZCBhZnRlciBhICNcclxuICAgKi9cclxuICBnZXQgUGF0aCgpOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgdW5pcXVlIGtleS9pZGVudGlmaWVyIGZvciB0aGlzIHNlY3Rpb24gb3V0IG9mIGFsbCBub3RlcyBhbmQgc2VjdGlvbnMuXHJcbiAgICovXHJcbiAgZ2V0IElkKCk6IHN0cmluZztcclxuICBcclxuICAvKipcclxuICAgKiBBIHVuaXF1ZSBrZXkvaWRlbnRpZmllciBmb3IgdGhpcyBzZWN0aW9uIG91dCBvZiBhbGwgbm90ZXMgYW5kIHNlY3Rpb25zLlxyXG4gICAqL1xyXG4gIGdldCBpZCgpOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdWItc2VjdGlvbnMgb2YgYSBub3RlIHNlY3Rpb25cclxuICovXHJcbmludGVyZmFjZSBTZWN0aW9uQ2hpbGRyZW4ge1xyXG4gIC8qKlxyXG4gICAqIEEgc3ViLXNlY3Rpb24gb2YgdGhpcyBzZWN0aW9uLlxyXG4gICAqL1xyXG4gIFtrZXk6IHN0cmluZ106IFNlY3Rpb25cclxufVxyXG5cclxuLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiBzZWN0aW9ucyBpbiBhIG5vdGUsIGFuZCB0aGUgZGF0YSB0byBmZXRjaCB0aGVtLlxyXG4gKi9cclxuaW50ZXJmYWNlIFNlY3Rpb25zTm90ZURhdGEge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBwYXRoIHRvIHRoZSBub3RlIGZvciB0aGVzZSBzZWN0aW9uc1xyXG4gICAqL1xyXG4gIGdldCBwYXRoKCk6IHN0cmluZztcclxuICAvKipcclxuICAgKiBUaGUgcGF0aCB0byB0aGUgbm90ZSBmb3IgdGhlc2Ugc2VjdGlvbnNcclxuICAgKi9cclxuICBnZXQgUGF0aCgpOiBzdHJpbmc7XHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiB0b3RhbCBzZWN0aW9ucywgYW5kIHN1YiBzZWN0aW9ucy5cclxuICAgKi9cclxuICBnZXQgY291bnQoKTogbnVtYmVyO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBudW1iZXIgb2YgdG90YWwgc2VjdGlvbnMsIGFuZCBzdWIgc2VjdGlvbnMuXHJcbiAgICovXHJcbiAgZ2V0IENvdW50KCk6IG51bWJlcjtcclxuICAvKipcclxuICAgKiBBbGwgc2VjdGlvbnMgYW5kIHN1Yi1zZWN0aW9ucyBpbiB0aGUgZmlsZSwgaW5kZXhlZCBieSBuYW1lLiB2YWx1ZXMgYXJlIGluIGFycmF5cyBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBoZWFkaW5nc1xyXG4gICAqL1xyXG4gIGdldCBhbGwoKTogUmVjb3JkPHN0cmluZywgU2VjdGlvbltdPjtcclxuICAvKipcclxuICAgKiBBbGwgc2VjdGlvbnMgYW5kIHN1Yi1zZWN0aW9ucyBpbiB0aGUgZmlsZSwgaW5kZXhlZCBieSBuYW1lLiB2YWx1ZXMgYXJlIGluIGFycmF5cyBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBoZWFkaW5nc1xyXG4gICAqL1xyXG4gIGdldCBBbGwoKTogUmVjb3JkPHN0cmluZywgU2VjdGlvbltdPjtcclxuICAvKipcclxuICAgKiBBbGwgaGlnaGVzdCBsZXZlbC9yb290IHNlY3Rpb25zIChub3Qgc3ViLXNlY3Rpb25zKSBpbiB0aGUgZmlsZSwgaW5kZXhlZCBieSBuYW1lLiB2YWx1ZXMgYXJlIGluIGFycmF5cyBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBoZWFkaW5nc1xyXG4gICAqL1xyXG4gIGdldCByb290KCk6IFJlY29yZDxzdHJpbmcsIFNlY3Rpb25bXT47XHJcbiAgLyoqXHJcbiAgICogQWxsIGhpZ2hlc3QgbGV2ZWwvcm9vdCBzZWN0aW9ucyAobm90IHN1Yi1zZWN0aW9ucykgaW4gdGhlIGZpbGUsIGluZGV4ZWQgYnkgbmFtZS4gdmFsdWVzIGFyZSBpbiBhcnJheXMgaW4gY2FzZSBvZiBkdXBsaWNhdGUgaGVhZGluZ3NcclxuICAgKi9cclxuICBnZXQgUm9vdCgpOiBSZWNvcmQ8c3RyaW5nLCBTZWN0aW9uW10+O1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bmlxdWUgaGVhZGVycyBhbmQgc3ViLWhlYWRlcnMgaW4gdGhpcyBmaWxlXHJcbiAgICovXHJcbiAgZ2V0IEhlYWRlcnMoKTogSGVhZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSB1bmlxdWUgaGVhZGVycyBhbmQgc3ViLWhlYWRlcnMgaW4gdGhpcyBmaWxlXHJcbiAgICovXHJcbiAgZ2V0IGhlYWRlcnMoKTogSGVhZGluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgdGhlIHVuaXF1ZSBzZWN0aW9ucyBpbiB0aGlzIG5vdGUuXHJcbiAgICovXHJcbiAgZ2V0IHVuaXF1ZSgpOiBTZWN0aW9uW107XHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCB0aGUgdW5pcXVlIHNlY3Rpb25zIGluIHRoaXMgbm90ZS5cclxuICAgKi9cclxuICBnZXQgVW5pcXVlKCk6IFNlY3Rpb25bXTtcclxuICBuYW1lZChuYW1lOiBzdHJpbmcpOiBTZWN0aW9uW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbmZvcm1hdGlvbiBhYm91dCBzZWN0aW9ucyBpbiBhIG5vdGUuXHJcbiAqL1xyXG5pbnRlcmZhY2UgU2VjdGlvbnNDb2xsZWN0aW9uIHtcclxuICAvKipcclxuICAgKiBBIHNlY3Rpb24sIGluZGV4ZSBieSBvbmUgb2YgaXQncyBzcGxheWVkIGtleXMuXHJcbiAgICovXHJcbiAgW2tleTogc3RyaW5nXTogU2VjdGlvblxyXG59XHJcblxyXG4vKipcclxuICogQSBzZWN0aW9uIG9mIGEgbm90ZS5cclxuICovXHJcbmV4cG9ydCB0eXBlIFNlY3Rpb24gPSBTZWN0aW9uQ2hpbGRyZW4gJiBTZWN0aW9uSW5mbztcclxuXHJcbi8qKlxyXG4gKiBBbGwgb2YgdGhlIHNlY3Rpb25zIGluIGEgbm90ZS5cclxuICovXHJcbmV4cG9ydCB0eXBlIFNlY3Rpb25zID0gU2VjdGlvbnNDb2xsZWN0aW9uICYgU2VjdGlvbnNOb3RlRGF0YTtcclxuXHJcbi8vI2VuZHJlZ2lvbiIsICJpbXBvcnQgeyBTZWN0aW9ucywgQ2FjaGUsIFNlY3Rpb24sIFBsdWdpbkNvbnRhaW5lciwgU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uLCBIZWFkaW5nIH0gZnJvbSAnLi9hcGknO1xyXG5pbXBvcnQgeyBIZWFkaW5nQ2FjaGUsIE1hcmtkb3duVmlldywgTWFya2Rvd25SZW5kZXJlciwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50YXRpb24gb2YgSGVhZGluZ1xyXG4gKi9cclxuY2xhc3MgU2VjdGlvbkhlYWRlciBpbXBsZW1lbnRzIEhlYWRpbmcge1xyXG4gIHByaXZhdGUgX3RleHQ6IHN0cmluZztcclxuICBwcml2YXRlIF9pbmRleDogbnVtYmVyO1xyXG4gIHByaXZhdGUgX2xldmVsOiBudW1iZXI7XHJcblxyXG4gIGdldCB0ZXh0KCk6IHN0cmluZyB7IHJldHVybiB0aGlzLl90ZXh0OyB9XHJcbiAgZ2V0IFRleHQoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuX3RleHQ7IH1cclxuICBnZXQgaW5kZXgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2luZGV4OyB9XHJcbiAgZ2V0IEluZGV4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9pbmRleDsgfVxyXG4gIGdldCBMZXZlbCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fbGV2ZWw7IH1cclxuICBnZXQgbGV2ZWwoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2xldmVsOyB9XHJcbiAgZ2V0IG1kKCk6IHN0cmluZyB7IHJldHVybiB0aGlzLk1kOyB9XHJcbiAgZ2V0IE1kKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7JyMnLnJlcGVhdCh0aGlzLmxldmVsKX0gJHt0aGlzLnRleHR9YFxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLCBsZXZlbDogbnVtYmVyLCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGV4dDtcclxuICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7XHJcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudGF0aW9uIG9mIFNlY3Rpb25cclxuICovXHJcbmNsYXNzIE5vdGVTZWN0aW9uIGltcGxlbWVudHMgU2VjdGlvbiB7XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBwcml2YXRlIF9yb290XHJcbiAgICA6IE5vdGVTZWN0aW9ucztcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX2h0bWxcclxuICAgIDogSFRNTEVsZW1lbnQgPSBudWxsITtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX21kXHJcbiAgICA6IHN0cmluZyA9IG51bGwhO1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfa2V5c1xyXG4gICAgOiBzdHJpbmdbXSA9IFtdO1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfY291bnRcclxuICAgIDogbnVtYmVyID0gMDtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX3BhcmVudFRpdGxlXHJcbiAgICA6IE5vdGVTZWN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBwcml2YXRlIF9zZWN0aW9uc1xyXG4gICAgOiBSZWNvcmQ8c3RyaW5nLCBOb3RlU2VjdGlvbltdPiA9IHt9O1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfc3VidGl0bGVzXHJcbiAgICA6IEhlYWRpbmdbXSA9IFtdO1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfaGVhZGluZ1xyXG4gICAgOiBIZWFkaW5nO1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfdW5pcXVlXHJcbiAgICA6IFJlY29yZDxzdHJpbmcsIE5vdGVTZWN0aW9uPiA9IHt9O1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgcHJpdmF0ZSBfdGV4dFxyXG4gICAgOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX2lkXHJcbiAgICA6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG4gIFxyXG4gIFtrZXk6IHN0cmluZ106IE5vdGVTZWN0aW9uO1xyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IGtleXMoKVxyXG4gICAgOiBzdHJpbmdbXSB7IHJldHVybiB0aGlzLl9rZXlzOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgS2V5cygpXHJcbiAgICA6IHN0cmluZ1tdIHsgcmV0dXJuIHRoaXMuX2tleXM7IH1cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBjb3VudCgpXHJcbiAgICA6IG51bWJlciB7IHJldHVybiB0aGlzLl9jb3VudDsgfVxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IENvdW50KClcclxuICAgIDogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvdW50OyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgQ29udGFpbmVyKClcclxuICAgIDogTm90ZVNlY3Rpb24gfCBudWxsIHsgcmV0dXJuIHRoaXMuX3BhcmVudFRpdGxlOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgY29udGFpbmVyKClcclxuICAgIDogTm90ZVNlY3Rpb24gfCBudWxsIHsgcmV0dXJuIHRoaXMuX3BhcmVudFRpdGxlOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgU2VjdGlvbnMoKVxyXG4gICAgOiBSZWNvcmQ8c3RyaW5nLCBOb3RlU2VjdGlvbltdPiB7IHJldHVybiB0aGlzLl9zZWN0aW9uczsgfVxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IHNlY3Rpb25zKClcclxuICAgIDogUmVjb3JkPHN0cmluZywgTm90ZVNlY3Rpb25bXT4geyByZXR1cm4gdGhpcy5fc2VjdGlvbnM7IH1cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBSb290KClcclxuICAgIDogTm90ZVNlY3Rpb25zIHsgcmV0dXJuIHRoaXMuX3Jvb3Q7IH1cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCByb290KClcclxuICAgIDogTm90ZVNlY3Rpb25zIHsgcmV0dXJuIHRoaXMuX3Jvb3Q7IH1cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBzdWJ0aXRsZXMoKVxyXG4gICAgOiBIZWFkaW5nW10geyByZXR1cm4gdGhpcy5fc3VidGl0bGVzOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgU3VidGl0bGVzKClcclxuICAgIDogSGVhZGluZ1tdIHsgcmV0dXJuIHRoaXMuX3N1YnRpdGxlczsgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIExvYWQgYW5kIEdldFxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBIZWFkZXIoKVxyXG4gIDogSGVhZGluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVhZGluZztcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IGhlYWRlcigpXHJcbiAgOiBIZWFkaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWFkaW5nO1xyXG4gIH1cclxuXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgTWQoKVxyXG4gIDogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiB0aGlzLm1kO1xyXG4gIH1cclxuICBcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBtZCgpXHJcbiAgICA6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX21kID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5fbWQgPSBhd2FpdCB0aGlzLl9maW5kKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21kO1xyXG4gICAgfSkoKTtcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IEh0bWwoKVxyXG4gIDogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaHRtbDtcclxuICB9XHJcbiAgXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgaHRtbCgpXHJcbiAgICA6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcclxuICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faHRtbCA9PT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IG1kID0gYXdhaXQgdGhpcy5tZDtcclxuICAgICAgICB0aGlzLl9odG1sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVuZGVyTGVhZjogV29ya3NwYWNlTGVhZiA9IGFwcC53b3Jrc3BhY2VcclxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZ1bmN0aW9uIG1pc3NpbmcgZnJvbSBhcGlcclxuICAgICAgICAgIC5jcmVhdGVMZWFmSW5UYWJHcm91cCgpO1xyXG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgTWFya2Rvd25WaWV3KHJlbmRlckxlYWYpO1xyXG4gXHJcbiAgICAgICAgbGV0IGxvY2FsTWQgPSB0aGlzLl9tZDtcclxuICAgICAgICBpZiAodGhpcy5yb290LmdldE1hdHRlcigpKSB7XHJcbiAgICAgICAgICBsb2NhbE1kID0gXCItLS1cIiArIHRoaXMucm9vdC5nZXRNYXR0ZXIoKSArIFwiLS0tXFxuXFxuXCIgKyBsb2NhbE1kO1xyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIHZpZXcuZGF0YSA9IGxvY2FsTWQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vY29uc3Qgc3BlY2lhbENhY2hlID0gUGx1Z2luQ29udGFpbmVyLkluc3RhbmNlLmFwaS5jYWNoZShcIl96cGVjOmF8XCIpIGFzIENhY2hlO1xyXG4gICAgICAgICAgLy9zcGVjaWFsQ2FjaGVbXCJDdXJyZW50UGF0aFwiXSA9IHRoaXMucm9vdC5wYXRoO1xyXG4gICAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcclxuICAgICAgICAgICAgbWQsXHJcbiAgICAgICAgICAgIHRoaXMuX2h0bWwsXHJcbiAgICAgICAgICAgIHRoaXMucm9vdC5wYXRoLFxyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBOdWxsIGlzIHJlcXVpcmVkIGhlcmUsIGJ1dCBjbGFzaGVzIHdpdGggZG9jdW1lbnRhdGlvbi5cclxuICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIC8vc3BlY2lhbENhY2hlW1wiQ3VycmVudFBhdGhcIl0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIHJlbmRlckxlYWYuZGV0YWNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5faHRtbDtcclxuICAgIH0pKCk7XHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBUeHQoKVxyXG4gIDogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiB0aGlzLnR4dDtcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IHR4dCgpXHJcbiAgICA6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX3RleHQgPT09IG51bGwpIHtcclxuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgdGhpcy5odG1sO1xyXG4gICAgICAgIHRoaXMuX3RleHQgPSBodG1sLnRleHRDb250ZW50IHx8IFwiXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLl90ZXh0O1xyXG4gICAgfSkoKTtcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IHBhdGgoKVxyXG4gIDogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9yb290LnBhdGggKyBcIiNcIiArIHRoaXMuaGVhZGVyLnRleHQ7XHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBQYXRoKClcclxuICA6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5wYXRoXHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCB1bmlxdWUoKVxyXG4gIDogTm90ZVNlY3Rpb25bXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLl91bmlxdWUpO1xyXG4gIH1cclxuXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgVW5pcXVlKClcclxuICA6IE5vdGVTZWN0aW9uW10ge1xyXG4gICAgcmV0dXJuIHRoaXMudW5pcXVlOyAgXHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBJZCgpXHJcbiAgOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkID8/PSB0aGlzLmhlYWRlci5pbmRleCArIFwiOnw6XCIgKyB0aGlzLnBhdGggKyBcIjp8OlwiICsgdGhpcy5oZWFkZXIubGV2ZWxcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IGlkKClcclxuICA6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5JZDsgICBcclxuICB9XHJcbiAgICBcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgYXN5bmMgX2ZpbmQoKVxyXG4gICAgOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgZnVsbE5vdGVDb250ZW50cyA9IChhd2FpdCB0aGlzLnJvb3QubG9hZFRleHQoKSkgfHwgXCJcIjtcclxuICAgIGNvbnN0IGhlYWRlck1kID0gdGhpcy5oZWFkZXIuTWQ7XHJcblxyXG4gICAgLy8gZmluZCB0aGUgaGVhZGVycyB0aGF0IG1hdGNoXHJcbiAgICBjb25zdCBoZWFkZXJSZWdFeCA9IG5ldyBSZWdFeHAoYCgoPzpeJHtoZWFkZXJNZH0pfCg/OlxcXFxuJHtoZWFkZXJNZH0pKWAsIFwiZ21cIik7XHJcbiAgICBjb25zdCBtYXRjaGVzID0gZnVsbE5vdGVDb250ZW50cy5tYXRjaEFsbChoZWFkZXJSZWdFeCk7XHJcblxyXG4gICAgaWYgKCFtYXRjaGVzKSB7XHJcbiAgICAgIHRocm93IGBTZWN0aW9uIEhlYWRlcjogXCIke2hlYWRlck1kfVwiLCBub3QgZm91bmQgaW4gZmlsZTogJHt0aGlzLnJvb3QucGF0aH0uYDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXN1bHRzID0gWy4uLm1hdGNoZXNdO1xyXG4gICAgaWYgKCFyZXN1bHRzIHx8ICFyZXN1bHRzLmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBgU2VjdGlvbiBIZWFkZXI6IFwiJHtoZWFkZXJNZH1cIiwgbm90IGZvdW5kIGluIGZpbGU6ICR7dGhpcy5yb290LnBhdGh9LmA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmluZCB0aGUgb25lIGF0IHRoZSBjb3JyZWN0IGluZGV4XHJcbiAgICBjb25zdCByZXN1bHQgPSByZXN1bHRzLmF0KHRoaXMuaGVhZGVyLmluZGV4KTtcclxuICAgIGlmICghcmVzdWx0IHx8ICghcmVzdWx0LmluZGV4ICYmIHJlc3VsdC5pbmRleCAhPT0gMCkpIHtcclxuICAgICAgdGhyb3cgYFNlY3Rpb24gSGVhZGVyOiBcIiR7aGVhZGVyTWR9XCIsIHdpdGggaW5kZXg6ICR7dGhpcy5faW5kZXh9LCBub3QgZm91bmQgaW4gZmlsZTogJHt0aGlzLnJvb3QucGF0aH0uYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5kIHRoZSBzdGFydCBvZiB0aGlzIGhlYWRlcidzIGNvbnRlbnQuXHJcbiAgICBjb25zdCBzdGFydCA9IGZ1bGxOb3RlQ29udGVudHMuaW5kZXhPZihcIlxcblwiLCByZXN1bHQuaW5kZXggKyBoZWFkZXJNZC5sZW5ndGgpO1xyXG4gICAgaWYgKHN0YXJ0ID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5kIHRoZSBlbmRcclxuICAgIGNvbnN0IG1hdGNoID0gZnVsbE5vdGVDb250ZW50cy5zdWJzdHJpbmcoc3RhcnQpLm1hdGNoKG5ldyBSZWdFeHAoYChcXFxcbiNcXHsxLCR7dGhpcy5oZWFkZXIubGV2ZWx9XFx9KWAsIFwibVwiKSk7XHJcbiAgICBpZiAobWF0Y2ggJiYgKG1hdGNoLmluZGV4IHx8IG1hdGNoLmluZGV4ID09PSAwKSkge1xyXG4gICAgICByZXR1cm4gZnVsbE5vdGVDb250ZW50cy5zdWJzdHJpbmcoc3RhcnQgKyAxLCBzdGFydCArIG1hdGNoLmluZGV4KTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdWxsTm90ZUNvbnRlbnRzLnN1YnN0cmluZyhzdGFydCArIDEpO1xyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiBJbml0aWFsaXphdGlvblxyXG5cclxuICBjb25zdHJ1Y3Rvcihub3RlOiBOb3RlU2VjdGlvbnMsIGluZGV4OiBudW1iZXIsIGhlYWRpbmc6IEhlYWRpbmdDYWNoZSkge1xyXG4gICAgdGhpcy5fcm9vdCA9IG5vdGU7XHJcbiAgICB0aGlzLl9oZWFkaW5nID0gbmV3IFNlY3Rpb25IZWFkZXIoXHJcbiAgICAgIGhlYWRpbmcuaGVhZGluZyxcclxuICAgICAgaGVhZGluZy5sZXZlbCxcclxuICAgICAgaW5kZXhcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fa2V5cyA9IE5vdGVTZWN0aW9uLlNwbGF5S2V5cyh0aGlzLl9oZWFkaW5nLnRleHQpO1xyXG4gIH1cclxuXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBhZGRDaGlsZChcclxuICAgIGNoaWxkOiBOb3RlU2VjdGlvblxyXG4gICk6IHZvaWQge1xyXG4gICAgLy8gYWRkIHRvIHN1Yi10aXRsZXNcclxuICAgIHRoaXMuX3N1YnRpdGxlcy5wdXNoKGNoaWxkLmhlYWRlcik7XHJcblxyXG4gICAgLy8gYWRkIHRvIGFsbCBwYXJlbnRzOlxyXG4gICAgbGV0IHBhcmVudDogTm90ZVNlY3Rpb258bnVsbCA9IHRoaXM7XHJcbiAgICB3aGlsZSAocGFyZW50KSB7XHJcbiAgICAgIHBhcmVudC5fdW5pcXVlW2NoaWxkLmlkXSA9IGNoaWxkO1xyXG4gICAgICBwYXJlbnQgPSBwYXJlbnQuY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBhZGQgYWxsIGtleXMgdG8gdGhpcyBvYmplY3RcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIGNoaWxkLmtleXMpIHtcclxuICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICB0aGlzW2tleV0gPSBjaGlsZDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHRoaXMuX3NlY3Rpb25zW2tleV0pIHtcclxuICAgICAgICB0aGlzLl9zZWN0aW9uc1trZXldLnB1c2goY2hpbGQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX3NlY3Rpb25zW2tleV0gPSBbY2hpbGRdO1xyXG4gICAgICB9XHJcbiAgICAgIGNoaWxkLl9wYXJlbnRUaXRsZSA9IHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY291bnQgKz0gMTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBTcGxheUtleXModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qga2V5cyA9IFt0ZXh0XTtcclxuXHJcbiAgICAvLyBjbGVhbiB0aGUga2V5IG9mIGRhdGF2aWV3IHZhbHVlcyBhbmQgd2lraWxpbmtzXHJcbiAgICBsZXQgY2xlYW5lZCA9IHRleHQ7XHJcbiAgICBpZiAoY2xlYW5lZC5jb250YWlucyhcIltcIikpIHtcclxuICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXFtcXFxcWyg/Oig/OihbXlxcXFxdXSopXFxcXHwoW15cXFxcXV0qKSl8KFteXFxcXF1dKikpXFxcXF1cXFxcXVwiLCBcImdcIiksIFwiJDIkM1wiKTtcclxuICAgIH1cclxuICAgIGlmIChjbGVhbmVkLmNvbnRhaW5zKFwiOjpcIikpIHtcclxuICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXFsoPzooPzooW15cXFxcWzpcXFxcfF0qKTo6KFteXFxcXF1dKikpKVxcXFxdfFxcXFwoKD86KD86KFteXFxcXFs6XFxcXHxdKik6OihbXlxcXFxdXSopKSlcXFxcKVwiLCBcImdcIiksIGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7XHJcbiAgICAgICAgcmV0dXJuIGIgPyBgJHtifSAke2N9YCA6IGU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlbW92ZSBzcGVjaWFsIGFuZCBpbGxlZ2FsIG5hbWUgY2hhcmFjdGVyc1xyXG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZShuZXcgUmVnRXhwKFwiKD86KF5bXFxcXGQgXVtee2EtekEtWl9cXFxcLX1dKil8KFtee2EtekEtWjAtOV9cXFxcLVxcXFxcXCQgfV0pKVwiLCBcImdcIiksIFwiXCIpO1xyXG5cclxuICAgIGtleXMucHVzaChjbGVhbmVkKTtcclxuXHJcbiAgICBpZiAoUGx1Z2luQ29udGFpbmVyLkluc3RhbmNlLnNldHRpbmdzLnNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXcpIHtcclxuICAgICAgY29uc3QgY2FtZWwgPSBjbGVhbmVkLnJlcGxhY2UoLyAvZywgXCJcIik7XHJcbiAgICAgIGlmICghY2FtZWwpIHtcclxuICAgICAgICByZXR1cm4ga2V5cy51bmlxdWUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbG93ZXIgPSBjYW1lbC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBsb3dlckNhbWVsID0gY2FtZWxbMF0udG9Mb3dlckNhc2UoKSArIGNhbWVsLnN1YnN0cmluZygxKTtcclxuXHJcbiAgICAgIGtleXMucHVzaChsb3dlciwgY2FtZWwsIGxvd2VyQ2FtZWwpO1xyXG4gICAgICBpZiAoUGx1Z2luQ29udGFpbmVyLkluc3RhbmNlLnNldHRpbmdzLnNwbGF5S2ViYWJDYXNlUHJvcGVydGllcyAmJiBjbGVhbmVkLmNvbnRhaW5zKFwiLVwiKSkge1xyXG4gICAgICAgIGlmIChQbHVnaW5Db250YWluZXIuSW5zdGFuY2Uuc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID09PSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uTG93ZXJBbmRDYW1lbENhc2UpIHtcclxuICAgICAgICAgIC8vIGxvd2VyXHJcbiAgICAgICAgICBrZXlzLnB1c2gobG93ZXIucmVwbGFjZSgvLS9nLCBcIlwiKSk7XHJcbiAgICAgICAgICAvLyBsb3dlciBjYW1lbFxyXG4gICAgICAgICAga2V5cy5wdXNoKGxvd2VyQ2FtZWxcclxuICAgICAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAgICAgLm1hcCgocGFydCwgaSkgPT4gKGkgIT09IDAgJiYgcGFydCkgPyBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiBwYXJ0KVxyXG4gICAgICAgICAgICAuam9pbignJykpO1xyXG4gICAgICAgICAgLy8gdXBwZXIvZGVmYXVsdCBjYW1lbFxyXG4gICAgICAgICAga2V5cy5wdXNoKGNhbWVsXHJcbiAgICAgICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgICAgIC5tYXAocGFydCA9PiBwYXJ0ID8gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpIDogcGFydClcclxuICAgICAgICAgICAgLmpvaW4oJycpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFBsdWdpbkNvbnRhaW5lci5JbnN0YW5jZS5zZXR0aW5ncy5zcGxheUtlYmFiQ2FzZVByb3BlcnRpZXMgPT09IFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5Mb3dlcmNhc2UpIHtcclxuICAgICAgICAgIC8vIGxvd2VyXHJcbiAgICAgICAgICBrZXlzLnB1c2gobG93ZXIucmVwbGFjZSgvLS9nLCBcIlwiKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChQbHVnaW5Db250YWluZXIuSW5zdGFuY2Uuc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID09PSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uQ2FtZWxDYXNlKSB7XHJcbiAgICAgICAgICAvLyBsb3dlciBjYW1lbFxyXG4gICAgICAgICAga2V5cy5wdXNoKGxvd2VyQ2FtZWxcclxuICAgICAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAgICAgLm1hcCgocGFydCwgaSkgPT4gKGkgIT09IDAgJiYgcGFydCkgPyBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiBwYXJ0KVxyXG4gICAgICAgICAgICAuam9pbignJykpO1xyXG4gICAgICAgICAgLy8gdXBwZXIvZGVmYXVsdCBjYW1lbFxyXG4gICAgICAgICAga2V5cy5wdXNoKGNhbWVsXHJcbiAgICAgICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgICAgIC5tYXAocGFydCA9PiBwYXJ0ID8gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpIDogcGFydClcclxuICAgICAgICAgICAgLmpvaW4oJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ga2V5cy51bmlxdWUoKTtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50YXRpb24gb2YgU2VjdGlvbnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOb3RlU2VjdGlvbnMgZXh0ZW5kcyBPYmplY3QgaW1wbGVtZW50cyBTZWN0aW9ucyB7XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBwcml2YXRlIF9hbGxcclxuICAgIDogUmVjb3JkPHN0cmluZywgTm90ZVNlY3Rpb25bXT4gPSB7fTtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX3Jvb3RcclxuICAgIDogUmVjb3JkPHN0cmluZywgTm90ZVNlY3Rpb25bXT4gPSB7fTtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX3VuaXF1ZVxyXG4gICAgOiBSZWNvcmQ8c3RyaW5nLCBOb3RlU2VjdGlvbj4gPSB7fTtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX3BhdGhcclxuICAgIDogc3RyaW5nID0gXCJcIjtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX2NvdW50XHJcbiAgICA6IG51bWJlciA9IDA7XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBwcml2YXRlIF9tZFxyXG4gICAgOiBzdHJpbmcgPSBudWxsITtcclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHByaXZhdGUgX2ZtXHJcbiAgICA6IHN0cmluZyA9IFwiXCI7XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBwcml2YXRlIF9odG1sXHJcbiAgICA6IEhUTUxFbGVtZW50ID0gbnVsbCE7XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlIGZvciBPYmplY3QgRXh0ZW5zaW9uXHJcbiAgW2tleTogc3RyaW5nXTogTm90ZVNlY3Rpb247XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgcGF0aCgpXHJcbiAgICA6IHN0cmluZyB7IHJldHVybiB0aGlzLl9wYXRoOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgUGF0aCgpXHJcbiAgICA6IHN0cmluZyB7IHJldHVybiB0aGlzLl9wYXRoOyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgY291bnQoKVxyXG4gICAgOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY291bnQ7IH1cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBDb3VudCgpXHJcbiAgICA6IG51bWJlciB7IHJldHVybiB0aGlzLl9jb3VudDsgfVxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IGFsbCgpXHJcbiAgICA6IFJlY29yZDxzdHJpbmcsIE5vdGVTZWN0aW9uW10+IHsgcmV0dXJuIHRoaXMuX2FsbDsgfVxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IEFsbCgpXHJcbiAgICA6IFJlY29yZDxzdHJpbmcsIE5vdGVTZWN0aW9uW10+IHsgcmV0dXJuIHRoaXMuX2FsbDsgfVxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IFJvb3QoKVxyXG4gICAgOiBSZWNvcmQ8c3RyaW5nLCBOb3RlU2VjdGlvbltdPiB7IHJldHVybiB0aGlzLl9yb290OyB9XHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgcm9vdCgpXHJcbiAgICA6IFJlY29yZDxzdHJpbmcsIE5vdGVTZWN0aW9uW10+IHsgcmV0dXJuIHRoaXMuX3Jvb3Q7IH1cclxuXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBnZXQgaGVhZGVycygpXHJcbiAgOiBIZWFkaW5nW10ge1xyXG4gICAgcmV0dXJuIE9iamVjdFxyXG4gICAgICAudmFsdWVzKHRoaXMuX3VuaXF1ZSlcclxuICAgICAgLm1hcCh1ID0+IHUuaGVhZGVyKTtcclxuICB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IEhlYWRlcnMoKVxyXG4gICAgOiBIZWFkaW5nW10geyByZXR1cm4gdGhpcy5oZWFkZXJzOyB9XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgZ2V0IHVuaXF1ZSgpXHJcbiAgOiBOb3RlU2VjdGlvbltdIHtcclxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuX3VuaXF1ZSk7XHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIGdldCBVbmlxdWUoKVxyXG4gIDogTm90ZVNlY3Rpb25bXSB7XHJcbiAgICByZXR1cm4gdGhpcy51bmlxdWU7ICBcclxuICB9XHJcblxyXG4gIC8vI3JlZ2lvbiBJbml0aWFsaXphdGlvblxyXG5cclxuICBjb25zdHJ1Y3Rvcihub3RlUGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkaW5nczogSGVhZGluZ0NhY2hlW10gfCB1bmRlZmluZWQpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBpZiAobm90ZVBhdGggIT09IHVuZGVmaW5lZCAmJiBoZWFkaW5ncyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuX3BhdGggPSBub3RlUGF0aDtcclxuXHJcbiAgICAgIGxldCBwYXJlbnQ6IE5vdGVTZWN0aW9ufG51bGwgPSBudWxsO1xyXG4gICAgICBsZXQgcHJldmlvdXM6IE5vdGVTZWN0aW9ufG51bGwgPSBudWxsO1xyXG4gICAgICBmb3IgKGNvbnN0IGhlYWRpbmcgb2YgaGVhZGluZ3MpIHtcclxuICAgICAgICAvLyBtYWtlIHRoZSBuZXcgc2VjdGlvblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBuZXcgTm90ZVNlY3Rpb24oXHJcbiAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgdGhpcy5fYWxsW2hlYWRpbmcuaGVhZGluZ11cclxuICAgICAgICAgICAgPyB0aGlzLl9hbGxbaGVhZGluZy5oZWFkaW5nXS5sZW5ndGhcclxuICAgICAgICAgICAgOiAwLFxyXG4gICAgICAgICAgaGVhZGluZ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBsYXN0IG9uZSBpcyB0aGUgcGFyZW50IG9mIHRoaXMgb25lXHJcbiAgICAgICAgaWYgKHByZXZpb3VzICYmIChwcmV2aW91cy5oZWFkZXIubGV2ZWwgPCBjdXJyZW50LmhlYWRlci5sZXZlbCkpIHtcclxuICAgICAgICAgIHBhcmVudCA9IHByZXZpb3VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBvbmUgaGFzIG1vdmVkIG91dCBvZiB0aGUgY3VycmVudCBwYXJlbnQgaGVhZGVyLlxyXG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgKGN1cnJlbnQuaGVhZGVyLmxldmVsIDw9IHBhcmVudC5oZWFkZXIubGV2ZWwpKSB7XHJcbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIHRvIHJvb3QgaWYgdGhlcmUncyBubyBwYXJlbnQuXHJcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcclxuICAgICAgICAgIHBhcmVudCA9IGN1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgaWYgKCF0aGlzLl9yb290W2hlYWRpbmcuaGVhZGluZ10pIHtcclxuICAgICAgICAgICAgdGhpcy5fcm9vdFtoZWFkaW5nLmhlYWRpbmddID0gW2N1cnJlbnRdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcm9vdFtoZWFkaW5nLmhlYWRpbmddLnB1c2goY3VycmVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHBhcmVudC5rZXlzKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgdGhpc1trZXldID0gcGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBhZGQgYXMgYSBjaGlsZCBpZiB0aGVyZSBpcyBvbmUuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBwYXJlbnQ/LmFkZENoaWxkKGN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgYWxsIHRoZSBrZXlzIGFuZCB0aXRsZVxyXG4gICAgICAgIHRoaXMuX3VuaXF1ZVtjdXJyZW50LmlkXSA9IGN1cnJlbnQ7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgY3VycmVudC5rZXlzKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuX2FsbFtrZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFtrZXldID0gW2N1cnJlbnRdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYWxsW2tleV0ucHVzaChjdXJyZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGluY3JlbWVudCBcclxuICAgICAgICB0aGlzLl9jb3VudCArPSAxO1xyXG4gICAgICAgIHByZXZpb3VzID0gY3VycmVudDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgdGhlIHNlY3Rpb25zIHdpdGggYSBnaXZlbiBuYW1lIGluIG9uZSBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lL2tleSBvZiB0aGUgc2VjdGlvbnMgeW91IHdhbnRcclxuICAgKi9cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIG5hbWVkKFxyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgKSA6IE5vdGVTZWN0aW9uW10ge1xyXG4gICAgcmV0dXJuIE5vdGVTZWN0aW9uLlNwbGF5S2V5cyhuYW1lKVxyXG4gICAgICAubWFwKGsgPT4gdGhpcy5fYWxsW2tdKVxyXG4gICAgICAuZmlsdGVyKHMgPT4gcylcclxuICAgICAgLmZsYXQoKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRGVmYXVsdCBJbmRleGVyIFR5cGUgT3ZlcnJpZGVcclxuICBhc3luYyBsb2FkVGV4dCgpXHJcbiAgICA6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBpZiAodGhpcy5fbWQgIT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9tZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBmaWxlID0gUGx1Z2luQ29udGFpbmVyLkluc3RhbmNlLmFwaS52YXVsdCh0aGlzLnBhdGgpIGFzIFRGaWxlO1xyXG4gICAgICB0aGlzLl9tZCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgICBjb25zdCBmcm9udE1hcmtlciA9IFwiLS0tXCI7XHJcbiAgICAgIGlmICh0aGlzLl9tZC5zdGFydHNXaXRoKGZyb250TWFya2VyKSkge1xyXG4gICAgICAgIHZhciBzdGFydFBvc2l0aW9uID0gdGhpcy5fbWQuc2VhcmNoKGZyb250TWFya2VyKSArIGZyb250TWFya2VyLmxlbmd0aDtcclxuICAgICAgICB2YXIgZW5kUG9zaXRpb24gPSB0aGlzLl9tZC5zbGljZShzdGFydFBvc2l0aW9uKS5zZWFyY2goZnJvbnRNYXJrZXIpICsgc3RhcnRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLl9mbSA9IHRoaXMuX21kLnNsaWNlKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9tZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IERlZmF1bHQgSW5kZXhlciBUeXBlIE92ZXJyaWRlXHJcbiAgYXN5bmMgbG9hZEh0bWwoKVxyXG4gICAgOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XHJcbiAgICBpZiAodGhpcy5faHRtbCAhPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2h0bWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9hZFRleHQoKS50aGVuKHYgPT4ge1xyXG4gICAgICAgIHRoaXMuX2h0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIC8vQHRzLWV4cGVjdC1lcnJvcjogQXBpIHNob3VsZCBleHBlY3QgbnVsbCBidXQgZG9lcyBub3QuXHJcbiAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bih0aGlzLl9tZCwgdGhpcy5faHRtbCwgdGhpcy5yb290LnBhdGgsIG51bGwpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5faHRtbDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yOiBEZWZhdWx0IEluZGV4ZXIgVHlwZSBPdmVycmlkZVxyXG4gIHB1YmxpYyBnZXRNYXR0ZXIoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9mbTtcclxuICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTWV0YWRhdGFBcGlTZXR0aW5ncywgTWV0YWRhdGFQbHVnaW4sIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbiB9IGZyb20gJy4vYXBpJztcclxuXHJcbmV4cG9ydCBjb25zdCBEZWZhdWx0U2V0dGluZ3M6IE1ldGFkYXRhQXBpU2V0dGluZ3MgPSB7XHJcbiAgZ2xvYmFsQ2FjaGVOYW1lOiAnY2FjaGUnLFxyXG4gIGdsb2JhbE1ldGFkYXRhQXBpTmFtZTogJ21ldGEnLFxyXG4gIGdsb2JhbFBhdGhOYW1lOiBcInBhdGhcIixcclxuICBkZWZpbmVPYmplY3RQcm9wZXJ0eUhlbHBlckZ1bmN0aW9uczogdHJ1ZSxcclxuICBkZWZpbmVBcnJheUhlbHBlckZ1bmN0aW9uczogdHJ1ZSxcclxuICBzcGxheUtlYmFiQ2FzZVByb3BlcnRpZXM6IFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5Mb3dlckFuZENhbWVsQ2FzZSxcclxuICBzcGxheUZyb250bWF0dGVyV2l0aG91dERhdGF2aWV3OiB0cnVlLFxyXG4gIHByb3RvdHlwZXNQYXRoOiBcIl8vX2Fzc2V0cy9fZGF0YS9fcHJvdG90eXBlc1wiLFxyXG4gIHZhbHVlc1BhdGg6IFwiXy9fYXNzZXRzL19kYXRhL192YWx1ZXNcIlxyXG59XHJcblxyXG4vKipcclxuICogU2V0dGluZ3MgZm9yIHRoZSBwbHVnaW5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZXRhZGF0YUFwaVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBwbHVnaW46IE1ldGFkYXRhUGx1Z2luO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNZXRhZGF0YVBsdWdpbikge1xyXG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01lZGF0YXRhIEFwaSBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdNZXRhZGF0YSBBcGkgVmFyaWFibGUgTmFtZScpXHJcbiAgICAgIC5zZXREZXNjKCdUaGUgdmFyaWFibGUgbmFtZSB0byB1c2UgZm9yIHRoZSBNZXRhZGF0YSBBcGkgZ2xvYmFsIHNjb3BlIHZhcmlhYmxlIHJlZ2lzdGVyZWQgYnkgdGhpcyBwbHVnaW4nKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ21ldGEnKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxNZXRhZGF0YUFwaU5hbWUpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsTWV0YWRhdGFBcGlOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdHbG9iYWwgQ2FjaGUgVmFyaWFibGUgTmFtZScpXHJcbiAgICAgIC5zZXREZXNjKCdUaGUgdmFyaWFibGUgbmFtZSB0byB1c2UgZm9yIHRoZSBjYWNoZSBnbG9iYWwgc2NvcGUgdmFyaWFibGUgcmVnaXN0ZXJlZCBieSB0aGlzIHBsdWdpbicpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignY2FjaGUnKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxDYWNoZU5hbWUpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsQ2FjaGVOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdHbG9iYWwgUGF0aCBWYXJpYWJsZSBOYW1lJylcclxuICAgICAgLnNldERlc2MoJ1RoZSBuYW1lIHRvIHVzZSBmb3IgdGhlIHBhdGggZ2xvYmFsIGhlbHBlciBmdW5jdGlvbiByZWdpc3RlcmVkIGJ5IHRoaXMgcGx1Z2luJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdwYXRoJylcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsUGF0aE5hbWUpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsUGF0aE5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIFxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgLnNldE5hbWUoJ0FkZCBBcnJheSBIZWxwZXIgRnVuY3Rpb25zLicpXHJcbiAgICAuc2V0RGVzYygnQWRkcyB0aGUgZnVuY3Rpb25zIGFnZ3JlZ2F0ZWJ5LCBpbmRleEJ5LCBldGMgdG8gYWxsIGFycmF5cyBmb3IgZGF0YSBtYW5hZ2VtZW50LicpXHJcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmluZUFycmF5SGVscGVyRnVuY3Rpb25zKVxyXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmaW5lQXJyYXlIZWxwZXJGdW5jdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgfSkpO1xyXG4gIFxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnQWRkIE9iamVjdCBQcm9wZXJ0eSBIZWxwZXIgRnVuY3Rpb25zLicpXHJcbiAgICAgIC5zZXREZXNjKCdBZGRzIHRoZSBmdW5jdGlvbiBoYXNQcm9wLCBnZXRQcm9wLCBhbmQgc2V0UHJvcCB0byBhbGwgb2JqZWN0cyBmb3IgZGVlcCBwcm9wZXJ0eSBhY2Nlc3MuJylcclxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmluZU9iamVjdFByb3BlcnR5SGVscGVyRnVuY3Rpb25zKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmluZU9iamVjdFByb3BlcnR5SGVscGVyRnVuY3Rpb25zID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdTcGxheSBLZWJhYi1DYXNlIFByb3BlcnRpZXMuJylcclxuICAgICAgLnNldERlc2MoJ1RoaXMgb3B0aW9uIGFkZHMgY29waWVzIG9mIGFueSBrZWJhYi1jYXNlIHByb3BlcnRpZXMgd2l0aCB0aGUgZGVzaXJlZCBuYW1pbmcgc2NoZW1lcy4gVGhpcyBpcyBzaW1pbGFyIHRvIGhvdyBhIGxvd2VyY2FzZSB2ZXJzaW9uIG9mIHZhbHVlcyB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzIGFyZSBwcm92aWRlZCBpbiBkYXRhdmlldy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24odG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGxheUtlYmFiQ2FzZVByb3BlcnRpZXMudG9TdHJpbmcoKSlcclxuICAgICAgICAuYWRkT3B0aW9ucyhPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBba2V5LnRvU3RyaW5nKCksIHZhbHVlLnRvU3RyaW5nKCldKSlcclxuICAgICAgICApXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID0gKDxhbnk+U3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uKVtwYXJzZUludCh2YWx1ZSldO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnU3BsYXkgRnJvbnRtYXR0ZXIgUHJvcGVydGllcyB0byBMb3dlciBDYXNlIGV2ZW4gd2l0aG91dCBEYXRhdmlldy4nKVxyXG4gICAgICAuc2V0RGVzYygnRGF0YXZpZXcgc3BsYXlzIHByb3BlcnR5IGtleXMgd2l0aCB1cHBlcmNhc2UgdmFsdWVzIHRvIGxvd2VyY2FzZSwgY3JlYXRpbmcgdHdvIGtleXMuIElmIHRoaXMgaXMgdHJ1ZSwgTWV0YWRhdGEgQXBpIHdpbGwgYWRkIHRoaXMgZnVuY3Rpb25hbGl0eSB0byB0aGUgYmFzZSBGcm9udG1hdHRlciBjYWxscywgZXZlbiB3aXRob3V0IERhdGF2aWV3IHNvdXJjZXMgaW5jbHVkZWQuJylcclxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXcpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BsYXlGcm9udG1hdHRlcldpdGhvdXREYXRhdmlldyA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnUHJvdG90eXBlcyBGaWxlIFBhdGgnKVxyXG4gICAgICAuc2V0RGVzYygnVGhlIHBhdGggdG8gcHJvdG90eXBlIGRhdGEgc3RvcmFnZScpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignXy9fYXNzZXRzL19kYXRhL19wcm90b3R5cGVzJylcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdG90eXBlc1BhdGgpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdG90eXBlc1BhdGggPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ0RhdGEgU3RvcmFnZSBWYWx1ZXMgUGF0aCcpXHJcbiAgICAgIC5zZXREZXNjKCdUaGUgcGF0aCB0byB0aGUgdmFsdWUgZGF0YSBzdG9yYWdlJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiXy9fYXNzZXRzL19kYXRhL192YWx1ZXNcIilcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmFsdWVzUGF0aClcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy52YWx1ZXNQYXRoID0gdmFsdWU7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KSk7XHJcbiAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2FwaVwiO1xyXG5cclxuZXhwb3J0IG5hbWVzcGFjZSBSZWFjdFNlY3Rpb25Db21wb25lbnRzIHtcclxuXHJcbiAgLyoqXHJcbiAgICogRW51bSBmb3IgdGhlIHJlbmRlciBtb2RlcyBvZiBhIHNlY3Rpb24gb3Igc2VjdGlvbnNcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBTZWN0aW9uUmVuZGVyTW9kZSB7XHJcbiAgICBtZCA9IFwibWRcIixcclxuICAgIGh0bWwgPSBcImh0bWxcIixcclxuICAgIHR4dCA9IFwidHh0XCJcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFsbCBvZiB0aGUgYXZhaWxhYmxlIHJlbmRlciBtb2RlcyBvciBzZWN0aW9ucy5cclxuICAgKi9cclxuICBleHBvcnQgY29uc3QgU2VjdGlvblJlbmRlck1vZGVzIDogQXJyYXk8U2VjdGlvblJlbmRlck1vZGU+ID0gW1xyXG4gICAgU2VjdGlvblJlbmRlck1vZGUubWQsXHJcbiAgICBTZWN0aW9uUmVuZGVyTW9kZS50eHQsXHJcbiAgICBTZWN0aW9uUmVuZGVyTW9kZS5odG1sXHJcbiAgXTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVuZGVyIEEgbm90ZSBTZWN0aW9uIGZldGNoZWQgZnJvbSBNZXRhZGF0YS1BcGkgdXNpbmcgcmVhY3QuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNvbnN0IFNlY3Rpb24gPSAoe1xyXG4gICAgZGF0YSxcclxuICAgIG1vZGUgPSBTZWN0aW9uUmVuZGVyTW9kZS5tZCxcclxuICAgIHJlbmRlcmVyID0gdW5kZWZpbmVkLFxyXG4gICAgZW5hYmxlZCA9IHRydWVcclxuICB9OiB7XHJcbiAgICBkYXRhOiBTZWN0aW9uLFxyXG4gICAgbW9kZT86IFNlY3Rpb25SZW5kZXJNb2RlIHwgdW5kZWZpbmVkLFxyXG4gICAgcmVuZGVyZXI/OiAoKFxyXG4gICAgICBzZWN0aW9uPzogU2VjdGlvbixcclxuICAgICAgcmVuZGVyZWRDb250ZW50cz86IHN0cmluZyB8IEhUTUxFbGVtZW50XHJcbiAgICApID0+IGFueSlcclxuICAgICAgfCB1bmRlZmluZWQsXHJcbiAgICBlbmFibGVkPzogKChcclxuICAgICAgc2VjdGlvbj86IFNlY3Rpb24sXHJcbiAgICAgIHJlbmRlcmVkQ29udGVudHM/OiBzdHJpbmcgfCBIVE1MRWxlbWVudFxyXG4gICAgKSA9PiBib29sZWFuKVxyXG4gICAgICB8IHVuZGVmaW5lZFxyXG4gICAgICB8IGJvb2xlYW5cclxuICB9KSA9PiB7XHJcbiAgICBjb25zdCB7IFJlYWN0LCBNYXJrZG93biB9ID0gKGFwcCBhcyBhbnkpLnBsdWdpbnMucGx1Z2luc1tcIm9ic2lkaWFuLXJlYWN0LWNvbXBvbmVudHNcIl07XHJcbiAgICBjb25zdCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSA9IFJlYWN0O1xyXG4gICAgY29uc3Qgc2VjdGlvbiA9IGRhdGE7XHJcblxyXG4gICAgLy8gdmFsaWRhdGlvblxyXG4gICAgaWYgKCFzZWN0aW9uKSB7XHJcbiAgICAgIHRocm93IFwiJ2RhdGEnIHByb3Agb2YgdHlwZSBTZWN0aW9uIGlzIHJlcXVpcmVkLlwiO1xyXG4gICAgfVxyXG4gICAgaWYgKCFTZWN0aW9uUmVuZGVyTW9kZXMuaW5jbHVkZXMobW9kZSkpIHtcclxuICAgICAgdGhyb3cgYFVucmVjb2duaXplZCBtb2RlOiAke21vZGV9LiBWYWxpZCBtb2RlczogJHtTZWN0aW9uUmVuZGVyTW9kZXMuam9pbihcIiwgXCIpfWA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGxvYWQgdGhlIHNlY3Rpb24gY29udGVudCB3ZSB3YW50XHJcbiAgICBjb25zdCBbcmVuZGVyZWRDb250ZW50LCBzZXRSZW5kZXJlZENvbnRlbnRdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICB1c2VFZmZlY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHNlY3Rpb25bbW9kZV07XHJcbiAgICAgIHNldFJlbmRlcmVkQ29udGVudCh2YWx1ZSk7XHJcbiAgICB9LCBbXSk7XHJcbiAgICBcclxuICAgIC8vIHdhaXQgZm9yIGNvbnRlbnQgdG8gcmVuZGVyL2xvYWRcclxuICAgIGlmIChyZW5kZXJlZENvbnRlbnQgIT09IG51bGwpIHtcclxuICAgICAgLy8gaXMtZW5hYmxlZCBjaGVjayB1c2luZyB0aGUgbG9hZGVkIGNvbnRlbnRcclxuICAgICAgaWYgKCh0eXBlb2YgZW5hYmxlZCA9PT0gXCJmdW5jdGlvblwiICYmIGVuYWJsZWQoc2VjdGlvbiwgcmVuZGVyZWRDb250ZW50KSkgfHwgZW5hYmxlZCkge1xyXG4gICAgICAgIC8vIGN1c3RvbSByZW5kZXJlciBvcHRpb25cclxuICAgICAgICBpZiAocmVuZGVyZXIpIHtcclxuICAgICAgICAgIHJldHVybiByZW5kZXJlcihzZWN0aW9uLCByZW5kZXJlZENvbnRlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBkZWZhdWx0IG1hcmtkb3duIHJlbmRlcmVyXHJcbiAgICAgICAgICBpZiAobW9kZS50b0xvd2VyQ2FzZSgpID09IFNlY3Rpb25SZW5kZXJNb2RlLm1kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8c3BhblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YFNlY3Rpb24tJHtzZWN0aW9uLmhlYWRlci50ZXh0LnJlcGxhY2UoXCIgXCIsIFwiLVwiKX0gU2VjdGlvbi1JbmRleC0ke3NlY3Rpb24uaGVhZGVyLmluZGV4fSBTZWN0aW9uLUxldmVsLSR7c2VjdGlvbi5oZWFkZXIubGV2ZWx9YH0+XHJcbiAgICAgICAgICAgICAgPE1hcmtkb3duIHNyYz17cmVuZGVyZWRDb250ZW50fSAvPlxyXG4gICAgICAgICAgICA8L3NwYW4+O1xyXG4gICAgICAgICAgfSAvLyBmdWxsIGh0bWwgcG9zdC1yZW5kZXJlclxyXG4gICAgICAgICAgZWxzZSBpZiAobW9kZS50b0xvd2VyQ2FzZSgpID09IFNlY3Rpb25SZW5kZXJNb2RlLmh0bWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxzcGFuXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgU2VjdGlvbi0ke3NlY3Rpb24uaGVhZGVyLnRleHQucmVwbGFjZShcIiBcIiwgXCItXCIpfSBTZWN0aW9uLUluZGV4LSR7c2VjdGlvbi5oZWFkZXIuaW5kZXh9IFNlY3Rpb24tTGV2ZWwtJHtzZWN0aW9uLmhlYWRlci5sZXZlbH1gfVxyXG4gICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XHJcbiAgICAgICAgICAgICAgICBfX2h0bWw6IHJlbmRlcmVkQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICA/IHJlbmRlcmVkQ29udGVudC5pbm5lckhUTUxcclxuICAgICAgICAgICAgICAgICAgOiBcIlwiXHJcbiAgICAgICAgICAgICAgfX0gLz47XHJcbiAgICAgICAgICB9IC8vIGNsZWFuZWQgdHh0IChmcm9tIGh0bWwuaW5uZXJUZXh0KVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgU2VjdGlvbi0ke3NlY3Rpb24uaGVhZGVyLnRleHQucmVwbGFjZShcIiBcIiwgXCItXCIpfSBTZWN0aW9uLUluZGV4LSR7c2VjdGlvbi5oZWFkZXIuaW5kZXh9IFNlY3Rpb24tTGV2ZWwtJHtzZWN0aW9uLmhlYWRlci5sZXZlbH1gfT5cclxuICAgICAgICAgICAgICB7cmVuZGVyZWRDb250ZW50fVxyXG4gICAgICAgICAgICA8L2Rpdj47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGVsc2U6IGxvYWRpbmcuLi5cclxuICAgIHJldHVybiA8aT57XCIuLi5Mb2FkaW5nXCJ9PC9pPjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmRlciBOb3RlIFNlY3Rpb25zIGZldGNoZWQgZnJvbSBNZXRhZGF0YS1BcGkgdXNpbmcgcmVhY3QuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNvbnN0IFNlY3Rpb25zID0gKHtcclxuICAgIGRhdGEsXHJcbiAgICBtb2RlID0gU2VjdGlvblJlbmRlck1vZGUubWQsXHJcbiAgICByZW5kZXJlciA9IHVuZGVmaW5lZCxcclxuICAgIGZpbHRlciA9IHRydWVcclxuICB9OiB7XHJcbiAgICAgIGRhdGE6IFNlY3Rpb25bXSxcclxuICAgICAgbW9kZT86IFNlY3Rpb25SZW5kZXJNb2RlIHwgdW5kZWZpbmVkLFxyXG4gICAgICByZW5kZXJlcj86ICgoXHJcbiAgICAgICAgc2VjdGlvbj86IFNlY3Rpb24sXHJcbiAgICAgICAgcmVuZGVyZWRDb250ZW50cz86IHN0cmluZyB8IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIGFsbFNlY3Rpb25zPzogUmVjb3JkPHN0cmluZywgU2VjdGlvbj4sXHJcbiAgICAgICAgYWxsUmVuZGVyZWRTZWN0aW9uQ29udGVudHM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgUmVjb3JkPHN0cmluZywgSFRNTEVsZW1lbnQ+XHJcbiAgICAgICkgPT4gYW55KVxyXG4gICAgICAgIHwgdW5kZWZpbmVkLFxyXG4gICAgICBmaWx0ZXI/OiAoKFxyXG4gICAgICAgIHNlY3Rpb24/OiBTZWN0aW9uLFxyXG4gICAgICAgIHJlbmRlcmVkQ29udGVudHM/OiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcclxuICAgICAgICBhbGxTZWN0aW9ucz86IFJlY29yZDxzdHJpbmcsIFNlY3Rpb24+LFxyXG4gICAgICAgIGFsbFJlbmRlcmVkU2VjdGlvbkNvbnRlbnRzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PlxyXG4gICAgICApID0+IGJvb2xlYW4pXHJcbiAgICAgICAgfCB1bmRlZmluZWRcclxuICAgICAgICB8IGJvb2xlYW5cclxuICB9KSA9PiB7XHJcbiAgICBjb25zdCB7IFJlYWN0IH0gPSAoYXBwIGFzIGFueSkucGx1Z2lucy5wbHVnaW5zW1wib2JzaWRpYW4tcmVhY3QtY29tcG9uZW50c1wiXTtcclxuICAgIGNvbnN0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9ID0gUmVhY3Q7XHJcbiAgICBcclxuICAgIC8vIHZhbGlkYXRpb25cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICB0aHJvdyBcIidkYXRhJyBwcm9wIG9mIHR5cGUgU2VjdGlvbltdIGlzIHJlcXVpcmVkLlwiO1xyXG4gICAgfVxyXG4gICAgaWYgKCFTZWN0aW9uUmVuZGVyTW9kZXMuaW5jbHVkZXMobW9kZSkpIHtcclxuICAgICAgdGhyb3cgYFVucmVjb2duaXplZCBtb2RlOiAke21vZGV9LiBWYWxpZCBtb2RlczogJHtTZWN0aW9uUmVuZGVyTW9kZXMuam9pbihcIiwgXCIpfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaG9va3MgdG8gbG9hZCBzZWN0aW9ucyBkYXRhXHJcbiAgICBjb25zdCBbcmVuZGVyZWRTZWN0aW9ucywgc2V0UmVuZGVyZWRTZWN0aW9uc10gPSB1c2VTdGF0ZShudWxsKTtcclxuICAgIHVzZUVmZmVjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIGxvYWQgYWxsIHNlY3Rpb25zIGF0IG9uY2UuXHJcbiAgICAgIGNvbnN0IHJlbmRlcmVkSXRlbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4gPSB7fTtcclxuICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIGRhdGEpIHtcclxuICAgICAgICByZW5kZXJlZEl0ZW1zW3NlY3Rpb24uaWRdID0gYXdhaXQgc2VjdGlvblttb2RlXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UmVuZGVyZWRTZWN0aW9ucyhyZW5kZXJlZEl0ZW1zKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBzZWN0aW9uc1xyXG4gICAgICA9IGRhdGFcclxuICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3I6IGluZGV4QnkgYWRkZWQgdG8gYXJyYXkgcHJvdG90eXBlIGluIG1haW4udHNcclxuICAgICAgICAvLyBUT0RPOiB3cmFwIGluZGV4QnkncyBjb250ZW50cyBpbiBhIHN0YXRpYyBjYWxsIGFuZCBjYWxsIHRoYXQgaGVyZSBpbnN0ZWFkLlxyXG4gICAgICAgIC5pbmRleEJ5KFwiaWRcIik7XHJcblxyXG4gICAgLy8gaWYgd2UncmUgYWxsIGxvYWRlZFxyXG4gICAgaWYgKHJlbmRlcmVkU2VjdGlvbnMgIT09IG51bGwpIHtcclxuICAgICAgLy8gcHJvcHMgZm9yIGluZGl2aWR1YWwgc2VjdGlvbnNcclxuICAgICAgY29uc3QgY2hpbGRQcm9wcyA6IGFueSA9IHtcclxuICAgICAgICBtb2RlXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChyZW5kZXJlcikge1xyXG4gICAgICAgIGNoaWxkUHJvcHMucmVuZGVyZXJcclxuICAgICAgICAgID0gKHM6IFNlY3Rpb24sIHI6IHN0cmluZ3xIVE1MRWxlbWVudCkgPT4gcmVuZGVyZXIocywgciwgc2VjdGlvbnMsIHJlbmRlcmVkU2VjdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWx0ZXIpIHtcclxuICAgICAgICBjaGlsZFByb3BzLmVuYWJsZWQgPSB0eXBlb2YgZmlsdGVyID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgID8gKHM6IFNlY3Rpb24sIHI6IHN0cmluZyB8IEhUTUxFbGVtZW50KSA9PiBmaWx0ZXIocywgciwgc2VjdGlvbnMsIHJlbmRlcmVkU2VjdGlvbnMpXHJcbiAgICAgICAgICA6IGZpbHRlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gbG9vcCB0aG91Z2ggYW5kIHJlbmRlciB0aGUgc2VjdGlvbnM6XHJcbiAgICAgIHJldHVybiA8PlxyXG4gICAgICAgIHtkYXRhICYmIGRhdGEubWFwKHNlY3Rpb24gPT5cclxuICAgICAgICAgIDxTZWN0aW9uIGRhdGE9e3NlY3Rpb259IHsuLi5jaGlsZFByb3BzfSAvPil9XHJcbiAgICAgIDwvPjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBlbHNlOiBsb2FkaW5nLi4uXHJcbiAgICByZXR1cm4gPGk+e1wiLi4uTG9hZGluZ1wifTwvaT47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbGwgY29tcG9uZW50c1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjb25zdCBDb21wb25lbnRzID0ge1xyXG4gICAgU2VjdGlvbixcclxuICAgIFNlY3Rpb25zXHJcbiAgfVxyXG59IiwgImV4cG9ydCBuYW1lc3BhY2UgUmVhY3RNYXJrZG93bkNvbXBvbmVudHMge1xyXG5cclxuICAvKipcclxuICAgKiBWZXJzaW9uIG9mIE1hcmtkb3duIGNvbXBvbmVudHMsIGJ1dCBpbmxpbmUuXHJcbiAgICogXHJcbiAgICogVE9ETzogZml4IGRhdGF2aWV3IGlubGluZSB0YWcgZm9ybWF0dGluZyBpc3N1ZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjb25zdCBJbmxpbmVNZCA9ICh7IHNyYywgbWF4RGVwdGggPSAxMCB9OiB7IHNyYzogc3RyaW5nOyBtYXhEZXB0aDogbnVtYmVyIH0pID0+IHtcclxuICAgIGNvbnN0IHBsdWdpbiA9IChhcHAgYXMgYW55KS5wbHVnaW5zLnBsdWdpbnNbXCJvYnNpZGlhbi1yZWFjdC1jb21wb25lbnRzXCJdO1xyXG4gICAgY29uc3QgeyBNYXJrZG93biwgUmVhY3QgfSA9IHBsdWdpbjtcclxuICAgIGNvbnN0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gPSBSZWFjdDtcclxuICAgIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgICBjb25zdCBbaW5pdGlhbGl6ZWQsIHNldEluaXRpYWxpemVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICBpZiAoY29udGFpbmVyUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtQ29udGVudHMgPSBjb250YWluZXJSZWYuY3VycmVudCEuY2hpbGRyZW5bMF0/LmNoaWxkcmVuWzBdPy5pbm5lckhUTUwgPz8gXCJcIjtcclxuICAgICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50IS5jaGlsZHJlblswXS5pbm5lckhUTUwgPSBjdXJyZW50SXRlbUNvbnRlbnRzO1xyXG4gICAgICAgICAgc2V0SW5pdGlhbGl6ZWQodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgcmV0dXJuIDxzcGFuIHJlZj17Y29udGFpbmVyUmVmfT5cclxuICAgICAgPE1hcmtkb3duIHNyYz17c3JjfSBtYXhEZXB0aD17bWF4RGVwdGh9IC8+XHJcbiAgICA8L3NwYW4+XHJcbiAgfVxyXG5cclxuICBleHBvcnQgY29uc3QgQ29tcG9uZW50cyA9IHtcclxuICAgIElubGluZU1kXHJcbiAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUF1Qjs7O0FDQXZCLHVCQUE4Qzs7O0FDT3ZDLElBQU0sa0JBQU4sTUFBNEM7QUFBQSxFQUdqRCxZQUFZLFNBQXNCO0FBQ2hDLFNBQUssT0FBTztBQUFBLEVBQ2Q7QUFBQSxFQUVBLElBQUksT0FBa0I7QUFDcEIsV0FBTyxLQUFLLEtBQUssSUFBSTtBQUFBLEVBQ3ZCO0FBQUEsRUFFQSxJQUFJLE9BQWlCO0FBQ25CLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQSxFQUVBLElBQUksT0FBYztBQUNoQixVQUFNLGVBQWUsS0FBSyxLQUFLLE1BQU0sVUFBVTtBQUMvQyxRQUFJLE9BQU8sYUFBYSxtQkFBbUIsVUFBVTtBQUNuRCxZQUFNLFdBQVUsS0FBSyxLQUFLLE1BRXhCLGlCQUNGO0FBRUEsVUFBSSxDQUFDLFVBQVM7QUFDWixjQUFNO0FBQUEsTUFDUjtBQUVBLGFBQU87QUFBQSxJQUNUO0FBRUEsVUFBTSxVQUFVLElBQUksVUFBVSxjQUFjO0FBRTVDLFFBQUksQ0FBQyxTQUFTO0FBQ1osWUFBTTtBQUFBLElBQ1I7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsSUFBSSxPQUFjO0FBQ2hCLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQSxFQUVBLElBQUksT0FBZTtBQUNqQixVQUFNLE9BQWMsS0FBSztBQUN6QixRQUFJLE9BQU8sS0FBSztBQUNoQixRQUFJLEtBQUssV0FBVztBQUNsQixhQUFPLEtBQUssTUFBTSxHQUFHLElBQUssTUFBSyxVQUFVLFNBQVMsRUFBRTtBQUFBLElBQ3REO0FBRUEsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLElBQUksT0FBZTtBQUNq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
