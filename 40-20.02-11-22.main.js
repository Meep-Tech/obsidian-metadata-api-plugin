/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetadataApiPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var SplayKebabCasePropertiesOption = /* @__PURE__ */ ((SplayKebabCasePropertiesOption2) => {
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["Disabled"] = 0] = "Disabled";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["Lowercase"] = 1] = "Lowercase";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["CamelCase"] = 2] = "CamelCase";
  SplayKebabCasePropertiesOption2[SplayKebabCasePropertiesOption2["LowerAndCamelCase"] = 3] = "LowerAndCamelCase";
  return SplayKebabCasePropertiesOption2;
})(SplayKebabCasePropertiesOption || {});
var DEFAULT_SETTINGS = {
  globalCacheName: "cache",
  globalMetadataApiName: "meta",
  defineObjectPropertyHelperFunctions: true,
  splayKebabCaseProperties: 3 /* LowerAndCamelCase */,
  splayFrontmatterWithoutDataview: true,
  prototypesPath: "_/_assets/_data/_prototypes",
  valuesPath: "_/_assets/_data/_values"
};
var MetadataApiPlugin = class extends import_obsidian.Plugin {
  static get Instance() {
    return MetadataApiPlugin._instance;
  }
  get api() {
    return MetadataApiPlugin._instance;
  }
  async onload() {
    super.onload();
    await this.loadSettings();
    this.addSettingTab(new MetadataApiSettingTab(this.app, this));
    this._initApi();
  }
  onunload() {
    this._deinitApi();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this._deinitApi();
    this._initApi();
  }
  _initApi() {
    this._verifyDependencies();
    MetadataApiPlugin._instance = new Metadata(this);
    this._initGlobalMetadata();
    this._initGlobalCache();
    if (this.settings.defineObjectPropertyHelperFunctions) {
      this._initObjectPropertyHelperMethods();
    }
  }
  _verifyDependencies() {
    if (!app.plugins.plugins.dataview || !app.plugins.plugins.metaedit) {
      const error = `Cannot initialize plugin: Metadata-Api. Dependency plugin is missing: ${!app.plugins.plugins.dataview ? "Dataview" : "Metaedit"}. (The metadata-api plugin has been automatically disabled.)`;
      app.plugins.disablePlugin("metadata-api");
      alert(error);
      throw error;
    }
  }
  _initObjectPropertyHelperMethods() {
    Object.defineProperty(Object.prototype, "hasProp", {
      value: function(path, thenDo) {
        if (thenDo) {
          return Metadata.TryToGetDeepProperty(path, thenDo, this);
        } else {
          return Metadata.ContainsDeepProperty(path, this);
        }
      },
      enumerable: false
    });
    Object.defineProperty(Object.prototype, "getProp", {
      value: function(path, defaultValue) {
        const value = Metadata.GetDeepProperty(path, this);
        if (defaultValue !== void 0 && value === void 0) {
          if (typeof defaultValue === "function") {
            return defaultValue();
          } else {
            return defaultValue;
          }
        }
        return value;
      },
      enumerable: false
    });
    Object.defineProperty(Object.prototype, "setProp", {
      value: function(propertyPath, value) {
        return Metadata.SetDeepProperty(propertyPath, value, this);
      },
      enumerable: false
    });
  }
  _initGlobalMetadata() {
    try {
      Object.defineProperty(global, "Metadata", {
        get() {
          return Metadata;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, "Metadata", {
        get() {
          return Metadata;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(global, this.settings.globalMetadataApiName, {
        get() {
          return Metadata.Api;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, this.settings.globalMetadataApiName, {
        get() {
          return Metadata.Api;
        }
      });
    } catch (e) {
    }
  }
  _initGlobalCache() {
    try {
      Object.defineProperty(global, this.settings.globalCacheName, {
        get() {
          return Metadata.Api.Current.Cache;
        }
      });
    } catch (e) {
    }
    try {
      Object.defineProperty(window, this.settings.globalCacheName, {
        get() {
          return Metadata.Api.Current.Cache;
        }
      });
    } catch (e) {
    }
  }
  _deinitApi() {
    this._deinitGlobalMetadata();
    this._deinitGlobalCache();
    this._deinitObjectPropertyHelpers();
    MetadataApiPlugin._instance = void 0;
  }
  _deinitGlobalCache() {
    try {
      delete global[this.settings.globalCacheName];
    } catch (e) {
    }
    try {
      delete window[this.settings.globalCacheName];
    } catch (e) {
    }
  }
  _deinitGlobalMetadata() {
    try {
      delete global["Metadata"];
    } catch (e) {
    }
    try {
      delete window["Metadata"];
    } catch (e) {
    }
    try {
      delete global[this.settings.globalMetadataApiName];
    } catch (e) {
    }
    try {
      delete window[this.settings.globalMetadataApiName];
    } catch (e) {
    }
  }
  _deinitObjectPropertyHelpers() {
    try {
      delete Object.prototype["hasProp"];
    } catch (e) {
    }
    try {
      delete Object.prototype["getProp"];
    } catch (e) {
    }
    try {
      delete Object.prototype["setProp"];
    } catch (e) {
    }
  }
};
var MetadataApiSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Medatata Api Settings" });
    new import_obsidian.Setting(containerEl).setName("Metadata Api Variable Name").setDesc("The variable name to use for the Metadata Api global scope variable registered by this plugin").addText((text) => text.setPlaceholder("meta").setValue(this.plugin.settings.globalMetadataApiName).onChange(async (value) => {
      this.plugin.settings.globalMetadataApiName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Global Cache Variable Name").setDesc("The variable name to use for the cache global scope variable registered by this plugin").addText((text) => text.setPlaceholder("cache").setValue(this.plugin.settings.globalCacheName).onChange(async (value) => {
      this.plugin.settings.globalCacheName = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Add Object Property Helper Functions.").setDesc("Adds the function hasProp, getProp, and setProp to all objects for deep property access.").addToggle((toggle) => toggle.setValue(this.plugin.settings.defineObjectPropertyHelperFunctions).onChange(async (value) => {
      this.plugin.settings.defineObjectPropertyHelperFunctions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Splay Kebab-Case Properties.").setDesc("This option adds copies of any kebab-case properties with the desired naming schemes. This is similar to how a lowercase version of values with uppercase letters are provided in dataview.").addDropdown((toggle) => toggle.setValue(this.plugin.settings.splayKebabCaseProperties.toString()).addOptions(Object.fromEntries(Object.entries(SplayKebabCasePropertiesOption).map(([key, value]) => [key.toString(), value.toString()]))).onChange(async (value) => {
      this.plugin.settings.splayKebabCaseProperties = SplayKebabCasePropertiesOption[parseInt(value)];
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Splay Frontmatter Properties to Lower Case even without Dataview.").setDesc("Dataview splays property keys with uppercase values to lowercase, creating two keys. If this is true, Metadata Api will add this functionality to the base Frontmatter calls, even without Dataview sources included.").addToggle((toggle) => toggle.setValue(this.plugin.settings.splayFrontmatterWithoutDataview).onChange(async (value) => {
      this.plugin.settings.splayFrontmatterWithoutDataview = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Prototypes File Path").setDesc("The path to prototype data storage").addText((text) => text.setPlaceholder("_/_assets/_data/_prototypes").setValue(this.plugin.settings.prototypesPath).onChange(async (value) => {
      this.plugin.settings.prototypesPath = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Data Storage Values Path").setDesc("The path to the value data storage").addText((text) => text.setPlaceholder("_/_assets/_data/_values").setValue(this.plugin.settings.valuesPath).onChange(async (value) => {
      this.plugin.settings.valuesPath = value;
      await this.plugin.saveSettings();
    }));
  }
};
var CurrentMetadata = class {
  constructor(metaApi) {
    this._api = metaApi;
  }
  get Data() {
    return this._api.get();
  }
  get data() {
    return this.Data;
  }
  get Note() {
    const current = app.workspace.getActiveFile();
    if (!current) {
      throw "No Current File";
    }
    return current;
  }
  get note() {
    return this.Note;
  }
  get Path() {
    const note = this.Note;
    let path = note.path;
    if (note.extension) {
      path = path.slice(0, 0 - (note.extension.length + 1));
    }
    return path;
  }
  get path() {
    return this.Path;
  }
  get PathEx() {
    return this.Path + "." + this.note.extension;
  }
  get pathex() {
    return this.PathEx;
  }
  get Matter() {
    return this._api.frontmatter();
  }
  get matter() {
    return this.Matter;
  }
  get Cache() {
    return this._api.cache();
  }
  get cache() {
    return this.Cache;
  }
  patch(frontmatterData, propertyName = null, toValuesFile = false, prototype = false) {
    return this._api.patch(this.path, frontmatterData, propertyName, toValuesFile, prototype);
  }
  set(frontmatterData, toValuesFile = false, prototype = false) {
    return this._api.set(this.path, frontmatterData, toValuesFile, prototype);
  }
  clear(frontmatterProperties = null, toValuesFile = false, prototype = false) {
    return this._api.clear(this.path, frontmatterProperties, toValuesFile, prototype);
  }
};
var _Metadata = class {
  constructor(plugin) {
    this._plugin = plugin;
    this._initializeKebabPropSplayer();
    this._initializePropLowercaseSplayer();
  }
  _initializeKebabPropSplayer() {
    this._kebabPropSplayer = (() => {
      switch (this.plugin.settings.splayKebabCaseProperties) {
        case 1 /* Lowercase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowercase, topLevelPropertiesToIgnore);
        case 2 /* CamelCase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowerCamelcase, topLevelPropertiesToIgnore);
        case 3 /* LowerAndCamelCase */:
          return (base, topLevelPropertiesToIgnore) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayKebabToLowerAndLowerCamelcase, topLevelPropertiesToIgnore);
        case 0 /* Disabled */:
        default:
          return (base) => base;
      }
    })();
  }
  _initializePropLowercaseSplayer() {
    this._lowerCaseSplayer = this.plugin.settings.splayFrontmatterWithoutDataview ? (base) => _Metadata._recurseOnAllObjectProperties(base, _Metadata._splayToLowerCase) : (base) => base;
  }
  static _recurseOnAllObjectProperties(value, fn, topLevelPropertiesToIgnore = null) {
    if (value && typeof value === "object") {
      if (Array.isArray(value)) {
        return value.map((i) => this._recurseOnAllObjectProperties(i, fn));
      } else {
        const data = {};
        for (const key of Object.keys(value)) {
          if (topLevelPropertiesToIgnore && topLevelPropertiesToIgnore.contains(key)) {
            data[key] = value[key];
          } else {
            fn(key, this._recurseOnAllObjectProperties(value[key], fn), data);
          }
        }
        return data;
      }
    } else {
      return value;
    }
  }
  static _splayKebabToLowercase(key, value, data) {
    if (key.includes("-")) {
      data[key.replace(/-/g, "").toLowerCase()] = value;
    }
    data[key] = value;
  }
  static _splayKebabToLowerCamelcase(key, value, data) {
    if (key.includes("-")) {
      data[key.toLowerCase().split("-").map((part, i) => i !== 0 ? part.charAt(0).toUpperCase() + part.substring(1) : part).join("")] = value;
    }
    data[key] = value;
  }
  static _splayKebabToLowerAndLowerCamelcase(key, value, data) {
    if (key.includes("-")) {
      const lowerKey = key.toLowerCase();
      data[lowerKey.replace(/-/g, "")] = value;
      data[lowerKey.split("-").map((part, i) => i !== 0 ? part.charAt(0).toUpperCase() + part.substring(1) : part).join("")] = value;
    }
    data[key] = value;
  }
  static _splayToLowerCase(key, value, data) {
    data[key] = value;
    data[key.toLowerCase()] = value;
  }
  static get Api() {
    return MetadataApiPlugin.Instance;
  }
  static get DataviewApi() {
    return app.plugins.plugins.dataview.api;
  }
  static get MetaeditApi() {
    return app.plugins.plugins.metaedit.api;
  }
  get Plugin() {
    return this.plugin;
  }
  get plugin() {
    return this._plugin || app.plugins.plugins["metadata-api"];
  }
  static get DefaultSources() {
    return {
      FileInfo: true,
      Frontmatter: true,
      DataviewInline: true,
      Cache: true,
      Headings: true,
      Sections: true
    };
  }
  get Current() {
    return this.current;
  }
  get current() {
    return new CurrentMetadata(this);
  }
  get Data() {
    return this.Current.Data;
  }
  get data() {
    return this.Current.Data;
  }
  getObsidianMetadataFileCache(file = null) {
    const path = (_Metadata.ParseFileName(file) || this.Current.Path) + ".md";
    const fileObject = app.vault.getAbstractFileByPath(path);
    if (!(fileObject instanceof import_obsidian.TFile)) {
      throw `Note Not Found: ${path}`;
    }
    return app.metadataCache.getFileCache(fileObject);
  }
  frontmatter(file = null) {
    const fileCache = this.getObsidianMetadataFileCache(file);
    return fileCache && fileCache.frontmatter ? this._lowerCaseSplayer(this._kebabPropSplayer(fileCache == null ? void 0 : fileCache.frontmatter, null)) : {};
  }
  sections(file = null) {
    const fileCache = this.getObsidianMetadataFileCache(file);
    return fileCache && fileCache.sections ? this._lowerCaseSplayer(this._kebabPropSplayer(fileCache == null ? void 0 : fileCache.sections, null)) : {};
  }
  headings(file = null) {
    const fileCache = this.getObsidianMetadataFileCache(file);
    return fileCache && fileCache.headings ? this._lowerCaseSplayer(this._kebabPropSplayer(fileCache == null ? void 0 : fileCache.headings, null)) : {};
  }
  dv(file = null) {
    return this._kebabPropSplayer(_Metadata.DataviewApi.page(file ? _Metadata.ParseFileName(file) : this.Current.Path), ["file"]);
  }
  cache(file = null) {
    const fileName = _Metadata.ParseFileName(file) || this.Current.Path;
    _Metadata._caches[fileName] = _Metadata._caches[fileName] || {};
    return _Metadata._caches[fileName];
  }
  prototypes(prototypePath) {
    return this.frontmatter(_Metadata.BuildPrototypeFileFullPath(prototypePath));
  }
  values(dataPath) {
    return this.frontmatter(_Metadata.BuildDataFileFullPath(dataPath));
  }
  get(file = null, sources = _Metadata.DefaultSources) {
    const fileName = file ? _Metadata.ParseFileName(file) : this.Current.Path;
    let values = {};
    if (sources === true) {
      values = this._kebabPropSplayer(_Metadata.DataviewApi.page(fileName), ["file"]) || {};
    } else {
      if (sources === false) {
        return {};
      }
      if (sources.DataviewInline || sources.FileInfo) {
        values = this._kebabPropSplayer(_Metadata.DataviewApi.page(fileName), ["file"]) || {};
        if (!sources.FileInfo) {
          delete values.file;
        }
        let frontmatter = null;
        if (!sources.DataviewInline) {
          frontmatter = this.frontmatter(fileName);
          Object.keys(values).forEach((prop) => {
            if (!frontmatter.hasOwnProperty(prop) && prop != "file") {
              delete values[prop];
            }
          });
        }
        if (!sources.Frontmatter) {
          frontmatter = frontmatter || this.frontmatter(fileName);
          Object.keys(frontmatter).forEach((prop) => {
            delete values[prop];
          });
        }
      } else if (sources.Frontmatter) {
        values = this.frontmatter(fileName);
      }
    }
    if (sources === true || sources.Cache) {
      values["cache"] = this.cache(fileName);
    }
    return values;
  }
  patch(file, frontmatterData, propertyName = null, toValuesFile = false, prototype = false) {
    if (prototype && toValuesFile) {
      throw "Cannot patch toValuesFile and prototype at the same time.";
    }
    const { update } = _Metadata.MetaeditApi;
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype(toValuesFile, file, prototype);
    if (propertyName != null) {
      update(propertyName, frontmatterData, fileName);
    } else {
      Object.keys(frontmatterData).forEach((propertyName2) => update(propertyName2, frontmatterData[propertyName2], fileName));
    }
    return this.get(fileName);
  }
  set(file, frontmatterData, toValuesFile = false, prototype = false) {
    if (prototype && toValuesFile) {
      throw "Cannot patch toValuesFile and prototype at the same time.";
    }
    const { update } = _Metadata.MetaeditApi;
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype(toValuesFile, file, prototype);
    this.clear(fileName);
    Object.keys(frontmatterData).forEach((propertyName) => update(propertyName, frontmatterData[propertyName], fileName));
    return this.get(fileName);
  }
  clear(file = null, frontmatterProperties = null, toValuesFile = false, prototype = false) {
    if (prototype && toValuesFile) {
      throw "Cannot patch toValuesFile and prototype at the same time.";
    }
    const fileName = _Metadata._parseFileNameFromDataFileFileOrPrototype(toValuesFile, file, prototype);
    let propsToClear = [];
    if (typeof frontmatterProperties === "string") {
      propsToClear.push(frontmatterProperties);
    } else if (typeof frontmatterProperties === "object") {
      if (frontmatterProperties === null) {
        propsToClear = Object.keys(this.frontmatter(fileName));
      } else if (Array.isArray(frontmatterProperties)) {
        propsToClear = frontmatterProperties;
      } else {
        propsToClear = Object.keys(frontmatterProperties);
      }
    }
    throw "not implemented";
  }
  static ContainsDeepProperty(propertyPath, onObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = onObject;
    for (const currentKey of keys) {
      if (typeof parent !== "object") {
        return false;
      }
      if (!parent.hasOwnProperty(currentKey)) {
        return false;
      }
      parent = parent[currentKey];
    }
    return true;
  }
  static TryToGetDeepProperty(propertyPath, thenDo, fromObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = fromObject;
    for (const currentKey of keys) {
      if (typeof parent !== "object" || !parent.hasOwnProperty(currentKey)) {
        if (thenDo && thenDo.onFalse) {
          thenDo.onFalse();
        }
        return false;
      }
      parent = parent[currentKey];
    }
    if (thenDo) {
      const then = thenDo.onTrue || thenDo;
      if (then) {
        return then(parent);
      }
    }
    return true;
  }
  static GetDeepProperty(propertyPath, fromObject) {
    return (typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath).reduce((t, p) => t == null ? void 0 : t[p], fromObject);
  }
  static SetDeepProperty(propertyPath, value, onObject) {
    const keys = typeof propertyPath == "string" ? propertyPath.split(".") : propertyPath;
    let parent = onObject;
    let currentKey;
    for (currentKey of keys) {
      if (typeof parent !== "object") {
        throw `Property: ${currentKey}, in Path: ${propertyPath}, is not an object. Child property values cannot be set!`;
      }
      if (!parent.hasOwnProperty(currentKey)) {
        parent[currentKey] = {};
      }
      if (currentKey != keys[keys.length - 1]) {
        parent = parent[currentKey];
      }
    }
    if (!currentKey) {
      throw "No Final Key Provided!?";
    }
    if (typeof value === "function") {
      parent[currentKey] = value(parent[currentKey]);
    } else {
      parent[currentKey] = value;
    }
  }
  path(relativePath = null, extension = "", rootFolder = null) {
    if (!relativePath) {
      return this._addExtension(this.current.path, extension);
    }
    const [fileName, ...folders] = relativePath.split("/").reverse();
    let absolutePath = fileName;
    let currentFolder = rootFolder ? app.vault.getAbstractFileByPath(rootFolder) : this.Current.Note.parent;
    for (var folder of folders.reverse()) {
      if (folder === "..") {
        currentFolder = currentFolder.parent;
      } else if (folder === ".") {
        continue;
      } else {
        absolutePath = folder + "/" + absolutePath;
      }
    }
    if (currentFolder.path !== "/") {
      return this._addExtension(currentFolder.path + "/" + absolutePath, extension);
    } else {
      return this._addExtension(absolutePath, extension);
    }
  }
  _addExtension(path, extension) {
    if (extension) {
      if (typeof extension !== "string") {
        return path + ".md";
      } else {
        return path + "." + extension;
      }
    } else {
      return path;
    }
  }
  static ParseFileName(file) {
    let fileName = file || null;
    if (typeof file === "object" && file !== null) {
      fileName = file.path.split(".").slice(0, -1).join(".");
    }
    return fileName;
  }
  static BuildDataFileFullPath(dataPath) {
    return app.plugins.plugins["metadata-api"].settings.dataFilesPath + dataPath;
  }
  static BuildPrototypeFileFullPath(prototypePath) {
    return app.plugins.plugins["metadata-api"].settings.prototypesPath + prototypePath;
  }
  static _parseFileNameFromDataFileFileOrPrototype(toValuesFile, file, prototype) {
    return toValuesFile ? file ? _Metadata.BuildDataFileFullPath(_Metadata.ParseFileName(file)) : typeof toValuesFile === "string" ? _Metadata.BuildDataFileFullPath(toValuesFile) : _Metadata.BuildDataFileFullPath(_Metadata.Api.Current.Path) : prototype ? file ? _Metadata.BuildPrototypeFileFullPath(_Metadata.ParseFileName(file)) : typeof prototype === "string" ? _Metadata.BuildPrototypeFileFullPath(prototype) : _Metadata.BuildPrototypeFileFullPath(_Metadata.Api.Current.Path) : _Metadata.ParseFileName(file) || _Metadata.Api.Current.Path;
  }
};
var Metadata = _Metadata;
Metadata._caches = {};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBDYWNoZWRNZXRhZGF0YSwgSGVhZGluZ0NhY2hlLCBNZXRhZGF0YUNhY2hlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNlY3Rpb25DYWNoZSwgU2V0dGluZywgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5lbnVtIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbiB7XHJcbiAgRGlzYWJsZWQgPSAwLFxyXG4gIExvd2VyY2FzZSA9IDEsXHJcbiAgQ2FtZWxDYXNlID0gMixcclxuICBMb3dlckFuZENhbWVsQ2FzZSA9IDNcclxufVxyXG5cclxuaW50ZXJmYWNlIE1ldGFkYXRhQXBpU2V0dGluZ3Mge1xyXG4gIGdsb2JhbENhY2hlTmFtZTogc3RyaW5nO1xyXG4gIGdsb2JhbE1ldGFkYXRhQXBpTmFtZTogc3RyaW5nO1xyXG4gIGRlZmluZU9iamVjdFByb3BlcnR5SGVscGVyRnVuY3Rpb25zOiBib29sZWFuO1xyXG4gIHNwbGF5S2ViYWJDYXNlUHJvcGVydGllczogU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uO1xyXG4gIHNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXc6IGJvb2xlYW47XHJcbiAgcHJvdG90eXBlc1BhdGg6IHN0cmluZztcclxuICB2YWx1ZXNQYXRoOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1ldGFkYXRhQXBpU2V0dGluZ3MgPSB7XHJcbiAgZ2xvYmFsQ2FjaGVOYW1lOiAnY2FjaGUnLFxyXG4gIGdsb2JhbE1ldGFkYXRhQXBpTmFtZTogJ21ldGEnLFxyXG4gIGRlZmluZU9iamVjdFByb3BlcnR5SGVscGVyRnVuY3Rpb25zOiB0cnVlLFxyXG4gIHNwbGF5S2ViYWJDYXNlUHJvcGVydGllczogU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uLkxvd2VyQW5kQ2FtZWxDYXNlLFxyXG4gIHNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXc6IHRydWUsXHJcbiAgcHJvdG90eXBlc1BhdGg6IFwiXy9fYXNzZXRzL19kYXRhL19wcm90b3R5cGVzXCIsXHJcbiAgdmFsdWVzUGF0aDogXCJfL19hc3NldHMvX2RhdGEvX3ZhbHVlc1wiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZXRhZGF0YSBhcGkgb2JzaWRpYW4ubWQgcGx1Z2luXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRhZGF0YUFwaVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBNZXRhZGF0YTtcclxuICBzZXR0aW5nczogTWV0YWRhdGFBcGlTZXR0aW5ncztcclxuICBcclxuICBzdGF0aWMgZ2V0IEluc3RhbmNlKCkge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhQXBpUGx1Z2luLl9pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIGdldCBhcGkoKTogTWV0YWRhdGEge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhQXBpUGx1Z2luLl9pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIHN1cGVyLm9ubG9hZCgpO1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWV0YWRhdGFBcGlTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5faW5pdEFwaSgpO1xyXG4gIH1cclxuXHJcbiAgb251bmxvYWQoKSB7XHJcbiAgICB0aGlzLl9kZWluaXRBcGkoKTtcclxuICB9XHJcbiAgXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgfVxyXG4gIFxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAvLyByZXNldCB0aGUgYXBpIHdoZW4gc2V0dGluZ3MgYXJlIHVwZGF0ZWQuXHJcbiAgICB0aGlzLl9kZWluaXRBcGkoKTtcclxuICAgIHRoaXMuX2luaXRBcGkoKTtcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBfaW5pdEFwaSgpIHtcclxuICAgIHRoaXMuX3ZlcmlmeURlcGVuZGVuY2llcygpO1xyXG4gICAgTWV0YWRhdGFBcGlQbHVnaW4uX2luc3RhbmNlID0gbmV3IE1ldGFkYXRhKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuX2luaXRHbG9iYWxNZXRhZGF0YSgpO1xyXG4gICAgdGhpcy5faW5pdEdsb2JhbENhY2hlKCk7XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWZpbmVPYmplY3RQcm9wZXJ0eUhlbHBlckZ1bmN0aW9ucykge1xyXG4gICAgICB0aGlzLl9pbml0T2JqZWN0UHJvcGVydHlIZWxwZXJNZXRob2RzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogXHJcbiAgICogaWYgb25lIG9mIHRoZSBkZXBlbmRlbmllcyBpcyBtaXNzaW5nLCBkaXNhYmxlIHRoZSBwbHVnaW4gYW5kIHdhcm4gdGhlIHVzZXIuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfdmVyaWZ5RGVwZW5kZW5jaWVzKCkge1xyXG4gICAgaWYgKCFhcHAucGx1Z2lucy5wbHVnaW5zLmRhdGF2aWV3IHx8ICFhcHAucGx1Z2lucy5wbHVnaW5zLm1ldGFlZGl0KSB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gYENhbm5vdCBpbml0aWFsaXplIHBsdWdpbjogTWV0YWRhdGEtQXBpLiBEZXBlbmRlbmN5IHBsdWdpbiBpcyBtaXNzaW5nOiAkeyFhcHAucGx1Z2lucy5wbHVnaW5zLmRhdGF2aWV3ID8gXCJEYXRhdmlld1wiIDogXCJNZXRhZWRpdFwifS4gKFRoZSBtZXRhZGF0YS1hcGkgcGx1Z2luIGhhcyBiZWVuIGF1dG9tYXRpY2FsbHkgZGlzYWJsZWQuKWA7XHJcbiAgICAgIGFwcC5wbHVnaW5zLmRpc2FibGVQbHVnaW4oXCJtZXRhZGF0YS1hcGlcIik7XHJcbiAgICAgIGFsZXJ0KGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyNyZWdpb24gT2JqZWN0IHByb3BlcnR5IGFuZCBHbG9iYWwgZGVmZW5pdGlvbnMuXHJcblxyXG4gIHByaXZhdGUgX2luaXRPYmplY3RQcm9wZXJ0eUhlbHBlck1ldGhvZHMoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEZpbmQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdCwgcmV0dXJuaW5nIHRydWUgb24gc3VjY2Vzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAgICogQHBhcmFtIHt7b25UcnVlOmZ1bmN0aW9uKG9iamVjdCksIG9uRmFsc2U6ZnVuY3Rpb24oKX18ZnVuY3Rpb24ob2JqZWN0KXxbZnVuY3Rpb24ob2JqZWN0KSwgZnVuY3Rpb24oKV19IHRoZW5EbyAoT3B0aW9uYWwpIEEoc2V0IG9mKSBjYWxsYmFjayhzKSB0aGF0IHRha2VzIHRoZSBmb3VuZCB2YWx1ZSBhcyBhIHBhcmFtZXRlci4gRGVmYXVsdHMgdG8ganVzdCB0aGUgb25UcnVlIG1ldGhvZCBpZiBhIHNpbmdsZSBmdW5jdGlvbiBpcyBwYXNzZWQgaW4gb24gaXQncyBvd24uXHJcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMsIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsICdoYXNQcm9wJywge1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKHBhdGg6IHN0cmluZ3xBcnJheTxzdHJpbmc+LCB0aGVuRG86IGFueSkge1xyXG4gICAgICAgIGlmICh0aGVuRG8pIHtcclxuICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5UcnlUb0dldERlZXBQcm9wZXJ0eShwYXRoLCB0aGVuRG8sIHRoaXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQ29udGFpbnNEZWVwUHJvcGVydHkocGF0aCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBkZWVwIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0LCBvciByZXR1cm4gbnVsbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSBmb3VuZCBkZWVwIHByb3BlcnR5LCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgJ2dldFByb3AnLCB7XHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAocGF0aDogc3RyaW5nfEFycmF5PHN0cmluZz4sIGRlZmF1bHRWYWx1ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBNZXRhZGF0YS5HZXREZWVwUHJvcGVydHkocGF0aCwgdGhpcyk7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9LFxyXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSBkZWVwIHByb3BlcnR5IGluIGFuIG9iamVjdCwgZXZlbiBpZiBpdCBkb2Vzbid0IGV4aXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9uKG9iamVjdCl9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQsIG9yIGEgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm4gaXQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGZvdW5kIGRlZXAgcHJvcGVydHksIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQuXHJcbiAgICAgKi9cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCAnc2V0UHJvcCcsIHtcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChwcm9wZXJ0eVBhdGg6IHN0cmluZ3xBcnJheTxzdHJpbmc+LCB2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhLlNldERlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGgsIHZhbHVlLCB0aGlzKTtcclxuICAgICAgfSxcclxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfaW5pdEdsb2JhbE1ldGFkYXRhKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIG1ldGFkYXRhIG9uIGRlc2t0b3AuXHJcbiAgICAgICAqL1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCBcIk1ldGFkYXRhXCIsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2xvYmFsIGFjY2VzcyB0byB0aGUgbWV0YWRhdGEgb24gbW9iaWxlLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgXCJNZXRhZGF0YVwiLCB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgcmV0dXJuIE1ldGFkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHsgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHbG9iYWwgYWNjZXNzIHRvIHRoZSBtZXRhZGF0YSBvbiBkZXNrdG9wLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgdGhpcy5zZXR0aW5ncy5nbG9iYWxNZXRhZGF0YUFwaU5hbWUsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQXBpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIG1ldGFkYXRhIG9uIG1vYmlsZS5cclxuICAgICAgICovXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIHRoaXMuc2V0dGluZ3MuZ2xvYmFsTWV0YWRhdGFBcGlOYW1lLCB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgcmV0dXJuIE1ldGFkYXRhLkFwaTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2luaXRHbG9iYWxDYWNoZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHbG9iYWwgYWNjZXNzIHRvIHRoZSBjYWNoZSBvbiBkZXNrdG9wLlxyXG4gICAgICAgKi9cclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgdGhpcy5zZXR0aW5ncy5nbG9iYWxDYWNoZU5hbWUsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWV0YWRhdGEuQXBpLkN1cnJlbnQuQ2FjaGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdsb2JhbCBhY2Nlc3MgdG8gdGhlIGNhY2hlIG9uIG1vYmlsZS5cclxuICAgICAgICovXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csIHRoaXMuc2V0dGluZ3MuZ2xvYmFsQ2FjaGVOYW1lLCB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgcmV0dXJuIE1ldGFkYXRhLkFwaS5DdXJyZW50LkNhY2hlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0QXBpKCkge1xyXG4gICAgdGhpcy5fZGVpbml0R2xvYmFsTWV0YWRhdGEoKTtcclxuICAgIHRoaXMuX2RlaW5pdEdsb2JhbENhY2hlKCk7XHJcbiAgICB0aGlzLl9kZWluaXRPYmplY3RQcm9wZXJ0eUhlbHBlcnMoKTtcclxuICAgIFxyXG4gICAgTWV0YWRhdGFBcGlQbHVnaW4uX2luc3RhbmNlID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0R2xvYmFsQ2FjaGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBkZWxldGUgZ2xvYmFsW3RoaXMuc2V0dGluZ3MuZ2xvYmFsQ2FjaGVOYW1lXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICBkZWxldGUgd2luZG93W3RoaXMuc2V0dGluZ3MuZ2xvYmFsQ2FjaGVOYW1lXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kZWluaXRHbG9iYWxNZXRhZGF0YSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGRlbGV0ZSBnbG9iYWxbXCJNZXRhZGF0YVwiXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICBkZWxldGUgd2luZG93W1wiTWV0YWRhdGFcIl07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgZGVsZXRlIGdsb2JhbFt0aGlzLnNldHRpbmdzLmdsb2JhbE1ldGFkYXRhQXBpTmFtZV07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgZGVsZXRlIHdpbmRvd1t0aGlzLnNldHRpbmdzLmdsb2JhbE1ldGFkYXRhQXBpTmFtZV07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGVpbml0T2JqZWN0UHJvcGVydHlIZWxwZXJzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZGVsZXRlIE9iamVjdC5wcm90b3R5cGVbXCJoYXNQcm9wXCJdO1xyXG4gICAgfSBjYXRjaCB7IH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGRlbGV0ZSBPYmplY3QucHJvdG90eXBlW1wiZ2V0UHJvcFwiXTtcclxuICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB0cnkge1xyXG4gICAgICBkZWxldGUgT2JqZWN0LnByb3RvdHlwZVtcInNldFByb3BcIl07XHJcbiAgICB9IGNhdGNoIHsgfVxyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXR0aW5ncyBmb3IgdGhlIHBsdWdpblxyXG4gKi9cclxuY2xhc3MgTWV0YWRhdGFBcGlTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBNZXRhZGF0YUFwaVBsdWdpbjtcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWV0YWRhdGFBcGlQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNZWRhdGF0YSBBcGkgU2V0dGluZ3MnIH0pO1xyXG4gICAgXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ01ldGFkYXRhIEFwaSBWYXJpYWJsZSBOYW1lJylcclxuICAgICAgLnNldERlc2MoJ1RoZSB2YXJpYWJsZSBuYW1lIHRvIHVzZSBmb3IgdGhlIE1ldGFkYXRhIEFwaSBnbG9iYWwgc2NvcGUgdmFyaWFibGUgcmVnaXN0ZXJlZCBieSB0aGlzIHBsdWdpbicpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignbWV0YScpXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbE1ldGFkYXRhQXBpTmFtZSlcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxNZXRhZGF0YUFwaU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ0dsb2JhbCBDYWNoZSBWYXJpYWJsZSBOYW1lJylcclxuICAgICAgLnNldERlc2MoJ1RoZSB2YXJpYWJsZSBuYW1lIHRvIHVzZSBmb3IgdGhlIGNhY2hlIGdsb2JhbCBzY29wZSB2YXJpYWJsZSByZWdpc3RlcmVkIGJ5IHRoaXMgcGx1Z2luJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdjYWNoZScpXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbENhY2hlTmFtZSlcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxDYWNoZU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdBZGQgT2JqZWN0IFByb3BlcnR5IEhlbHBlciBGdW5jdGlvbnMuJylcclxuICAgICAgLnNldERlc2MoJ0FkZHMgdGhlIGZ1bmN0aW9uIGhhc1Byb3AsIGdldFByb3AsIGFuZCBzZXRQcm9wIHRvIGFsbCBvYmplY3RzIGZvciBkZWVwIHByb3BlcnR5IGFjY2Vzcy4nKVxyXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmaW5lT2JqZWN0UHJvcGVydHlIZWxwZXJGdW5jdGlvbnMpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmaW5lT2JqZWN0UHJvcGVydHlIZWxwZXJGdW5jdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdTcGxheSBLZWJhYi1DYXNlIFByb3BlcnRpZXMuJylcclxuICAgICAgLnNldERlc2MoJ1RoaXMgb3B0aW9uIGFkZHMgY29waWVzIG9mIGFueSBrZWJhYi1jYXNlIHByb3BlcnRpZXMgd2l0aCB0aGUgZGVzaXJlZCBuYW1pbmcgc2NoZW1lcy4gVGhpcyBpcyBzaW1pbGFyIHRvIGhvdyBhIGxvd2VyY2FzZSB2ZXJzaW9uIG9mIHZhbHVlcyB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzIGFyZSBwcm92aWRlZCBpbiBkYXRhdmlldy4nKVxyXG4gICAgICAuYWRkRHJvcGRvd24odG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGxheUtlYmFiQ2FzZVByb3BlcnRpZXMudG9TdHJpbmcoKSlcclxuICAgICAgICAuYWRkT3B0aW9ucyhPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24pLm1hcCgoW2tleSwgdmFsdWVdKSA9PlxyXG4gICAgICAgICAgICBba2V5LnRvU3RyaW5nKCksIHZhbHVlLnRvU3RyaW5nKCldKSlcclxuICAgICAgICApXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID0gKDxhbnk+U3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uKVtwYXJzZUludCh2YWx1ZSldO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1NwbGF5IEZyb250bWF0dGVyIFByb3BlcnRpZXMgdG8gTG93ZXIgQ2FzZSBldmVuIHdpdGhvdXQgRGF0YXZpZXcuJylcclxuICAgICAgLnNldERlc2MoJ0RhdGF2aWV3IHNwbGF5cyBwcm9wZXJ0eSBrZXlzIHdpdGggdXBwZXJjYXNlIHZhbHVlcyB0byBsb3dlcmNhc2UsIGNyZWF0aW5nIHR3byBrZXlzLiBJZiB0aGlzIGlzIHRydWUsIE1ldGFkYXRhIEFwaSB3aWxsIGFkZCB0aGlzIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGJhc2UgRnJvbnRtYXR0ZXIgY2FsbHMsIGV2ZW4gd2l0aG91dCBEYXRhdmlldyBzb3VyY2VzIGluY2x1ZGVkLicpXHJcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zcGxheUZyb250bWF0dGVyV2l0aG91dERhdGF2aWV3KVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNwbGF5RnJvbnRtYXR0ZXJXaXRob3V0RGF0YXZpZXcgPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdQcm90b3R5cGVzIEZpbGUgUGF0aCcpXHJcbiAgICAgIC5zZXREZXNjKCdUaGUgcGF0aCB0byBwcm90b3R5cGUgZGF0YSBzdG9yYWdlJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdfL19hc3NldHMvX2RhdGEvX3Byb3RvdHlwZXMnKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm90b3R5cGVzUGF0aClcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm90b3R5cGVzUGF0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnRGF0YSBTdG9yYWdlIFZhbHVlcyBQYXRoJylcclxuICAgICAgLnNldERlc2MoJ1RoZSBwYXRoIHRvIHRoZSB2YWx1ZSBkYXRhIHN0b3JhZ2UnKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJfL19hc3NldHMvX2RhdGEvX3ZhbHVlc1wiKVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52YWx1ZXNQYXRoKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZhbHVlc1BhdGggPSB2YWx1ZTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgc291cmNlcyB0byBwdWxsIE1ldGFkYXRhIHZhbHVlcyBmcm9tIGZvciBhIGZpbGUuXHJcbiAqL1xyXG5pbnRlcmZhY2UgTWV0YWRhdGFTb3VyY2VzIHtcclxuICAvKipcclxuICAgKiBUaGUgJ2ZpbGUnIGZpZWxkIGNvbnRhaW5pbmcgbWV0YWRhdGEgYWJvdXQgdGhlIGZpbGUgaXRzZWxmXHJcbiAgICovXHJcbiAgRmlsZUluZm86IGJvb2xlYW4sXHJcbiAgLyoqXHJcbiAgICogVGhlIEZyb250bWF0dGVyIChZQU1MIGF0IHRoZSB0b3Agb2YgYSBub3RlKVxyXG4gICAqL1xyXG4gIEZyb250bWF0dGVyOiBib29sZWFuLFxyXG4gIC8qKlxyXG4gICAqIElubGluZSBEYXRhdmlldyBkYXRhIGZpZWxkc1xyXG4gICAqL1xyXG4gIERhdGF2aWV3SW5saW5lOiBib29sZWFuLFxyXG4gIC8qKlxyXG4gICAqIENhY2hlZCB2YWx1ZXMgZnJvbSB0aGUgTWV0YWRhdGEuQ2FjaGUuXHJcbiAgICovXHJcbiAgQ2FjaGU6IGJvb2xlYW4sXHJcbiAgLyoqXHJcbiAgICogSGVhZGluZ3MgZnJvbSB0aGUgTWV0YWRhdGEgQ2FjaGVcclxuICAgKi9cclxuICBIZWFkaW5nczogYm9vbGVhbixcclxuICAvKipcclxuICAgKiBTZWN0aW9ucyBmcm9tIHRoZSBNZXRhZGF0YSBDYWNoZVxyXG4gICAqL1xyXG4gIFNlY3Rpb25zOiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBY2Nlc3MgdG8gY3VycmVudCBtZXRhZGF0YVxyXG4gKi9cclxuY2xhc3MgQ3VycmVudE1ldGFkYXRhIHtcclxuICBwcml2YXRlIF9hcGk6IE1ldGFkYXRhO1xyXG5cclxuICBjb25zdHJ1Y3RvcihtZXRhQXBpOiBNZXRhZGF0YSkge1xyXG4gICAgdGhpcy5fYXBpID0gbWV0YUFwaTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgTWV0YWRhdGEgZnJvbSB0aGUgZGVmYXVsdCBzb3VyY2VzIGZvciB0aGUgY3VycmVudCBmaWxlLlxyXG4gICAqL1xyXG4gIGdldCBEYXRhKCk6IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLmdldCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBNZXRhZGF0YSBmcm9tIHRoZSBkZWZhdWx0IHNvdXJjZXMgZm9yIHRoZSBjdXJyZW50IGZpbGUuXHJcbiAgICovXHJcbiAgZ2V0IGRhdGEoKTogb2JqZWN0IHtcclxuICAgIHJldHVybiB0aGlzLkRhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBub3RlIGZvY3VzZWQgYnkgdGhlIHdvcmtzcGFjZS5cclxuICAgKi9cclxuICBnZXQgTm90ZSgpOiBURmlsZSB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICBpZiAoIWN1cnJlbnQpIHtcclxuICAgICAgdGhyb3cgXCJObyBDdXJyZW50IEZpbGVcIjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY3VycmVudDtcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgbm90ZSBmb2N1c2VkIGJ5IHRoZSB3b3Jrc3BhY2UuXHJcbiAgICovXHJcbiAgZ2V0IG5vdGUoKTogVEZpbGUge1xyXG4gICAgcmV0dXJuIHRoaXMuTm90ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBjdXJyZW50IHBhdGggb2YgdGhlIGN1cnJlbnQgbm90ZVxyXG4gICAqL1xyXG4gIGdldCBQYXRoKCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBub3RlOiBURmlsZSA9IHRoaXMuTm90ZTtcclxuICAgIGxldCBwYXRoID0gbm90ZS5wYXRoO1xyXG4gICAgaWYgKG5vdGUuZXh0ZW5zaW9uKSB7XHJcbiAgICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIDAgLSAobm90ZS5leHRlbnNpb24ubGVuZ3RoICsgMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgcGF0aCBvZiB0aGUgY3VycmVudCBub3RlXHJcbiAgICovXHJcbiAgZ2V0IHBhdGgoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLlBhdGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBwYXRoIG9mIHRoZSBjdXJyZW50IG5vdGUgd2l0aCBpdCdzIGV4dGVuc2lvblxyXG4gICAqL1xyXG4gIGdldCBQYXRoRXgoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLlBhdGggKyBcIi5cIiArIHRoaXMubm90ZS5leHRlbnNpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgY3VycmVudCBwYXRoIG9mIHRoZSBjdXJyZW50IG5vdGUgd2l0aCBpdCdzIGV4dGVuc2lvblxyXG4gICAqL1xyXG4gIGdldCBwYXRoZXgoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLlBhdGhFeDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqdXN0IHRoZSBmcm9udG1hdHRlciBvZiB0aGUgY3VycmVudCBmaWxlXHJcbiAgICovXHJcbiAgZ2V0IE1hdHRlcigpIDogb2JqZWN0IHtcclxuICAgIHJldHVybiB0aGlzLl9hcGkuZnJvbnRtYXR0ZXIoKTtcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIGZyb250bWF0dGVyIG9mIHRoZSBjdXJyZW50IGZpbGVcclxuICAgKi9cclxuICBnZXQgbWF0dGVyKCk6IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5NYXR0ZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBY2Nlc3MgdGhlIGNhY2hlZCB2YWxlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBvbmx5LlxyXG4gICAqL1xyXG4gIGdldCBDYWNoZSgpIDogb2JqZWN0IHtcclxuICAgIHJldHVybiB0aGlzLl9hcGkuY2FjaGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjY2VzcyB0aGUgY2FjaGVkIHZhbGVzIGZvciB0aGUgY3VycmVudCBmaWxlIG9ubHkuXHJcbiAgICovXHJcbiAgZ2V0IGNhY2hlKCk6IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5DYWNoZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhdGNoIGluZGl2aWR1YWwgcHJvcGVydGllcyBvZiB0aGUgY3VycmVudCBmaWxlJ3MgZnJvbnRtYXR0ZXIgbWV0YWRhdGEuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHsqfG9iamVjdH0gZnJvbnRtYXR0ZXJEYXRhIFRoZSBwcm9wZXJ0aWVzIHRvIHBhdGNoLiBUaGlzIGNhbiBwYXRjaCBwcm9wZXJ0aWVzIG11bHRpcGxlIGtleXMgZGVlcCBhcyB3ZWxsLiBJZiBhIHByb3BlcnR5TmFtZSBpcyBwcm92aWRlZCB0aGVuIHRoaXMgZW50aXJlIG9iamVjdC92YWx1ZSBpcyBzZXQgdG8gdGhhdCBzaW5nbGUgcHJvcGVydHkgbmFtZSBpbnN0ZWFkXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5TmFtZSAoT3B0aW9uYWwpIElmIHlvdSB3YW50IHRvIHNldCB0aGUgZW50aXJlIGZyb250bWF0dGVyRGF0YSBwYXJhbWV0ZXIgdmFsdWUgdG8gYSBzaW5nbGUgcHJvcGVydHksIHNwZWNpZnkgdGhlIG5hbWUgb2YgdGhhdCBwcm9wZXJ0eSBoZXJlLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHRvVmFsdWVzRmlsZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHZhbHVlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gcGF0Y2ggc2FpZCBkYXRhIHZhbHVlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIHRoZSBwYXRoIGluIGhlcmUgaW5zdGVhZC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBwcm90b3R5cGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSBwcm90b3R5cGUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBwYXRjaCBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YS5cclxuICAgKi9cclxuICBwYXRjaChmcm9udG1hdHRlckRhdGE6IGFueSwgcHJvcGVydHlOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbCwgdG9WYWx1ZXNGaWxlOiBib29sZWFuIHwgc3RyaW5nID0gZmFsc2UsIHByb3RvdHlwZTogc3RyaW5nIHwgYm9vbGVhbiA9IGZhbHNlKTogYW55fG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpLnBhdGNoKHRoaXMucGF0aCwgZnJvbnRtYXR0ZXJEYXRhLCBwcm9wZXJ0eU5hbWUsIHRvVmFsdWVzRmlsZSwgcHJvdG90eXBlKTtcclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZSB0aGUgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgdGhlIGN1cnJlbnQgZmlsZSB3aXRoIGVudGlyZWx5IG5ldyBkYXRhLCBjbGVhcmluZyBvdXQgYWxsIG9sZCBkYXRhIGluIHRoZSBwcm9jZXNzLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBmcm9udG1hdHRlckRhdGEgVGhlIGVudGlyZSBmcm9udG1hdHRlciBoZWFkZXIgdG8gc2V0IGZvciB0aGUgZmlsZS4gVGhpcyBjbGVhcnMgYW5kIHJlcGxhY2VzIGFsbCBleGlzdGluZyBkYXRhIVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHRvVmFsdWVzRmlsZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHZhbHVlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gc2V0IHRvIHNhaWQgZGF0YSB2YWx1ZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyB0aGUgcGF0aCBpbiBoZXJlIGluc3RlYWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gcHJvdG90eXBlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgcHJvdG90eXBlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gc2V0IHRvIHNhaWQgZGF0YSBwcm90b3R5cGUgZmlsZS4gWW91IGNhbiBhbHNvIHBhc3MgaW4gdGhlIHBhdGggaGVyZSBpbnN0ZWFkLlxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIE1ldGFkYXRhXHJcbiAgICovXHJcbiAgc2V0KGZyb250bWF0dGVyRGF0YTogYW55LCB0b1ZhbHVlc0ZpbGU6IGJvb2xlYW4gfCBzdHJpbmcgPSBmYWxzZSwgcHJvdG90eXBlOiBzdHJpbmcgfCBib29sZWFuID0gZmFsc2UpOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaS5zZXQodGhpcy5wYXRoLCBmcm9udG1hdHRlckRhdGEsIHRvVmFsdWVzRmlsZSwgcHJvdG90eXBlKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXNlZCB0byBjbGVhciB2YWx1ZXMgZnJvbSBtZXRhZGF0YS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IGZpbGUgVGhlIGZpbGUgdG8gY2xlYXIgcHJvcGVydGllcyBmb3IuIGRlZmF1bHRzIHRvIHRoZSBjdXJyZW50IGZpbGUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IGZyb250bWF0dGVyUHJvcGVydGllcyAob3B0aW9uYWwpVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LCBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcywgb3IgYW4gb2JqZWN0IHdpdGggdGhlIG5hbWVkIGtleXMgeW91IHdhbnQgY2xlYXJlZC4gSWYgbGVmdCBibGFuaywgYWxsIGZyb250bWF0dGVyIGZvciB0aGUgZmlsZSBpcyBjbGVhcmVkIVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHRvVmFsdWVzRmlsZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHZhbHVlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gY2xlYXIgZnJvbSBzYWlkIGRhdGEgdmFsdWUgZmlsZS4gWW91IGNhbiBhbHNvIHBhc3MgdGhlIHBhdGggaW4gaGVyZSBpbnN0ZWFkLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHByb3RvdHlwZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHByb3RvdHlwZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIGNsZWFyIGZyb20gc2FpZCBkYXRhIHByb3RvdHlwZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyBpbiB0aGUgcGF0aCBoZXJlIGluc3RlYWQuXHJcbiAgICovXHJcbiAgY2xlYXIoZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzOiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+IHwgb2JqZWN0IHwgbnVsbCA9IG51bGwsIHRvVmFsdWVzRmlsZTogYm9vbGVhbiB8IHN0cmluZyA9IGZhbHNlLCBwcm90b3R5cGU6IHN0cmluZyB8IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2FwaS5jbGVhcih0aGlzLnBhdGgsIGZyb250bWF0dGVyUHJvcGVydGllcywgdG9WYWx1ZXNGaWxlLCBwcm90b3R5cGUpO1xyXG4gIH1cclxufVxyXG5cclxuLy8jcmVnaW9uIE5vdGUgSGVhZGluZyBTZWN0aW9uc1xyXG5cclxuXHJcbmludGVyZmFjZSBTZWN0aW9uc05vdGVEYXRhIHtcclxuICBwYXRoOiBzdHJpbmc7XHJcbiAgY29udGVudHM6IHN0cmluZztcclxuICBhbGw6IFJlY29yZDxzdHJpbmcsIFNlY3Rpb25bXT47XHJcbiAgbmFtZWQobmFtZTogc3RyaW5nKTogU2VjdGlvbltdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU2VjdGlvbnNDb2xsZWN0aW9uIHtcclxuICBba2V5OiBzdHJpbmddOiBTZWN0aW9uXHJcbn1cclxuXHJcbnR5cGUgU2VjdGlvbnMgPSBTZWN0aW9uc0NvbGxlY3Rpb24gJiBTZWN0aW9uc05vdGVEYXRhO1xyXG5cclxuY2xhc3MgTm90ZVNlY3Rpb25zIGV4dGVuZHMgT2JqZWN0IGltcGxlbWVudHMgU2VjdGlvbnMge1xyXG4gIFtrZXk6IHN0cmluZ106IFNlY3Rpb247XHJcbiAgYWxsOiBSZWNvcmQ8c3RyaW5nLCBTZWN0aW9uW10+ID0ge307XHJcbiAgcGF0aDogc3RyaW5nID0gXCJcIjtcclxuICBjb250ZW50czogc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3Iobm90ZVBhdGg6IHN0cmluZywgaGVhZGluZ3M6IEhlYWRpbmdDYWNoZVtdKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wYXRoID0gbm90ZVBhdGg7XHJcblxyXG4gICAgbGV0IHBhcmVudDogTm90ZVNlY3Rpb24gPSBudWxsO1xyXG4gICAgZm9yIChjb25zdCBoZWFkaW5nIG9mIGhlYWRpbmdzKSB7XHJcbiAgICAgIC8vIG1ha2UgdGhlIG5ldyBzZWN0aW9uXHJcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBuZXcgTm90ZVNlY3Rpb24obm90ZVBhdGgsIGhlYWRpbmcpO1xyXG5cclxuICAgICAgLy8gaWYgdGhlcmUncyBubyBjdXJyZW50IHBhcmVudCwgb3IgdGhlIGxldmVsIG9mIHRoaXMgaXMgdGhlIHNhbWUgYXMgb3IgZ3JlYXRlciB0aGFuIHRoZSBjdXJyZW50IHBhcmVudCwgc3dpdGNoIHRoaXMgdG8gdGhlIHBhcmVudC5cclxuICAgICAgaWYgKCFwYXJlbnQgfHwgKGN1cnJlbnQubGV2ZWwgPj0gcGFyZW50LmxldmVsKSkge1xyXG4gICAgICAgIHBhcmVudCA9IGN1cnJlbnQ7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcGFyZW50LmtleXMpIHtcclxuICAgICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHBhcmVudDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFyZW50LmFkZENoaWxkKGN1cnJlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdXJyZW50LmtleXMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWxsW2tleV0pIHtcclxuICAgICAgICAgIHRoaXMuYWxsW2tleV0ucHVzaChjdXJyZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5hbGxba2V5XSA9IFtjdXJyZW50XTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgdGhlIHNlY3Rpb25zIHdpdGggYSBnaXZlbiBuYW1lIGluIG9uZSBhcnJheS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZS9rZXkgb2YgdGhlIHNlY3Rpb25zIHlvdSB3YW50XHJcbiAgICovXHJcbiAgbmFtZWQobmFtZTogc3RyaW5nKTogU2VjdGlvbltdIHtcclxuICAgIHJldHVybiBOb3RlU2VjdGlvbi5TcGxheUtleXMobmFtZSlcclxuICAgICAgLm1hcChrID0+IHRoaXMuYWxsW2tdKVxyXG4gICAgICAuZmlsdGVyKHMgPT4gcylcclxuICAgICAgLmZsYXQoKVxyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFNlY3Rpb25JbmZvIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGxldmVsOiBudW1iZXI7XHJcbiAga2V5czogc3RyaW5nW107XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHBhdGg6IHN0cmluZztcclxuICBwYXJlbnQ6IFNlY3Rpb258bnVsbDtcclxuICBjaGlsZHJlbjogUmVjb3JkPHN0cmluZywgU2VjdGlvbj47XHJcbiAgZ2V0IGNvbnRlbnRzKCk6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFNlY3Rpb25DaGlsZHJlbiB7XHJcbiAgW2tleTogc3RyaW5nXTogU2VjdGlvblxyXG59XHJcblxyXG50eXBlIFNlY3Rpb25cclxuICA9IFNlY3Rpb25DaGlsZHJlbiAmIFNlY3Rpb25JbmZvO1xyXG5cclxuY2xhc3MgTm90ZVNlY3Rpb24gaW1wbGVtZW50cyBTZWN0aW9uIHtcclxuICBba2V5OiBzdHJpbmddOiBOb3RlU2VjdGlvbjtcclxuICBpZDogc3RyaW5nID0gXCJcIjtcclxuICBsZXZlbDogbnVtYmVyID0gMDtcclxuICBrZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvdW50OiBudW1iZXIgPSAwO1xyXG4gIHBhdGg6IHN0cmluZyA9IFwiXCI7XHJcbiAgdGl0bGU6IHN0cmluZyA9IFwiXCI7XHJcbiAgcGFyZW50OiBOb3RlU2VjdGlvbnxudWxsID0gbnVsbDtcclxuICBjaGlsZHJlbjogUmVjb3JkPHN0cmluZywgTm90ZVNlY3Rpb24+ID0ge307XHJcbiAgXHJcbiAgZ2V0IGNvbnRlbnRzKCk6IHN0cmluZyB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgfVxyXG5cclxuICAvLyNyZWdpb24gSW5pdGlhbGl6YXRpb25cclxuXHJcbiAgY29uc3RydWN0b3Iobm90ZVBhdGg6IHN0cmluZywgaGVhZGluZzogSGVhZGluZ0NhY2hlKSB7XHJcbiAgICB0aGlzLnBhdGggPSBub3RlUGF0aDtcclxuICAgIHRoaXMuaWQgPSBoZWFkaW5nLmlkIHx8IG51bGw7XHJcbiAgICB0aGlzLmxldmVsID0gaGVhZGluZy5sZXZlbDtcclxuICAgIHRoaXMudGl0bGUgPSBoZWFkaW5nLmhlYWRpbmc7XHJcblxyXG4gICAgdGhpcy5rZXlzID0gTm90ZVNlY3Rpb24uU3BsYXlLZXlzKHRoaXMudGl0bGUpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2hpbGQoY2hpbGQ6IE5vdGVTZWN0aW9uKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjaGlsZC5rZXlzKSB7XHJcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgdGhpc1trZXldID0gY2hpbGQ7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRoaXMuY2hpbGRyZW5ba2V5XSA9IGNoaWxkO1xyXG4gICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY291bnQgKz0gMTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBTcGxheUtleXModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qga2V5cyA9IFt0ZXh0XTtcclxuXHJcbiAgICAvLyBjbGVhbiB0aGUga2V5IG9mIGRhdGF2aWV3IHZhbHVlcyBhbmQgd2lraWxpbmtzXHJcbiAgICBsZXQgY2xlYW5lZCA9IHRleHQ7XHJcbiAgICBpZiAoY2xlYW5lZC5jb250YWlucyhcIltcIikpIHtcclxuICAgICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZShcIi9cXFtcXFsoPzooPzooW15cXF1dKilcXHwoW15cXF1dKikpfChbXlxcXV0qKSlcXF1cXF0vZ1wiLCBcIiQyJDNcIik7XHJcbiAgICAgIGlmIChjbGVhbmVkLmNvbnRhaW5zKFwiOjpcIikpIHtcclxuICAgICAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKFwiL1xcWyg/Oig/Oig/OihbXlxcWzpcXHxdKilcXHwoW15cXFs6XSopOjooW15cXF1dKikpKXwoPzooPzooW15cXFs6XSopOjooW15cXF1dKikpKSlcXF0vZ1wiLCBcIiQyJDRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBrZXlzLnB1c2goY2xlYW5lZCk7XHJcblxyXG4gICAgaWYgKE1ldGFkYXRhLkFwaS5wbHVnaW4uc2V0dGluZ3Muc3BsYXlGcm9udG1hdHRlcldpdGhvdXREYXRhdmlldykge1xyXG4gICAgICBjb25zdCBsb3dlciA9IGNsZWFuZWQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgY2FtZWwgPSBjbGVhbmVkLnJlcGxhY2UoXCIgXCIsIFwiXCIpO1xyXG4gICAgICBsZXQgTG93ZXJDYW1lbCA9IGNhbWVsWzBdLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zdWJzdHJpbmcoMSk7XHJcblxyXG4gICAgICBrZXlzLnB1c2gobG93ZXIsIGNhbWVsLCBMb3dlckNhbWVsKTtcclxuICAgICAgaWYgKE1ldGFkYXRhLkFwaS5QbHVnaW4uc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzICYmIGNsZWFuZWQuY29udGFpbnMoXCItXCIpKSB7XHJcbiAgICAgICAgaWYgKE1ldGFkYXRhLkFwaS5QbHVnaW4uc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID09PSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uTG93ZXJBbmRDYW1lbENhc2UpIHtcclxuICAgICAgICAgIGNvbnN0IGxvd2VyS2V5ID0gY2xlYW5lZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAga2V5cy5wdXNoKGxvd2VyS2V5LnJlcGxhY2UoLy0vZywgXCJcIikpO1xyXG4gICAgICAgICAga2V5cy5wdXNoKGxvd2VyS2V5XHJcbiAgICAgICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgICAgIC5tYXAoKHBhcnQsIGkpID0+IGkgIT09IDAgPyBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiBwYXJ0KVxyXG4gICAgICAgICAgICAuam9pbignJykpO1xyXG4gICAgICAgICAga2V5cy5wdXNoKGNsZWFuZWRcclxuICAgICAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAgICAgLm1hcChwYXJ0ID0+IHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnN1YnN0cmluZygxKSlcclxuICAgICAgICAgICAgLmpvaW4oJycpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKE1ldGFkYXRhLkFwaS5QbHVnaW4uc2V0dGluZ3Muc3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzID09PSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uTG93ZXJjYXNlKSB7XHJcbiAgICAgICAgICBrZXlzLnB1c2goY2xlYW5lZC5yZXBsYWNlKC8tL2csIFwiXCIpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoTWV0YWRhdGEuQXBpLlBsdWdpbi5zZXR0aW5ncy5zcGxheUtlYmFiQ2FzZVByb3BlcnRpZXMgPT09IFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5DYW1lbENhc2UpIHtcclxuICAgICAgICAgIGtleXMucHVzaChjbGVhbmVkXHJcbiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIC5zcGxpdCgnLScpXHJcbiAgICAgICAgICAgIC5tYXAoKHBhcnQsIGkpID0+IGkgIT09IDAgPyBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zdWJzdHJpbmcoMSkgOiBwYXJ0KVxyXG4gICAgICAgICAgICAuam9pbignJylcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBrZXlzLnB1c2goY2xlYW5lZFxyXG4gICAgICAgICAgICAuc3BsaXQoJy0nKVxyXG4gICAgICAgICAgICAubWFwKHBhcnQgPT4gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpKVxyXG4gICAgICAgICAgICAuam9pbignJylcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGtleXM7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxufVxyXG5cclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vKipcclxuICogQWNjZXNzIGFuZCBlZGl0IG1ldGFkYXRhIGFib3V0IGEgZmlsZSBmcm9tIG11bHRpcGxlIHNvdXJjZXMuXHJcbiAqL1xyXG5jbGFzcyBNZXRhZGF0YSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgX2NhY2hlczogYW55ID0ge307XHJcbiAgcHJpdmF0ZSBfcGx1Z2luOiBNZXRhZGF0YUFwaVBsdWdpbjtcclxuICBwcml2YXRlIF9rZWJhYlByb3BTcGxheWVyOiAoYmFzZTogYW55LCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZTogQXJyYXk8c3RyaW5nPnxudWxsKSA9PiBvYmplY3Q7XHJcbiAgcHJpdmF0ZSBfbG93ZXJDYXNlU3BsYXllcjogKGJhc2U6IGFueSkgPT4gb2JqZWN0O1xyXG4gIFxyXG4gIC8vI3JlZ2lvbiBJbml0YWxpemF0aW9uXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTWV0YWRhdGFBcGlQbHVnaW4pIHtcclxuICAgIHRoaXMuX3BsdWdpbiA9IHBsdWdpbjtcclxuICAgIHRoaXMuX2luaXRpYWxpemVLZWJhYlByb3BTcGxheWVyKCk7XHJcbiAgICB0aGlzLl9pbml0aWFsaXplUHJvcExvd2VyY2FzZVNwbGF5ZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHNldCB0aGUgc3BsYXkgZnVuY3Rpb24gZm9yIGtlYmFiIGNhc2VcclxuICAgKi9cclxuICBwcml2YXRlIF9pbml0aWFsaXplS2ViYWJQcm9wU3BsYXllcigpIHtcclxuICAgIHRoaXMuX2tlYmFiUHJvcFNwbGF5ZXIgPSAoKCkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMucGx1Z2luLnNldHRpbmdzLnNwbGF5S2ViYWJDYXNlUHJvcGVydGllcykge1xyXG4gICAgICAgIGNhc2UgU3BsYXlLZWJhYkNhc2VQcm9wZXJ0aWVzT3B0aW9uLkxvd2VyY2FzZTpcclxuICAgICAgICAgIHJldHVybiAoYmFzZSwgdG9wTGV2ZWxQcm9wZXJ0aWVzVG9JZ25vcmUpID0+IE1ldGFkYXRhLl9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKGJhc2UsIE1ldGFkYXRhLl9zcGxheUtlYmFiVG9Mb3dlcmNhc2UsIHRvcExldmVsUHJvcGVydGllc1RvSWdub3JlKTtcclxuICAgICAgICBjYXNlIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5DYW1lbENhc2U6XHJcbiAgICAgICAgICByZXR1cm4gKGJhc2UsIHRvcExldmVsUHJvcGVydGllc1RvSWdub3JlKSA9PiBNZXRhZGF0YS5fcmVjdXJzZU9uQWxsT2JqZWN0UHJvcGVydGllcyhiYXNlLCBNZXRhZGF0YS5fc3BsYXlLZWJhYlRvTG93ZXJDYW1lbGNhc2UsIHRvcExldmVsUHJvcGVydGllc1RvSWdub3JlKTtcclxuICAgICAgICBjYXNlIFNwbGF5S2ViYWJDYXNlUHJvcGVydGllc09wdGlvbi5Mb3dlckFuZENhbWVsQ2FzZTpcclxuICAgICAgICAgIHJldHVybiAoYmFzZSwgdG9wTGV2ZWxQcm9wZXJ0aWVzVG9JZ25vcmUpID0+IE1ldGFkYXRhLl9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKGJhc2UsIE1ldGFkYXRhLl9zcGxheUtlYmFiVG9Mb3dlckFuZExvd2VyQ2FtZWxjYXNlLCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZSk7XHJcbiAgICAgICAgY2FzZSBTcGxheUtlYmFiQ2FzZVByb3BlcnRpZXNPcHRpb24uRGlzYWJsZWQ6XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiBiYXNlID0+IGJhc2U7XHJcbiAgICAgIH1cclxuICAgIH0pKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzZXQgdGhlIGZyb250bWF0dGVyIG9ubHkgc3BsYXkgZnVuY3Rpb25cclxuICAgKi9cclxuICBwcml2YXRlIF9pbml0aWFsaXplUHJvcExvd2VyY2FzZVNwbGF5ZXIoKSB7XHJcbiAgICB0aGlzLl9sb3dlckNhc2VTcGxheWVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3BsYXlGcm9udG1hdHRlcldpdGhvdXREYXRhdmlld1xyXG4gICAgICAgID8gYmFzZSA9PiBNZXRhZGF0YS5fcmVjdXJzZU9uQWxsT2JqZWN0UHJvcGVydGllcyhiYXNlLCBNZXRhZGF0YS5fc3BsYXlUb0xvd2VyQ2FzZSlcclxuICAgICAgICA6IGJhc2UgPT4gYmFzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gcmVjdXJzZSBzcGxheWluZ1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIF9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKHZhbHVlOiBhbnksIGZuOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGRhdGE6IGFueSB8IG9iamVjdCkgPT4gYW55IHwgb2JqZWN0LCB0b3BMZXZlbFByb3BlcnRpZXNUb0lnbm9yZTogQXJyYXk8c3RyaW5nPiB8IG51bGwgPSBudWxsKTogYW55IHtcclxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChpID0+XHJcbiAgICAgICAgICB0aGlzLl9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKGksIGZuKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZGF0YTogYW55ID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XHJcbiAgICAgICAgICBpZiAodG9wTGV2ZWxQcm9wZXJ0aWVzVG9JZ25vcmUgJiYgdG9wTGV2ZWxQcm9wZXJ0aWVzVG9JZ25vcmUuY29udGFpbnMoa2V5KSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZVtrZXldO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm4oa2V5LCB0aGlzLl9yZWN1cnNlT25BbGxPYmplY3RQcm9wZXJ0aWVzKHZhbHVlW2tleV0sIGZuKSwgZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBfc3BsYXlLZWJhYlRvTG93ZXJjYXNlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBkYXRhOiBhbnkgfCBvYmplY3QpIDogYW55IHwgb2JqZWN0IHtcclxuICAgIGlmIChrZXkuaW5jbHVkZXMoXCItXCIpKSB7XHJcbiAgICAgIGRhdGFba2V5LnJlcGxhY2UoLy0vZywgXCJcIikudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIF9zcGxheUtlYmFiVG9Mb3dlckNhbWVsY2FzZShrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZGF0YTogYW55IHwgb2JqZWN0KSA6IGFueSB8IG9iamVjdCB7XHJcbiAgICBpZiAoa2V5LmluY2x1ZGVzKFwiLVwiKSkge1xyXG4gICAgICBkYXRhW2tleVxyXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAubWFwKChwYXJ0LCBpKSA9PiBpICE9PSAwID8gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpIDogcGFydClcclxuICAgICAgICAuam9pbignJylcclxuICAgICAgXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGFba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgX3NwbGF5S2ViYWJUb0xvd2VyQW5kTG93ZXJDYW1lbGNhc2Uoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGRhdGE6IGFueSB8IG9iamVjdCkgOiBhbnkgfCBvYmplY3Qge1xyXG4gICAgaWYgKGtleS5pbmNsdWRlcyhcIi1cIikpIHtcclxuICAgICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgZGF0YVtsb3dlcktleS5yZXBsYWNlKC8tL2csIFwiXCIpXSA9IHZhbHVlO1xyXG4gICAgICBkYXRhW2xvd2VyS2V5XHJcbiAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAubWFwKChwYXJ0LCBpKSA9PiBpICE9PSAwID8gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc3Vic3RyaW5nKDEpIDogcGFydClcclxuICAgICAgICAuam9pbignJyldID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGF0YVtrZXldID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBfc3BsYXlUb0xvd2VyQ2FzZShrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZGF0YTogYW55IHwgb2JqZWN0KTogYW55IHwgb2JqZWN0IHtcclxuICAgIGRhdGFba2V5XSA9IHZhbHVlO1xyXG4gICAgZGF0YVtrZXkudG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvKipcclxuICAgKiBUaGUgaW5zdGFuY2Ugb2YgdGhlIE1ldGFkYXRhIGNsYXNzXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBBcGkoKTogTWV0YWRhdGEge1xyXG4gICAgcmV0dXJuIE1ldGFkYXRhQXBpUGx1Z2luLkluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWNjZXNzIHRvIHRoZSBEYXRhdmlldyBBcGlcclxuICAgKiAoUmVhZCBhY2Nlc3MgYW5kIERhdGEgZGlzcGxheSlcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IERhdGF2aWV3QXBpKCkge1xyXG4gICAgcmV0dXJuIGFwcFxyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAuZGF0YXZpZXdcclxuICAgICAgLmFwaTtcclxuICB9XHJcbiAgXHJcbiAgLyoqIFxyXG4gICAqIEFjY2VzcyB0byB0aGUgTWV0YWVkaXQgQXBpXHJcbiAgICogKFdyaXRlIGFjY2VzcylcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IE1ldGFlZGl0QXBpKCkge1xyXG4gICAgcmV0dXJuIGFwcFxyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAucGx1Z2luc1xyXG4gICAgICAubWV0YWVkaXRcclxuICAgICAgLmFwaTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgcGx1Z2luIHRoYXQgcnVucyB0aGlzIGFwaVxyXG4gICAqL1xyXG4gIGdldCBQbHVnaW4oKTogTWV0YWRhdGFBcGlQbHVnaW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBwbHVnaW4gdGhhdCBydW5zIHRoaXMgYXBpXHJcbiAgICovXHJcbiAgZ2V0IHBsdWdpbigpOiBNZXRhZGF0YUFwaVBsdWdpbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGx1Z2luIHx8IGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1hcGlcIl07XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IHNvdXJjZXMgdG8gcHVsbCBNZXRhZGF0YSB2YWx1ZXMgZnJvbSBmb3IgYSBmaWxlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgRGVmYXVsdFNvdXJjZXMoKSA6IE1ldGFkYXRhU291cmNlcyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvKipcclxuICAgICAgICogVGhlICdmaWxlJyBmaWVsZCBjb250YWluaW5nIG1ldGFkYXRhIGFib3V0IHRoZSBmaWxlIGl0c2VsZlxyXG4gICAgICAgKi9cclxuICAgICAgRmlsZUluZm86IHRydWUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUaGUgRnJvbnRtYXR0ZXIgKFlBTUwgYXQgdGhlIHRvcCBvZiBhIG5vdGUpXHJcbiAgICAgICAqL1xyXG4gICAgICBGcm9udG1hdHRlcjogdHJ1ZSxcclxuICAgICAgLyoqXHJcbiAgICAgICAqIElubGluZSBEYXRhdmlldyBkYXRhIGZpZWxkc1xyXG4gICAgICAgKi9cclxuICAgICAgRGF0YXZpZXdJbmxpbmU6IHRydWUsXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDYWNoZWQgdmFsdWVzIGZyb20gdGhlIE1ldGFkYXRhLkNhY2hlIGluIGEgc2luZ2xlIGZpZWxkIG5hbWVkICdjYWNoZScuXHJcbiAgICAgICAqL1xyXG4gICAgICBDYWNoZTogdHJ1ZSxcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEhlYWRpbmdzIGZyb20gdGhlIE1ldGFkYXRhIENhY2hlXHJcbiAgICAgICAqL1xyXG4gICAgICBIZWFkaW5nczogdHJ1ZSxcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNlY3Rpb25zIGZyb20gdGhlIE1ldGFkYXRhIENhY2hlXHJcbiAgICAgICAqL1xyXG4gICAgICBTZWN0aW9uczogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vI3JlZ2lvbiBDdXJyZW50IEZpbGUgUHJvcGVydGllc1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIE1ldGFkYXRhIGZyb20gdGhlIGRlZmF1bHQgc291cmNlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKi9cclxuICBnZXQgQ3VycmVudCgpIDogQ3VycmVudE1ldGFkYXRhIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIE1ldGFkYXRhIGZyb20gdGhlIGRlZmF1bHQgc291cmNlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKi9cclxuICBnZXQgY3VycmVudCgpOiBDdXJyZW50TWV0YWRhdGEge1xyXG4gICAgcmV0dXJuIG5ldyBDdXJyZW50TWV0YWRhdGEodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIE1ldGFkYXRhIGZyb20gdGhlIGRlZmF1bHQgc291cmNlcyBmb3IgdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKi9cclxuICBnZXQgRGF0YSgpIDogb2JqZWN0IHtcclxuICAgIHJldHVybiB0aGlzLkN1cnJlbnQuRGF0YTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbGwgTWV0YWRhdGEgZnJvbSB0aGUgZGVmYXVsdCBzb3VyY2VzIGZvciB0aGUgY3VycmVudCBmaWxlLlxyXG4gICAqL1xyXG4gIGdldCBkYXRhKCk6IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5DdXJyZW50LkRhdGE7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIE1ldGFkYXRhIEZldGNoZXJzXHJcblxyXG4gIC8qKlxyXG4gICAqIFVzZWQgdG8gZmV0Y2ggdGhlIGZpbGUgY2FjaGUgb2JqZWN0IFxyXG4gICAqIEBwYXJhbSBmaWxlIFxyXG4gICAqL1xyXG4gIGdldE9ic2lkaWFuTWV0YWRhdGFGaWxlQ2FjaGUoZmlsZTogc3RyaW5nIHwgVEZpbGUgfCBudWxsID0gbnVsbCk6IENhY2hlZE1ldGFkYXRhIHwgbnVsbCB7XHJcbiAgICBjb25zdCBwYXRoID0gKE1ldGFkYXRhLlBhcnNlRmlsZU5hbWUoZmlsZSkgfHwgdGhpcy5DdXJyZW50LlBhdGgpICsgXCIubWRcIjtcclxuICAgIGNvbnN0IGZpbGVPYmplY3QgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cclxuICAgIGlmICghKGZpbGVPYmplY3QgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuICAgICAgdGhyb3cgYE5vdGUgTm90IEZvdW5kOiAke3BhdGh9YDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVPYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgZ2l2ZW4gZmlsZS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IGZpbGUgVGhlIGZpbGUgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBmaWxlIHBhdGhcclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBKdXN0IHRoZSBmcm9udG1hdHRlciBmb3IgdGhlIGZpbGUuXHJcbiAgICovXHJcbiAgZnJvbnRtYXR0ZXIoZmlsZTogc3RyaW5nIHwgVEZpbGUgfCBudWxsID0gbnVsbCk6IG9iamVjdCB7XHJcbiAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmdldE9ic2lkaWFuTWV0YWRhdGFGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICByZXR1cm4gKGZpbGVDYWNoZSAmJiBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXIpID8gdGhpcy5fbG93ZXJDYXNlU3BsYXllcih0aGlzLl9rZWJhYlByb3BTcGxheWVyKGZpbGVDYWNoZT8uZnJvbnRtYXR0ZXIsIG51bGwpKSA6IHt9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIHNlY3Rpb25zIGZvciB0aGUgZ2l2ZW4gZmlsZS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IGZpbGUgVGhlIGZpbGUgb2JqZWN0KHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciB0aGUgZnVsbCBmaWxlIHBhdGhcclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBKdXN0IHRoZSBzZWN0aW9ucyB1bmRlciB0aGVpciBoZWFkaW5ncyBmb3IgdGhlIGZpbGUuXHJcbiAgICovXHJcbiAgc2VjdGlvbnMoZmlsZTogc3RyaW5nIHwgVEZpbGUgfCBudWxsID0gbnVsbCk6IG9iamVjdCB7XHJcbiAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmdldE9ic2lkaWFuTWV0YWRhdGFGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICByZXR1cm4gKGZpbGVDYWNoZSAmJiBmaWxlQ2FjaGUuc2VjdGlvbnMpID8gdGhpcy5fbG93ZXJDYXNlU3BsYXllcih0aGlzLl9rZWJhYlByb3BTcGxheWVyKGZpbGVDYWNoZT8uc2VjdGlvbnMsIG51bGwpKSA6IHt9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGp1c3QgdGhlIHNlY3Rpb24gaGVhZGluZ3MgZm9yIHRoZSBnaXZlbiBmaWxlLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ30gZmlsZSBUaGUgZmlsZSBvYmplY3Qod2l0aCBhIHBhdGggcHJvcGVydHkpIG9yIHRoZSBmdWxsIGZpbGUgcGF0aFxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIEp1c3QgdGhlIGhlYWRpbmdzIGZvciB0aGUgZmlsZS5cclxuICAgKi9cclxuICBoZWFkaW5ncyhmaWxlOiBzdHJpbmcgfCBURmlsZSB8IG51bGwgPSBudWxsKTogb2JqZWN0IHtcclxuICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuZ2V0T2JzaWRpYW5NZXRhZGF0YUZpbGVDYWNoZShmaWxlKTtcclxuICAgIHJldHVybiAoZmlsZUNhY2hlICYmIGZpbGVDYWNoZS5oZWFkaW5ncykgPyB0aGlzLl9sb3dlckNhc2VTcGxheWVyKHRoaXMuX2tlYmFiUHJvcFNwbGF5ZXIoZmlsZUNhY2hlPy5oZWFkaW5ncywgbnVsbCkpIDoge307XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGRhdGF2aWV3IGFwaSB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBmaWxlOyBJbmxpbmUsIGZyb250bWF0dGVyLCBhbmQgdGhlIGZpbGUgdmFsdWUuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfSBmaWxlIFRoZSBmaWxlIG9iamVjdCh3aXRoIGEgcGF0aCBwcm9wZXJ0eSkgb3IgdGhlIGZ1bGwgZmlsZSBwYXRoXHJcbiAgICogXHJcbiAgICogQHJldHVybnMgSnVzdCB0aGUgZGF0YXZpZXcpK2Zyb250bWF0dGVyKSB2YWx1ZXMgZm9yIHRoZSBmaWxlLlxyXG4gICAqL1xyXG4gIGR2KGZpbGU6IHN0cmluZyB8IFRGaWxlIHwgbnVsbCA9IG51bGwpOiBvYmplY3Qge1xyXG4gICAgcmV0dXJuIHRoaXMuX2tlYmFiUHJvcFNwbGF5ZXIoTWV0YWRhdGFcclxuICAgICAgLkRhdGF2aWV3QXBpXHJcbiAgICAgIC5wYWdlKGZpbGUgPyBNZXRhZGF0YS5QYXJzZUZpbGVOYW1lKGZpbGUpIDogdGhpcy5DdXJyZW50LlBhdGgpLCBbXCJmaWxlXCJdKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqdXN0IHRoZSBjYWNoZSBkYXRhIGZvciBhIGZpbGUuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtvYmplY3R8c3RyaW5nfSBmaWxlIFRoZSBmaWxlIG9yIGZpbGVuYW1lIHRvIGZldGNoIGZvci5cclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgY2FjaGUgZGF0YSBvbmx5IGZvciB0aGUgcmVxdWVzdGVkIGZpbGVcclxuICAgKi9cclxuICBjYWNoZShmaWxlIDogc3RyaW5nfFRGaWxlfG51bGwgPSBudWxsKSA6IG9iamVjdCB7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IE1ldGFkYXRhLlBhcnNlRmlsZU5hbWUoZmlsZSkgfHwgdGhpcy5DdXJyZW50LlBhdGg7XHJcbiAgICBNZXRhZGF0YS5fY2FjaGVzW2ZpbGVOYW1lXSA9IE1ldGFkYXRhLl9jYWNoZXNbZmlsZU5hbWVdIHx8IHt9O1xyXG5cclxuICAgIHJldHVybiBNZXRhZGF0YS5fY2FjaGVzW2ZpbGVOYW1lXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgZGVzaXJlZCBwcm90b3R5cGVzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3RvdHlwZVBhdGggVGhlIHBhdGggdG8gdGhlIHByb3RvdHlwZSBmaWxlIGRlc2lyZWQuXHJcbiAgICogXHJcbiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHByb3RvdHlwZXMgaW4gdGhlIGdpdm5lIGZpbGVcclxuICAgKi9cclxuICBwcm90b3R5cGVzKHByb3RvdHlwZVBhdGg6IHN0cmluZykgOiBvYmplY3Qge1xyXG4gICAgcmV0dXJuIHRoaXMuZnJvbnRtYXR0ZXIoTWV0YWRhdGEuQnVpbGRQcm90b3R5cGVGaWxlRnVsbFBhdGgocHJvdG90eXBlUGF0aCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBkZXNpcmVkIGRhdGEgZnJvbSB2YWx1ZSBzdG9yYWdlXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3RvdHlwZVBhdGggVGhlIHBhdGggdG8gdGhlIGRlc2lyZWQgZGF0YSBmaWxlLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZyb250bWF0dGVyIHN0b3JlZCBpbiB0aGUgZ2l2ZW4gZmlsZVxyXG4gICAqL1xyXG4gIHZhbHVlcyhkYXRhUGF0aDogc3RyaW5nKSA6IG9iamVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9udG1hdHRlcihNZXRhZGF0YS5CdWlsZERhdGFGaWxlRnVsbFBhdGgoZGF0YVBhdGgpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgTWV0YWRhdGEgZm9yIGEgZ2l2ZW4gZmlsZSB1c2luZyB0aGUgc3VwcGxpZWQgc291cmNlcy5cclxuICAgKiBcclxuICAgKiBAcGFyYW0geyp9IGZpbGUgVGhlIG5hbWUgb2YgdGhlIGZpbGUgb3IgdGhlIGZpbGUgb2JqZWN0IHdpdGggYSBwYXRoXHJcbiAgICogQHBhcmFtIHtib29sfG9iamVjdH0gc291cmNlcyBUaGUgc291cmNlcyB0byBnZXQgbWV0YWRhdGEgZnJvbS4gRGVmYXVsdHMgdG8gYWxsLlxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIFRoZSByZXF1ZXN0ZWQgbWV0YWRhdGFcclxuICAgKi9cclxuICBnZXQoZmlsZTogc3RyaW5nfFRGaWxlfG51bGwgPSBudWxsLCBzb3VyY2VzOiBNZXRhZGF0YVNvdXJjZXN8Ym9vbGVhbiA9IE1ldGFkYXRhLkRlZmF1bHRTb3VyY2VzKSA6IG9iamVjdCB7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUgPyBNZXRhZGF0YS5QYXJzZUZpbGVOYW1lKGZpbGUpIDogdGhpcy5DdXJyZW50LlBhdGg7XHJcbiAgICBsZXQgdmFsdWVzOiBhbnkgPSB7fTtcclxuXHJcbiAgICBpZiAoc291cmNlcyA9PT0gdHJ1ZSkge1xyXG4gICAgICB2YWx1ZXMgPSB0aGlzLl9rZWJhYlByb3BTcGxheWVyKE1ldGFkYXRhXHJcbiAgICAgICAgLkRhdGF2aWV3QXBpXHJcbiAgICAgICAgLnBhZ2UoZmlsZU5hbWUpLCBbXCJmaWxlXCJdKSB8fCB7fTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChzb3VyY2VzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaWYgd2UgbmVlZCBkdiBzb3VyY2VzXHJcbiAgICAgIGlmIChzb3VyY2VzLkRhdGF2aWV3SW5saW5lIHx8IHNvdXJjZXMuRmlsZUluZm8pIHtcclxuICAgICAgICB2YWx1ZXMgPSB0aGlzLl9rZWJhYlByb3BTcGxheWVyKE1ldGFkYXRhXHJcbiAgICAgICAgICAuRGF0YXZpZXdBcGlcclxuICAgICAgICAgIC5wYWdlKGZpbGVOYW1lKSwgW1wiZmlsZVwiXSkgfHwge307XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGZpbGUgbWV0YWRhdGE/XHJcbiAgICAgICAgaWYgKCFzb3VyY2VzLkZpbGVJbmZvKSB7XHJcbiAgICAgICAgICBkZWxldGUgdmFsdWVzLmZpbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZW1vdmUgZHYgaW5saW5lP1xyXG4gICAgICAgIGxldCBmcm9udG1hdHRlcjogb2JqZWN0ID0gbnVsbDtcclxuICAgICAgICBpZiAoIXNvdXJjZXMuRGF0YXZpZXdJbmxpbmUpIHtcclxuICAgICAgICAgIGZyb250bWF0dGVyID0gdGhpcy5mcm9udG1hdHRlcihmaWxlTmFtZSk7XHJcbiAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2gocHJvcCA9PiB7XHJcbiAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgZnJvbnRtYXR0ZXIgcHJvcCBvciB0aGUgJ2ZpbGUnIG1ldGFkYXRhIHByb3BcclxuICAgICAgICAgICAgaWYgKCFmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBwcm9wICE9IFwiZmlsZVwiKSB7XHJcbiAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlc1twcm9wXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZW1vdmUgZnJvbnRtYXR0ZXI/XHJcbiAgICAgICAgaWYgKCFzb3VyY2VzLkZyb250bWF0dGVyKSB7XHJcbiAgICAgICAgICBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyIHx8IHRoaXMuZnJvbnRtYXR0ZXIoZmlsZU5hbWUpO1xyXG4gICAgICAgICAgT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXIpLmZvckVhY2gocHJvcCA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZXNbcHJvcF07XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gLy8ganVzdCB0aGUgZnJvbnRtYXR0ZXIvY2FjaGU/XHJcbiAgICAgIGVsc2UgaWYgKHNvdXJjZXMuRnJvbnRtYXR0ZXIpIHtcclxuICAgICAgICB2YWx1ZXMgPSB0aGlzLmZyb250bWF0dGVyKGZpbGVOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGFkZCBjYWNoZT9cclxuICAgIGlmIChzb3VyY2VzID09PSB0cnVlIHx8IHNvdXJjZXMuQ2FjaGUpIHtcclxuICAgICAgdmFsdWVzW1wiY2FjaGVcIl0gPSB0aGlzLmNhY2hlKGZpbGVOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRhZGF0YSBNb2RpZmllcnNcclxuXHJcbiAgLyoqXHJcbiAgICogUGF0Y2ggaW5kaXZpZHVhbCBwcm9wZXJ0aWVzIG9mIHRoZSBmcm9udG1hdHRlciBtZXRhZGF0YS5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IGZpbGUgVGhlIG5hbWUgb2YgdGhlIGZpbGUgb3IgdGhlIGZpbGUgb2JqZWN0IHdpdGggYSBwYXRoXHJcbiAgICogQHBhcmFtIHsqfG9iamVjdH0gZnJvbnRtYXR0ZXJEYXRhIFRoZSBwcm9wZXJ0aWVzIHRvIHBhdGNoLiBUaGlzIGNhbiBwYXRjaCBwcm9wZXJ0aWVzIG11bHRpcGxlIGtleXMgZGVlcCBhcyB3ZWxsLiBJZiBhIHByb3BlcnR5TmFtZSBpcyBwcm92aWRlZCB0aGVuIHRoaXMgZW50aXJlIG9iamVjdC92YWx1ZSBpcyBzZXQgdG8gdGhhdCBzaW5nbGUgcHJvcGVydHkgbmFtZSBpbnN0ZWFkXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5TmFtZSAoT3B0aW9uYWwpIElmIHlvdSB3YW50IHRvIHNldCB0aGUgZW50aXJlIGZyb250bWF0dGVyRGF0YSBwYXJhbWV0ZXIgdmFsdWUgdG8gYSBzaW5nbGUgcHJvcGVydHksIHNwZWNpZnkgdGhlIG5hbWUgb2YgdGhhdCBwcm9wZXJ0eSBoZXJlLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHRvVmFsdWVzRmlsZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHZhbHVlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gcGF0Y2ggc2FpZCBkYXRhIHZhbHVlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIHRoZSBwYXRoIGluIGhlcmUgaW5zdGVhZC5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBwcm90b3R5cGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSBwcm90b3R5cGUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBwYXRjaCBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YS5cclxuICAgKi9cclxuICBwYXRjaChmaWxlOiBzdHJpbmd8VEZpbGV8bnVsbCwgZnJvbnRtYXR0ZXJEYXRhOiBhbnksIHByb3BlcnR5TmFtZTogc3RyaW5nfG51bGwgPSBudWxsLCB0b1ZhbHVlc0ZpbGU6IGJvb2xlYW58c3RyaW5nID0gZmFsc2UsIHByb3RvdHlwZTogc3RyaW5nfGJvb2xlYW4gPSBmYWxzZSkgOiBvYmplY3Qge1xyXG4gICAgaWYgKHByb3RvdHlwZSAmJiB0b1ZhbHVlc0ZpbGUpIHtcclxuICAgICAgdGhyb3cgXCJDYW5ub3QgcGF0Y2ggdG9WYWx1ZXNGaWxlIGFuZCBwcm90b3R5cGUgYXQgdGhlIHNhbWUgdGltZS5cIjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IHVwZGF0ZSB9ID0gTWV0YWRhdGEuTWV0YWVkaXRBcGk7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IE1ldGFkYXRhLl9wYXJzZUZpbGVOYW1lRnJvbURhdGFGaWxlRmlsZU9yUHJvdG90eXBlKHRvVmFsdWVzRmlsZSwgZmlsZSwgcHJvdG90eXBlKTtcclxuICAgICAgXHJcbiAgICBpZiAocHJvcGVydHlOYW1lICE9IG51bGwpIHtcclxuICAgICAgdXBkYXRlKHByb3BlcnR5TmFtZSwgZnJvbnRtYXR0ZXJEYXRhLCBmaWxlTmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBPYmplY3Qua2V5cyhmcm9udG1hdHRlckRhdGEpLmZvckVhY2gocHJvcGVydHlOYW1lID0+XHJcbiAgICAgICAgdXBkYXRlKHByb3BlcnR5TmFtZSwgZnJvbnRtYXR0ZXJEYXRhW3Byb3BlcnR5TmFtZV0sIGZpbGVOYW1lKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZ2V0KGZpbGVOYW1lKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcGxhY2UgdGhlIGV4aXN0aW5nIGZyb250bWF0dGVyIG9mIGEgZmlsZSB3aXRoIGVudGlyZWx5IG5ldyBkYXRhLCBjbGVhcmluZyBvdXQgYWxsIG9sZCBkYXRhIGluIHRoZSBwcm9jZXNzLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ30gZmlsZSBUaGUgbmFtZSBvZiB0aGUgZmlsZSBvciB0aGUgZmlsZSBvYmplY3Qgd2l0aCBhIHBhdGhcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbnRtYXR0ZXJEYXRhIFRoZSBlbnRpcmUgZnJvbnRtYXR0ZXIgaGVhZGVyIHRvIHNldCBmb3IgdGhlIGZpbGUuIFRoaXMgY2xlYXJzIGFuZCByZXBsYWNlcyBhbGwgZXhpc3RpbmcgZGF0YSFcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB0b1ZhbHVlc0ZpbGUgKE9wdGlvbmFsKSBzZXQgdGhpcyB0byB0cnVlIGlmIHRoZSBwYXRoIGlzIGEgZGF0YSB2YWx1ZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHNldCB0byBzYWlkIGRhdGEgdmFsdWUgZmlsZS4gWW91IGNhbiBhbHNvIHBhc3MgdGhlIHBhdGggaW4gaGVyZSBpbnN0ZWFkLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHByb3RvdHlwZSAoT3B0aW9uYWwpIHNldCB0aGlzIHRvIHRydWUgaWYgdGhlIHBhdGggaXMgYSBkYXRhIHByb3RvdHlwZSBmaWxlIHBhdGggYW5kIHlvdSB3YW50IHRvIHNldCB0byBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBNZXRhZGF0YVxyXG4gICAqL1xyXG4gIHNldChmaWxlOiBzdHJpbmd8VEZpbGV8bnVsbCwgZnJvbnRtYXR0ZXJEYXRhOiBhbnksIHRvVmFsdWVzRmlsZTogYm9vbGVhbnxzdHJpbmcgPSBmYWxzZSwgcHJvdG90eXBlOiBzdHJpbmd8Ym9vbGVhbiA9IGZhbHNlKSA6IG9iamVjdCB7XHJcbiAgICBpZiAocHJvdG90eXBlICYmIHRvVmFsdWVzRmlsZSkge1xyXG4gICAgICB0aHJvdyBcIkNhbm5vdCBwYXRjaCB0b1ZhbHVlc0ZpbGUgYW5kIHByb3RvdHlwZSBhdCB0aGUgc2FtZSB0aW1lLlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgdXBkYXRlIH0gPSBNZXRhZGF0YS5NZXRhZWRpdEFwaTtcclxuICAgIGNvbnN0IGZpbGVOYW1lID0gTWV0YWRhdGEuX3BhcnNlRmlsZU5hbWVGcm9tRGF0YUZpbGVGaWxlT3JQcm90b3R5cGUodG9WYWx1ZXNGaWxlLCBmaWxlLCBwcm90b3R5cGUpO1xyXG5cclxuICAgIHRoaXMuY2xlYXIoZmlsZU5hbWUpO1xyXG4gICAgT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXJEYXRhKS5mb3JFYWNoKHByb3BlcnR5TmFtZSA9PlxyXG4gICAgICB1cGRhdGUocHJvcGVydHlOYW1lLCBmcm9udG1hdHRlckRhdGFbcHJvcGVydHlOYW1lXSwgZmlsZU5hbWUpKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXQoZmlsZU5hbWUpO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBVc2VkIHRvIGNsZWFyIHZhbHVlcyBmcm9tIG1ldGFkYXRhLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ30gZmlsZSBUaGUgZmlsZSB0byBjbGVhciBwcm9wZXJ0aWVzIGZvci4gZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgZmlsZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheX0gZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzIChvcHRpb25hbClUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHksIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLCBvciBhbiBvYmplY3Qgd2l0aCB0aGUgbmFtZWQga2V5cyB5b3Ugd2FudCBjbGVhcmVkLiBJZiBsZWZ0IGJsYW5rLCBhbGwgZnJvbnRtYXR0ZXIgZm9yIHRoZSBmaWxlIGlzIGNsZWFyZWQhXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gdG9WYWx1ZXNGaWxlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgdmFsdWUgZmlsZSBwYXRoIGFuZCB5b3Ugd2FudCB0byBjbGVhciBmcm9tIHNhaWQgZGF0YSB2YWx1ZSBmaWxlLiBZb3UgY2FuIGFsc28gcGFzcyB0aGUgcGF0aCBpbiBoZXJlIGluc3RlYWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gcHJvdG90eXBlIChPcHRpb25hbCkgc2V0IHRoaXMgdG8gdHJ1ZSBpZiB0aGUgcGF0aCBpcyBhIGRhdGEgcHJvdG90eXBlIGZpbGUgcGF0aCBhbmQgeW91IHdhbnQgdG8gY2xlYXIgZnJvbSBzYWlkIGRhdGEgcHJvdG90eXBlIGZpbGUuIFlvdSBjYW4gYWxzbyBwYXNzIGluIHRoZSBwYXRoIGhlcmUgaW5zdGVhZC5cclxuICAgKi9cclxuICBjbGVhcihmaWxlOiBzdHJpbmd8VEZpbGV8bnVsbCA9IG51bGwgLCBmcm9udG1hdHRlclByb3BlcnRpZXM6IHN0cmluZ3xBcnJheTxzdHJpbmc+fG9iamVjdHxudWxsID0gbnVsbCwgdG9WYWx1ZXNGaWxlOiBib29sZWFufHN0cmluZyA9IGZhbHNlLCBwcm90b3R5cGU6IHN0cmluZ3xib29sZWFuID0gZmFsc2UpIHtcclxuICAgIGlmIChwcm90b3R5cGUgJiYgdG9WYWx1ZXNGaWxlKSB7XHJcbiAgICAgIHRocm93IFwiQ2Fubm90IHBhdGNoIHRvVmFsdWVzRmlsZSBhbmQgcHJvdG90eXBlIGF0IHRoZSBzYW1lIHRpbWUuXCI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsZU5hbWUgPSBNZXRhZGF0YS5fcGFyc2VGaWxlTmFtZUZyb21EYXRhRmlsZUZpbGVPclByb3RvdHlwZSh0b1ZhbHVlc0ZpbGUsIGZpbGUsIHByb3RvdHlwZSk7XHJcbiAgICBsZXQgcHJvcHNUb0NsZWFyID0gW107XHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YgZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIHByb3BzVG9DbGVhci5wdXNoKGZyb250bWF0dGVyUHJvcGVydGllcyk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmcm9udG1hdHRlclByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmIChmcm9udG1hdHRlclByb3BlcnRpZXMgPT09IG51bGwpIHtcclxuICAgICAgICBwcm9wc1RvQ2xlYXIgPSBPYmplY3Qua2V5cyh0aGlzLmZyb250bWF0dGVyKGZpbGVOYW1lKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmcm9udG1hdHRlclByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgcHJvcHNUb0NsZWFyID0gZnJvbnRtYXR0ZXJQcm9wZXJ0aWVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByb3BzVG9DbGVhciA9IE9iamVjdC5rZXlzKGZyb250bWF0dGVyUHJvcGVydGllcyk7XHJcbiAgICAgIH1cclxuICAgIH0gXHJcblxyXG4gICAgdGhyb3cgXCJub3QgaW1wbGVtZW50ZWRcIjtcclxuICB9XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICAvLyNyZWdpb24gVXRpbGl0aWVzXHJcbiAgLy8jcmVnaW9uIE9iamVjdCBEZWVwIFByb3BlcnR5IFV0aWxpdGllc1xyXG5cclxuICAvKipcclxuICAgKiBGaW5kIGEgZGVlcCBwcm9wZXJ0eSBpbiBhbiBvYmplY3QuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXlbc3RyaW5nXX0gcHJvcGVydHlQYXRoIEFycmF5IG9mIGtleXMsIG9yIGRvdCBzZXBlcmF0ZWQgcHJvcGVyeSBrZXkuXCJcclxuICAgKiBAcGFyYW0ge29iamVjdH0gb25PYmplY3QgVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBkZXNpcmVkIGtleVxyXG4gICAqICBcclxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMsIGZhbHNlIGlmIG5vdC4gXHJcbiAgICovXHJcbiAgc3RhdGljIENvbnRhaW5zRGVlcFByb3BlcnR5KHByb3BlcnR5UGF0aDogc3RyaW5nfEFycmF5PHN0cmluZz4sIG9uT2JqZWN0OiBhbnkpIDogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBrZXlzID0gKHR5cGVvZiAocHJvcGVydHlQYXRoKSA9PSBcInN0cmluZ1wiKVxyXG4gICAgICA/IHByb3BlcnR5UGF0aFxyXG4gICAgICAgIC5zcGxpdCgnLicpXHJcbiAgICAgIDogcHJvcGVydHlQYXRoO1xyXG4gICAgXHJcbiAgICBsZXQgcGFyZW50ID0gb25PYmplY3Q7XHJcbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRLZXkgb2Yga2V5cykge1xyXG4gICAgICBpZiAodHlwZW9mIHBhcmVudCAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFwYXJlbnQuaGFzT3duUHJvcGVydHkoY3VycmVudEtleSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBhcmVudCA9IHBhcmVudFtjdXJyZW50S2V5XTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGRlZXAgcHJvcGVydHkgaW4gYW4gb2JqZWN0LCBudWxsIGlmIG5vdCBmb3VuZC5cclxuICAgKiBcclxuICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheVtzdHJpbmddfSBwcm9wZXJ0eVBhdGggQXJyYXkgb2Yga2V5cywgb3IgZG90IHNlcGVyYXRlZCBwcm9wZXJ5IGtleS5cIlxyXG4gICAqIEBwYXJhbSB7e29uVHJ1ZTpmdW5jdGlvbihvYmplY3QpLCBvbkZhbHNlOmZ1bmN0aW9uKCl9fGZ1bmN0aW9uKG9iamVjdCl8W2Z1bmN0aW9uKG9iamVjdCksIGZ1bmN0aW9uKCldfSB0aGVuRG8gQShzZXQgb2YpIGNhbGxiYWNrKHMpIHRoYXQgdGFrZXMgdGhlIGZvdW5kIHZhbHVlIGFzIGEgcGFyYW1ldGVyLiBEZWZhdWx0cyB0byBqdXN0IHRoZSBvblRydWUgbWV0aG9kIGlmIGEgc2luZ2xlIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbiBvbiBpdCdzIG93bi5cclxuICAgKiBAcGFyYW0ge29iamVjdH0gZnJvbU9iamVjdCBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRlc2lyZWQga2V5XHJcbiAgICogIFxyXG4gICAqIEByZXR1cm5zIGlmIHRoZSBwcm9wZXJ0eSBleGlzdHMuIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBUcnlUb0dldERlZXBQcm9wZXJ0eShwcm9wZXJ0eVBhdGg6IHN0cmluZ3xBcnJheTxzdHJpbmc+LCB0aGVuRG86IGFueSwgZnJvbU9iamVjdDogYW55KSA6IGJvb2xlYW4ge1xyXG4gICAgY29uc3Qga2V5cyA9ICh0eXBlb2YgKHByb3BlcnR5UGF0aCkgPT0gXCJzdHJpbmdcIilcclxuICAgICAgPyBwcm9wZXJ0eVBhdGhcclxuICAgICAgICAuc3BsaXQoJy4nKVxyXG4gICAgICA6IHByb3BlcnR5UGF0aDtcclxuICAgIFxyXG4gICAgbGV0IHBhcmVudCA9IGZyb21PYmplY3Q7XHJcbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRLZXkgb2Yga2V5cykge1xyXG4gICAgICBpZiAodHlwZW9mIHBhcmVudCAhPT0gXCJvYmplY3RcIiB8fCAhcGFyZW50Lmhhc093blByb3BlcnR5KGN1cnJlbnRLZXkpKSB7XHJcbiAgICAgICAgaWYgKHRoZW5EbyAmJiB0aGVuRG8ub25GYWxzZSkge1xyXG4gICAgICAgICAgdGhlbkRvLm9uRmFsc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwYXJlbnQgPSBwYXJlbnRbY3VycmVudEtleV07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoZW5Ebykge1xyXG4gICAgICBjb25zdCB0aGVuID0gdGhlbkRvLm9uVHJ1ZSB8fCB0aGVuRG87XHJcbiAgICAgIGlmICh0aGVuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoZW4ocGFyZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgZGVlcCBwcm9wZXJ0eSBpbiBhbiBvYmplY3QsIG51bGwgaWYgbm90IGZvdW5kLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfGFycmF5W3N0cmluZ119IHByb3BlcnR5UGF0aCBBcnJheSBvZiBrZXlzLCBvciBkb3Qgc2VwZXJhdGVkIHByb3Blcnkga2V5LlwiXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGZyb21PYmplY3QgVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBkZXNpcmVkIGtleVxyXG4gICAqICBcclxuICAgKiBAcmV0dXJucyBUaGUgZm91bmQgZGVlcCBwcm9wZXJ0eSwgb3IgbnVsbCBpZiBub3QgZm91bmQuIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBHZXREZWVwUHJvcGVydHkocHJvcGVydHlQYXRoOiBzdHJpbmd8QXJyYXk8c3RyaW5nPiwgZnJvbU9iamVjdDogYW55KSA6IGFueXxudWxsIHtcclxuICAgIHJldHVybiAodHlwZW9mIChwcm9wZXJ0eVBhdGgpID09IFwic3RyaW5nXCJcclxuICAgICAgPyBwcm9wZXJ0eVBhdGhcclxuICAgICAgICAuc3BsaXQoJy4nKVxyXG4gICAgICA6IHByb3BlcnR5UGF0aClcclxuICAgICAgLnJlZHVjZSgodCwgcCkgPT4gdD8uW3BdLCBmcm9tT2JqZWN0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBhIGRlZXAgcHJvcGVydHkgaW4gYW4gb2JqZWN0LCBldmVuIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHtzdHJpbmd8W3N0cmluZ119IHByb3BlcnR5UGF0aCBBcnJheSBvZiBrZXlzLCBvciBkb3Qgc2VwZXJhdGVkIHByb3Blcnkga2V5LlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9uKG9iamVjdCl9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQsIG9yIGEgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm4gaXQuXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGZyb21PYmplY3QgVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBkZXNpcmVkIGtleVxyXG4gICAqICBcclxuICAgKiBAcmV0dXJucyBUaGUgZm91bmQgZGVlcCBwcm9wZXJ0eSwgb3IgbnVsbCBpZiBub3QgZm91bmQuIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBTZXREZWVwUHJvcGVydHkocHJvcGVydHlQYXRoOiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+LCB2YWx1ZTogYW55LCBvbk9iamVjdDogYW55KTogdm9pZCB7XHJcbiAgICBjb25zdCBrZXlzID0gKHR5cGVvZiAocHJvcGVydHlQYXRoKSA9PSBcInN0cmluZ1wiKVxyXG4gICAgICA/IHByb3BlcnR5UGF0aFxyXG4gICAgICAgIC5zcGxpdCgnLicpXHJcbiAgICAgIDogcHJvcGVydHlQYXRoO1xyXG4gICAgXHJcbiAgICBsZXQgcGFyZW50ID0gb25PYmplY3Q7XHJcbiAgICBsZXQgY3VycmVudEtleTtcclxuICAgIGZvciAoY3VycmVudEtleSBvZiBrZXlzKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgcGFyZW50ICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgdGhyb3cgYFByb3BlcnR5OiAke2N1cnJlbnRLZXl9LCBpbiBQYXRoOiAke3Byb3BlcnR5UGF0aH0sIGlzIG5vdCBhbiBvYmplY3QuIENoaWxkIHByb3BlcnR5IHZhbHVlcyBjYW5ub3QgYmUgc2V0IWA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHRoaXMgcGFyZW50IGRvZXNuJ3QgaGF2ZSB0aGUgcHJvcGVydHkgd2Ugd2FudCwgYWRkIGl0IGFzIGFuIGVtcHR5IG9iamVjdCBmb3Igbm93LlxyXG4gICAgICBpZiAoIXBhcmVudC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50S2V5KSkge1xyXG4gICAgICAgIHBhcmVudFtjdXJyZW50S2V5XSA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBpZiB0aGlzIGlzbid0IHRoZSBsYXN0IG9uZSwgc2V0IGl0IGFzIHBhcmVudC5cclxuICAgICAgaWYgKGN1cnJlbnRLZXkgIT0ga2V5c1trZXlzLmxlbmd0aCAtIDFdKSB7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50W2N1cnJlbnRLZXldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjdXJyZW50S2V5KSB7XHJcbiAgICAgIHRocm93IFwiTm8gRmluYWwgS2V5IFByb3ZpZGVkIT9cIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgcGFyZW50W2N1cnJlbnRLZXldID0gdmFsdWUocGFyZW50W2N1cnJlbnRLZXldKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBhcmVudFtjdXJyZW50S2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcbiAgLy8jcmVnaW9uIEZpbGVuYW1lIFV0aWxpdGllc1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFR1cm4gYSByZWxhdGl2ZSBwYXRoIGludG8gYSBmdWxsIHBhdGhcclxuICAgKiBcclxuICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSByZWxhdGl2ZSBwYXRoIHRvIG1hcCB0b1xyXG4gICAqIEBwYXJhbSBleHRlbnNpb24gVGhlIGV4dGVuc2lvbiB0byBhZGQuIERlZmF1bHRzIHRvIG5vIGV4dGVuc2lvbiAoZmFsc2UvZW1wdHkpLiBJZiB0cnVlIGlzIHBhc3NlZCBpbiAubWQgd2lsbCBiZSBhZGRlZC4gXHJcbiAgICogQHBhcmFtIHJvb3RGb2xkZXIgKE9wdGlvbmFsKSBUaGUgcm9vdCBmb2xkZXIgcGF0aCB0aGUgcmVsYXRpdmUgcGF0aCBpcyByZWxhdGl2ZSB0b28uIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IG5vdGUncyBmb2xkZXJcclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgZnVsbCBmaWxlIHBhdGguXHJcbiAgICovXHJcbiAgcGF0aChyZWxhdGl2ZVBhdGg6IHN0cmluZ3xudWxsID0gbnVsbCwgZXh0ZW5zaW9uOiBzdHJpbmd8Ym9vbGVhbiA9IFwiXCIsIHJvb3RGb2xkZXI6IHN0cmluZyB8IG51bGwgPSBudWxsKSB7XHJcbiAgICBpZiAoIXJlbGF0aXZlUGF0aCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fYWRkRXh0ZW5zaW9uKHRoaXMuY3VycmVudC5wYXRoLCBleHRlbnNpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtmaWxlTmFtZSwgLi4uZm9sZGVyc11cclxuICAgICAgPSByZWxhdGl2ZVBhdGguc3BsaXQoXCIvXCIpLnJldmVyc2UoKTtcclxuXHJcbiAgICBsZXQgYWJzb2x1dGVQYXRoID0gZmlsZU5hbWU7XHJcbiAgICBsZXQgY3VycmVudEZvbGRlcjogVEZvbGRlciA9IHJvb3RGb2xkZXJcclxuICAgICAgPyBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJvb3RGb2xkZXIpXHJcbiAgICAgIDogdGhpcy5DdXJyZW50Lk5vdGUucGFyZW50XHJcbiAgXHJcbiAgICBmb3IgKHZhciBmb2xkZXIgb2YgZm9sZGVycy5yZXZlcnNlKCkpIHtcclxuICAgICAgaWYgKGZvbGRlciA9PT0gXCIuLlwiKSB7XHJcbiAgICAgICAgY3VycmVudEZvbGRlciA9IGN1cnJlbnRGb2xkZXIucGFyZW50O1xyXG4gICAgICB9IGVsc2UgaWYgKGZvbGRlciA9PT0gXCIuXCIpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhYnNvbHV0ZVBhdGggPSBmb2xkZXIgKyBcIi9cIiArIGFic29sdXRlUGF0aDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50Rm9sZGVyLnBhdGggIT09IFwiL1wiKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9hZGRFeHRlbnNpb24oY3VycmVudEZvbGRlci5wYXRoICsgXCIvXCIgKyBhYnNvbHV0ZVBhdGgsIGV4dGVuc2lvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5fYWRkRXh0ZW5zaW9uKGFic29sdXRlUGF0aCwgZXh0ZW5zaW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9hZGRFeHRlbnNpb24ocGF0aDogc3RyaW5nLCBleHRlbnNpb246IHN0cmluZyB8IGJvb2xlYW4pIDogc3RyaW5nIHtcclxuICAgIGlmIChleHRlbnNpb24pIHtcclxuICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb24gIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICByZXR1cm4gcGF0aCArIFwiLm1kXCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGggKyBcIi5cIiArIGV4dGVuc2lvbjtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGZpbGUgcGF0aCBzdHJpbmcgYmFzZWQgb24gYSBmaWxlIHBhdGggc3RyaW5nIG9yIGZpbGUgb2JqZWN0LlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ30gZmlsZSBUaGUgZmlsZSBvYmplY3QgKHdpdGggYSBwYXRoIHByb3BlcnR5KSBvciBmaWxlIG5hbWVcclxuICAgKiBcclxuICAgKiBAcmV0dXJucyBUaGUgZmlsZSBwYXRoXHJcbiAgICovXHJcbiAgc3RhdGljIFBhcnNlRmlsZU5hbWUoZmlsZSA6IHN0cmluZ3xURmlsZXxudWxsKSA6IHN0cmluZ3xudWxsIHtcclxuICAgIGxldCBmaWxlTmFtZSA9IGZpbGUgfHwgbnVsbDtcclxuICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gXCJvYmplY3RcIiAmJiBmaWxlICE9PSBudWxsKSB7XHJcbiAgICAgIGZpbGVOYW1lID0gZmlsZS5wYXRoLnNwbGl0KCcuJykuc2xpY2UoMCwgLTEpLmpvaW4oJy4nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGZpbGVOYW1lO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBHZXQgdGhlIGZ1bGwgcGF0aCBvZiBhIGRhdGEgZmlsZSBmcm9tIGl0J3MgZGF0YSBwYXRoLlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBkYXRhUGF0aCBUaGUgcGF0aCBhZnRlciB0aGUgdmFsdWUgc2V0IGluIHNldHRpbmdzIGZvciB0aGUgcGF0aCB0byBkYXRhIHZhbHVlIGZpbGVzLlxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIHRoZSBmdWxsIHBhdGggZnJvbSB0aGUgcm9vdCBvZiB0aGUgdmF1bHQuXHJcbiAgICovXHJcbiAgc3RhdGljIEJ1aWxkRGF0YUZpbGVGdWxsUGF0aChkYXRhUGF0aCA6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1hcGlcIl0uc2V0dGluZ3MuZGF0YUZpbGVzUGF0aCArIGRhdGFQYXRoO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBHZXQgdGhlIGZ1bGwgcGF0aCBvZiBhIHByb3RvdHlwZSBmaWxlIGZyb20gaXQncyBkYXRhIHBhdGguXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHByb3RvdHlwZVBhdGggVGhlIHBhdGggYWZ0ZXIgdGhlIHZhbHVlIHNldCBpbiBzZXR0aW5ncyBmb3IgdGhlIHBhdGggdG8gZGF0YSBwcm90b3R5cGVzIGZpbGVzLlxyXG4gICAqIFxyXG4gICAqIEByZXR1cm5zIHRoZSBmdWxsIHBhdGggZnJvbSB0aGUgcm9vdCBvZiB0aGUgdmF1bHQuXHJcbiAgICovXHJcbiAgc3RhdGljIEJ1aWxkUHJvdG90eXBlRmlsZUZ1bGxQYXRoKHByb3RvdHlwZVBhdGggOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBhcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWRhdGEtYXBpXCJdLnNldHRpbmdzLnByb3RvdHlwZXNQYXRoICsgcHJvdG90eXBlUGF0aDtcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBzdGF0aWMgX3BhcnNlRmlsZU5hbWVGcm9tRGF0YUZpbGVGaWxlT3JQcm90b3R5cGUodG9WYWx1ZXNGaWxlOiBzdHJpbmcgfCBib29sZWFuLCBmaWxlOiBzdHJpbmcgfCBURmlsZSB8IG51bGwsIHByb3RvdHlwZTogc3RyaW5nIHwgYm9vbGVhbikge1xyXG4gICAgcmV0dXJuIHRvVmFsdWVzRmlsZVxyXG4gICAgICA/IGZpbGVcclxuICAgICAgICA/IE1ldGFkYXRhLkJ1aWxkRGF0YUZpbGVGdWxsUGF0aChNZXRhZGF0YS5QYXJzZUZpbGVOYW1lKGZpbGUpKVxyXG4gICAgICAgIDogKHR5cGVvZiB0b1ZhbHVlc0ZpbGUgPT09IFwic3RyaW5nXCJcclxuICAgICAgICAgID8gTWV0YWRhdGEuQnVpbGREYXRhRmlsZUZ1bGxQYXRoKHRvVmFsdWVzRmlsZSlcclxuICAgICAgICAgIDogTWV0YWRhdGEuQnVpbGREYXRhRmlsZUZ1bGxQYXRoKE1ldGFkYXRhLkFwaS5DdXJyZW50LlBhdGgpKVxyXG4gICAgICA6IHByb3RvdHlwZVxyXG4gICAgICAgID8gZmlsZVxyXG4gICAgICAgICAgPyBNZXRhZGF0YS5CdWlsZFByb3RvdHlwZUZpbGVGdWxsUGF0aChNZXRhZGF0YS5QYXJzZUZpbGVOYW1lKGZpbGUpKVxyXG4gICAgICAgICAgOiAodHlwZW9mIHByb3RvdHlwZSA9PT0gXCJzdHJpbmdcIlxyXG4gICAgICAgICAgICA/IE1ldGFkYXRhLkJ1aWxkUHJvdG90eXBlRmlsZUZ1bGxQYXRoKHByb3RvdHlwZSlcclxuICAgICAgICAgICAgOiBNZXRhZGF0YS5CdWlsZFByb3RvdHlwZUZpbGVGdWxsUGF0aChNZXRhZGF0YS5BcGkuQ3VycmVudC5QYXRoKSlcclxuICAgICAgICA6IE1ldGFkYXRhLlBhcnNlRmlsZU5hbWUoZmlsZSkgfHwgTWV0YWRhdGEuQXBpLkN1cnJlbnQuUGF0aDtcclxuICB9XHJcbiAgXHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI2VuZHJlZ2lvblxy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
